<html><head>
<meta name="KeyWords" content="Информационные технологии, internet, html, xml, w3c, расширяемый язык разметки, Extensible Markup Language, рекомендация, спецификация">
<meta name="Robots" content="all">
<meta name="Description" content="http://www.citforum.ru, Расширяемый язык разметки (XML) 1.0 (вторая редакция). Рекомендация W3C от 6 октября 2000 года">
<meta name="Document-state" content="Static">
<title>Расширяемый язык разметки (XML) 1.0 (вторая редакция). Рекомендация W3C от 6 октября 2000 года</title>
<link rel=stylesheet type="text/css" href="/css/forum.css">
<META http-equiv="Content-Type" content="text/html; charset=windows-1251">
</head>
<body bgcolor=#FFFFFF link=#006890 vlink=#003860 alink=#800000 text=#000000 topmargin=0 marginheight=0>
<a name=top></a>
<table cellspacing=0 cellpadding=0 border=0 width=100%><tr>
<td><img src="http://counter.rambler.ru/top100.cnt?13078" alt="" width=1 height=1 border=0></td><td><!--TopList COUNTER--><script language="JavaScript"><!--
d=document;js=10;a=';r='+escape(d.referrer)
//--></script><script language="JavaScript1.1"><!--
js=11;a+=';j='+navigator.javaEnabled()
//--></script><script language="JavaScript1.2"><!--
js=12;s=screen;a+=';s='+s.width+'*'+s.height
a+=';d='+(s.colorDepth?s.colorDepth:s.pixelDepth)
//--></script><script language="JavaScript1.3"><!--
js=13//--></script><script language="JavaScript"><!--
d.write('<img src="http://top.list.ru/counter'+
'?id=26978;js='+js+a+'" alt="" height=1 width=1>')
if(js>11)d.write('<'+'!-- ')//--></script><noscript><img
src="http://top.list.ru/counter?js=na;id=26978"
height=1 width=1 alt=""></noscript><script language="JavaScript"><!--
if(js>11)d.write('--'+'>')
//--></script><!--TopList COUNTER--></td>

</tr></table>



<!-- top menu and logo -->
<table cellspacing=0 cellpadding=0 border=0 width=100%><tr><td><img src=/pictures/1x1.gif width=1 height=5 border=0 alt=""></td></tr></table>

<table cellspacing=0 cellpadding=0 border=0 width=100%>

<tr>

<tr valign=top>
<td rowspan=6><a href=/><img src=/pictures/logos/citlogo8.gif width=140 height=44 border=0 alt=Logo></a></td>
<td rowspan=6>&nbsp;&nbsp;&nbsp;</td>
<td bgcolor=#008080><img src=/pictures/1x1.gif width=1 height=1 alt=""  border=0></td></tr>
<tr><td bgcolor=#daecd7><img src=/pictures/1x1.gif width=1 height=3 alt="" border=0></td></tr>
<tr><td bgcolor=#008080>
<table cellspacing=1 cellpadding=1 border=0 width=100%>
<tr>
<td bgcolor=#F4F9F3 align=center width=9%><a class=head href=/search.shtml>Поиск</a></td>
<td bgcolor=#F4F9F3 align=center width=13%><a class=head href=/rubricator/>Рубрикатор</a></td>
<td bgcolor=#F4F9F3 align=center width=11%><a class=head href=http://forum.citforum.ru/>Форумы</a></td>
<td bgcolor=#F4F9F3 align=center width=18%><a class=head href=/news.shtml>Новости сервера</a></td>
<td bgcolor=#F4F9F3 align=center width=18%><a class=head href=http://www.citmgu.ru/>Учебный центр</a></td>
<td bgcolor=#F4F9F3 align=center width=20%><a class=head href=http://www.mistral.ru/>Книжный магазин</a></td>
<td bgcolor=#F4F9F3 align=center width=11%><a class=head href=/how.shtml>Авторам</a></td>
</tr></table>
</td>

<tr><td><img src=/pictures/1x1.gif width=1 height=3 alt="" border=0></td></tr>
<tr>
<td width=100% align=right>
<font size=2><b>Море(!) аналитической информации!</b> :: <a href=/>CITFORUM.RU</a></font>
</td>
</tr>
</table>
<table cellspacing=0 cellpadding=0 border=0 width=100%><tr><td><img src=pictures/1x1.gif width=1 height=5 border=0 alt=""></td></tr><tr><td bgcolor=#008080><img src=pictures/1x1.gif width=1 height=1 border=0 alt=""></td></tr><!--<tr><td bgcolor=#daecd7><img src=pictures/1x1.gif width=1 height=3 border=0 alt=""></td></tr>--><tr><td><img src=pictures/1x1.gif width=1 height=10 border=0 alt=""></td></tr></table>




<!-- end of top -->

<!--468x60 start-->

<!--BEGIN Krutilka.RU "Intel_ENGL", GEOMETRY: 728x90, GRAPHICS ONLY-->
<noscript>
<a href="http://ad.krutilka.ru/r2397x61x-1043247331" target="_top"><img src="http://ad.krutilka.ru/b2397x61x-1043247331" border="0"></a>
</noscript>
<script language="JavaScript">
var rand = Math.floor(Math.random() * 1000000000);
document.write('<a href="http://ad.krutilka.ru/r2397x61x' + rand + '" target="_top"><img src="http://ad.krutilka.ru/b2397x61x' + rand + '" border="0" width="728" height="90"></a>');
</script>
<!--END Krutilka.RU-->

<!--468x60 end-->

<!--top adv-->
<p>
<table cellspacing=0 cellpadding=0 border=0 width=100%>
<tr><td bgcolor=#008080><img src=/pictures/1x1.gif width=1 height=1 border=0 alt=""></td></tr>
<tr><td bgcolor=#daecd7><img src=/pictures/1x1.gif width=1 height=3 border=0 alt=""></td></tr>
</table>

<table cellspacing=0 cellpadding=0 border=0 width=100%>
<tr><td bgcolor=#008080>

<table cellspacing=1 cellpadding=0 border=0 width=100%><tr>

<td bgcolor=#ffffff width=50% align=center>
<table cellspacing=0 cellpadding=8 border=0>
<tr><td>
<font size=2>

<a href=/cdrom.shtml><img src=/pictures/logos/cd1.gif width=21 height=21 border=0></a></td><td align=center><font size=2><b><a href=/cdrom.shtml>CITFORUM CD. Последняя версия!</a></b>
</td>
</tr>
</table>
</td>

<td bgcolor=#ffffff width=50% align=center valign=top>
<table cellspacing=0 cellpadding=8 border=0>
<tr>
<td>
<font color=red size=2><b>Новогоднее cнижение цен!</b></font><br>
<font size=2>
<script language="JavaScript">
<!--
var rand = Math.floor(Math.random() * 3);
if (rand == 0)  {document.write('<a href=http://www.citforum.ru/seminars/2002/cd_risk.shtml>CD "Руководство по управлению информационными рисками корпоративных информационных систем Internet/Intranet"</a> <s><b>2695р.</b></s> - <font color=red><b>1490р.</b></font>');}
else if  (rand == 1)  {document.write('<a href=http://www.citforum.ru/seminars/2002/cd_taina.shtml>CD "Коммерческая тайна и экономическая безопасность бизнеса"</a> <s><b>2695р.</b></s>  - <font color=red><b>1490р</b>.</font>');}
else if  (rand == 2)  {document.write('<a href=http://www.citforum.ru/seminars/2002/cd_iso17799.shtml>CD "Практическое применение международного стандарта безопасности информационных систем ISO 17799"</a> <s><b>2495 р.</b></s> - <font color=red><b>1995р</b>.</font>');}
else {document.write('<a href=http://www.citforum.ru/seminars/2002/cd_iso17799.shtml>CD "Практическое применение международного стандарта безопасности информационных систем ISO 17799"</a> <s><b>2495 р.</b></s> - <font color=red><b>1995р</b>.</font>');}
// --></script><noscript><a href=http://www.citforum.ru/seminars/2002/cd_iso17799.shtml>CD "Практическое применение международного стандарта безопасности информационных систем ISO 17799"</a> <s><b>2495 р.</b></s> - <font color=red><b>1995р</b>.</font></noscript>

</font>

</td></tr></table>

</td>
</tr>
</table>
</td>


</tr></table>
</td></tr></table>


<!--/top adv-->



<!--

<table cellspacing=0 cellpadding=0 border=0 width=100%>
<tr><td><img src=/pictures/1x1.gif width=1 height=10 border=0 alt=""></td></tr>
<tr><td bgcolor=#008080><img src=/pictures/1x1.gif width=1 height=1 border=0 alt=""></td></tr>
<tr><td><img src=/pictures/1x1.gif width=1 height=5 border=0 alt=""></td></tr>
</table>
-->
<table cellspacing=0 cellpadding=5 border=0 width="100%"><tr><td><p><font face="Tahoma, Arial, sans-serif" size=1><b><a href=http://www.citforum.ru/>CITFORUM.RU</a> &gt;&gt;&gt;

<a href=/internet/>INTERNET</a>

&nbsp;&nbsp;&nbsp;&nbsp;
[<a href=http://www.citforum.ru/internet/xmlspec/xmlspec.shtml>http://www.citforum.ru/internet/xmlspec/xmlspec.shtml</a>]</b></font></td></tr></table>
<table cellpadding=5 cellspacing=0 border=0>
<tr valign=top><td width=100%>
<p>&nbsp;

<!-- start -->

<P><A href="http://www.w3.org/"><img src="w3c.gif" width="72" height="48" alt="" border="0"></A></P>
<H1>Расширяемый язык разметки (XML) 1.0 (вторая редакция)</H1>
<H2>Рекомендация W3C от 6 октября 2000 года</H2>
</DIV>
<table width="100%" cellpadding="0"><tr><td bgcolor="#E8E8E8">
Данный документ представляет собой перевод спецификации Extensible Markup Language (XML) 1.0 
(Second Edition) (W3C Recommendation) на русский язык. При этом нормативным документом 
считается оригинальная спецификация на английском языке, которую можно найти по адресу 
<DIR>
<A href="http://www.w3.org/TR/2000/REC-xml-20001006">http://www.w3.org/TR/2000/REC-xml-20001006</A>.
</DIR>
Перевод спецификации на русский язык представлен на страницах портала "Россия-Он-Лайн":
<DIR>
<A href="http://www.rol.ru/news/it/helpdesk/xml01.htm">http://www.rol.ru/news/it/helpdesk/xml01.htm</A>
</DIR>
Перевод выполнен 
<A href="mailto:radik_u@mail.ru">Радиком Усмановым</A>, 
<A href="http://www.luxoft.com">Luxoft</A> (<A href="http://www.ibs.ru">IBS</A>)<BR>
Представленный документ может содержать ошибки перевода.
</td></tr></table>
<DL>
<DT>Данная версия: <DD><A href="http://www.w3.org/TR/2000/REC-xml-20001006">http://www.w3.org/TR/2000/REC-xml-20001006</A> (<A href="http://www.w3.org/TR/2000/REC-xml-20001006.html">XHTML</A>, <A href="http://www.w3.org/TR/2000/REC-xml-20001006.xml">XML</A>, <A href="http://www.w3.org/TR/2000/REC-xml-20001006.pdf">PDF</A>, <A href="http://www.w3.org/TR/2000/REC-xml-20001006-review.html">обзорная версия XHTML</A> с цветовым выделением исправлений)
<DT>Последняя версия: <DD><A href="http://www.w3.org/TR/REC-xml">http://www.w3.org/TR/REC-xml</A> 
<DT>Предыдущие версии: 
<DD><A href="http://www.w3.org/TR/2000/WD-xml-2e-20000814">http://www.w3.org/TR/2000/WD-xml-2e-20000814</A> 
<DD><A href="http://www.w3.org/TR/1998/REC-xml-19980210">http://www.w3.org/TR/1998/REC-xml-19980210</A> 
<DT>Редакторы: 
<DD>Tim Bray, Textuality и Netscape <A href="mailto:tbray@textuality.com">&lt;tbray@textuality.com&gt;</A> 
<DD>Jean Paoli, Microsoft <A href="mailto:jeanpa@microsoft.com">&lt;jeanpa@microsoft.com&gt;</A> 
<DD>C. M. Sperberg-McQueen, Университет Иллинойс в Чикаго и Text Encoding Initiative <A href="mailto:cmsmcq@uic.edu">&lt;cmsmcq@uic.edu&gt;</A> 
<DD>Eve Maler, Sun Microsystems, Inc. <A href="mailto:elm@east.sun.com">&lt;elm@east.sun.com&gt;</A> - Вторая редакция</DD></DL>
<P class=copyright><A href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</A>&nbsp;&copy;&nbsp;2000&nbsp;<A href="http://www.w3.org/"><ABBR title="World Wide Web Consortium">W3C</ABBR></A><SUP>&reg;</SUP> (<A href="http://www.lcs.mit.edu/"><ABBR title="Massachusetts Institute of Technology">MIT</ABBR></A>, <A href="http://www.inria.fr/"><ABBR lang=fr title="Institut National de Recherche en Informatique et Automatique">INRIA</ABBR></A>, <A href="http://www.keio.ac.jp/">Keio</A>), Все права защищены. В отношении данного документа действуют правила W3C, касающиеся <A href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">обязательств</A>, <A href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">торговой марки</A>, <A href="http://www.w3.org/Consortium/Legal/copyright-documents-19990405">использования документа</A> и <A href="http://www.w3.org/Consortium/Legal/copyright-software-19980720">лицензирования программного обеспечения</A>.</P>
<HR class=html_compat>
<DIV>
<H2><A name=abstract>Резюме</A></H2>
<P>Расширяемый язык разметки (The Extensible Markup Language, XML) - подмножество SGML, целиком описанное в представленном документе. Язык должен дать возможность передавать, получать и обрабатывать в Web общие документы SGML так же, как сейчас это можно делать с документами HTML. Язык XML спроектирован так, чтобы упростить реализацию и обеспечить взаимодействие SGML и HTML.</P>
</DIV>
<DIV>
<H2><A name=status>Статус этого документа</A></H2>
<P>Данный документ был рассмотрен членами W3C, другими заинтересованными сторонами и был утвержден Директором в качестве рекомендации от W3C. Документ является окончательным и его можно использовать как материал для ссылки или цитировать в других документах в качестве стандарта. Участие W3C в разработке этой спецификации заключается в привлечении к ней внимания и содействии ее широкому распространению. Принятие стандарта способствует наращиванию функциональных возможностей и повышению уровня взаимодействия в Сети.</P>
<P>В данном документе формулируется синтаксис, пригодный для использования в World Wide Web и построенный как подмножество уже имеющегося и широко используемого международного стандарта обработки текстов (Standard Generalized Markup Language,  SGML, ISO 8879:1986(E) улучшенного и исправленного). Данный документ является результатом работ по проекту W3C XML Activity, детальное описание которого можно найти по адресу <A href="http://www.w3.org/XML/">http://www.w3.org/XML/</A>. Нормативную силу имеет только английская версия спецификации, однако по адресу <A href="http://www.w3.org/XML/#trans">http://www.w3.org/XML/#trans</A> можно найти перевод этого документа на другие языки. На странице <A href="http://www.w3.org/TR/">http://www.w3.org/TR/</A> можно найти перечень текущих рекомендаций W3C и других технических документов.</P>
<P>Вторая редакция <EM>не</EM> является новой версией языка XML (первая была опубликована 10 февраля 1998 года). Она всего лишь учитывает изменения, продиктованные удобством читателей и выявленными ошибками (которые можно увидеть по адресу <A href="http://www.w3.org/XML/xml-19980210-errata">http://www.w3.org/XML/xml-19980210-errata</A>). Перечень ошибок, обнаруженных во второй версии спецификации, можно увидеть по адресу <A href="http://www.w3.org/XML/xml-V10-2e-errata">http://www.w3.org/XML/xml-V10-2e-errata</A>.</P>
<P>Об ошибках, обнаруженных в данном документе, просьба сообщать по адресу <A href="mailto:xml-editor@w3.org">xml-editor@w3.org</A>; Доступен <A href="http://lists.w3.org/Archives/Public/xml-editor">архив</A> переписки.</P>
<DIV class=note>
<P class=prefix><B>Замечание:</B></P>
<P>Со времени публикации первой редакции C. M. Sperberg-McQueen поменял место работы. Теперь он работает в World Wide Web Consortium и с ним можно связаться по адресу <A href="mailto:cmsmcq@w3.org">cmsmcq@w3.org</A>.</P></DIV></DIV>
<DIV class=toc>
<H2><A name=contents>Содержание</A></H2>
<P class=toc>
1 <A href="#sec-intro">Введение</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;1.1 <A href="#sec-origin-goals">Возникновение языка XML и его задачи</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;1.2 <A href="#sec-terminology">Терминология</A><BR class=html_compat>
2 <A href="#sec-documents">Документы</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;2.1 <A href="#sec-well-formed">Корректные XML документы</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;2.2 <A href="#charsets">Символы</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;2.3 <A href="#sec-common-syn">Общие синтаксические конструкции</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;2.4 <A href="#syntax">Символьные данные и разметка</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;2.5 <A href="#sec-comments">Комментарии</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;2.6 <A href="#sec-pi">Инструкции обработки</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;2.7 <A href="#sec-cdata-sect">Секции CDATA</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;2.8 <A href="#sec-prolog-dtd">Пролог и декларация типа документа</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;2.9 <A href="#sec-rmd">Декларация одиночного документа</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;2.10 <A href="#sec-white-space">Обработка пробельных символов</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;2.11 <A href="#sec-line-ends">Обработка концов строк</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;2.12 <A href="#sec-lang-tag">Идентификация языка</A><BR class=html_compat>
3 <A href="#sec-logical-struct">Логические структуры</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;3.1 <A href="#sec-starttags">Начальные тэги, конечные тэги и тэги пустых элементов</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;3.2 <A href="#elemdecls">Декларации типа элемента</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.2.1 <A href="#sec-element-content">Содержимое элемента</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.2.2 <A href="#sec-mixed-content">Смешанный контент</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;3.3 <A href="#attdecls">Декларации списков атрибутов</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.3.1 <A href="#sec-attribute-types">Типы атрибутов</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.3.2 <A href="#sec-attr-defaults">Значения атрибутов по умолчанию</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.3.3 <A href="#AVNormalize">Нормализация значения атрибута</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;3.4 <A href="#sec-condition-sect">Условные секции</A><BR class=html_compat>
4 <A href="#sec-physical-struct">Физические структуры</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;4.1 <A href="#sec-references">Ссылки на символ и сущность</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;4.2 <A href="#sec-entity-decl">Декларации сущности</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.2.1 <A href="#sec-internal-ent">Внутренние сущности</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.2.2 <A href="#sec-external-ent">Внешние сущности</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;4.3 <A href="#TextEntities">Разобранные сущности</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.3.1 <A href="#sec-TextDecl">Декларация текста</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.3.2 <A href="#wf-entities">Корректные разобранные сущности</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.3.3 <A href="#charencoding">Кодирование символов в сущностях</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;4.4 <A href="#entproc">Обработка XML процессором сущностей и ссылок</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.4.1 <A href="#not-recognized">Не распознается</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.4.2 <A href="#included">Включается</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.4.3 <A href="#include-if-valid">Включается при проверке</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.4.4 <A href="#forbidden">Запрещен</A><BR class=html_compat>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.4.5 <A href="#inliteral">Включается как строка</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.4.6 <A href="#notify">Уведомление</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.4.7 <A href="#bypass">Пропускается</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.4.8 <A href="#as-PE">Включается как сущность параметра</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;4.5 <A href="#intern-replacement">Построение текста замены для внутренней сущности</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;4.6 <A href="#sec-predefined-ent">Предопределенные сущности</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;4.7 <A href="#Notations">Декларирование нотаций</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;4.8 <A href="#sec-doc-entity">Сущность документа</A><BR class=html_compat>
5 <A href="#sec-conformance">Соответствие</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;5.1 <A href="#proc-types">Проверяющие и непроверяющие процессоры</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;5.2 <A href="#safe-behavior">Использование XML процессоров</A><BR class=html_compat>
6 <A href="#sec-notation">Нотация</A><BR class=html_compat>
</P>
<H3>Приложения</H3>
<P class=toc>
A <A href="#sec-bibliography">Ссылки</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;A.1 <A href="#sec-existing-stds">Нормативные ссылки</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;A.2 <A href="#null">Остальные ссылки</A><BR class=html_compat>
B <A href="#CharClasses">Классы символов</A><BR class=html_compat>
C <A href="#sec-xml-and-sgml">XML и SGML</A> (Пояснения к спецификации)<BR class=html_compat>
D <A href="#sec-entexpand">Обработка ссылок на сущность и символ </A> (Пояснения к спецификации)<BR class=html_compat>
E <A href="#determinism">Детерминистические модели содержания</A> (Пояснения к спецификации)<BR class=html_compat>
F <A href="#sec-guessing">Автоматическое определение кодировки символов</A> (Пояснения к спецификации)<BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;F.1 <A href="#sec-guessing-no-ext-info">Определение без внешней информации о кодировке</A><BR class=html_compat>
&nbsp;&nbsp;&nbsp;&nbsp;F.2 <A href="#sec-guessing-with-ext-info">Приоритеты при наличии внешней информации о кодировке</A><BR class=html_compat>
G <A 
href="#sec-xml-wg">Рабочая группа W3C XML</A> (Пояснения к спецификации)<BR class=html_compat>
H <A href="#sec-core-wg">Основная группа W3C XML</A> (Пояснения к спецификации)<BR class=html_compat>
I <A href="#b4d250b6c21">Рабочие заметки</A> (Пояснения к спецификации)<BR class=html_compat>
<table width="100%" cellpadding="0"><tr><td bgcolor="#E8E8E8">J <A href="#dictionary">Словарь</A> (Пояснения к спецификации)
</td></tr></table>
<BR class=html_compat>
</P></DIV>
<HR class=html_compat>
<DIV class=body>
<DIV class=div1>
<H2><A name=sec-intro></A>1 Введение</H2>
<P>Расширяемый язык разметки (Extensible Markup Language, аббревиатура - XML) описывает класс объектов <A href="#dt-xml-doc" title="XML Document">XML document</A>, а также частично описывает работу компьютерных программ, обрабатывающих объекты с данными, реализующими этот класс. XML - это прикладной уровень или усеченная форма SGML, Стандартного Обобщенного языка разметки <A href="#ISO8879">[ISO 8879]</A>. По своему построению, XML документ является полноценным SGML документом.</P>
<P>XML документы состоят из единиц размещения, называемых <A href="#dt-entity" title=Entity>сущностями</A>, которые содержат разобранные или неразобранные данные. Разобранные данные состоят из набора <A href="#dt-character" title=Character>символов</A>, часть которых образуют <A href="#dt-chardata" title="Character Data">символьные данные</A>, часть - <A href="#dt-markup" title=Markup>разметку</A>. Разметка образует описание схемы размещения и логической структуры документа. Язык XML дает механизм создания ограничений для указанной схемы размещения и логической структуры.</P>
<P>[<A name=dt-xml-proc title="XML Processor">Определение</A>: Для чтения XML документа, доступа к его содержимому и структуре используется программный модуль, называемый <B>XML процессором</B>.] [<A name=dt-app title=Application>Определение</A>: Предполагается, что XML процессор выполняет свою работу по заданию другого модуля, называемого <B>приложением</B>.] Данная спецификация формулирует  требования к работе XML процессора, указывая как именно он должен читать данные XML и какую информацию в результате он должен предоставить приложению.</P>
<DIV class=div2>
<H3><A name=sec-origin-goals></A>1.1 Возникновение языка XML и его задачи</H3>
<P>Язык XML был разработан группой XML Working Group (первоначально называемой SGML Editorial Review Board), сформированной в 1996 году под патронажем World Wide Web Consortium (W3C). Председательствует в группе Jon Bosak  из Sun Microsystems, принимающий также активное участие в работе группы XML Special Interest Group (ранее известной как SGML Working Group), которая тоже была сформирована W3C. Список членов XML Working Group представлен в Приложении. Связь группы с W3C обеспечивает Dan Connolly.</P>
<P>При разработке языка XML ставились следующие задачи:</P>
<OL>
<LI><P>XML должен быть пригоден для непосредственного использования в Интернет.</P>
<LI><P>XML должен иметь широкий круг применения.</P>
<LI><P>XML должен быть совместим с SGML.</P>
<LI><P>Обработчики документов XML должны быть просты в написании.</P>
<LI><P>Количество факультативных свойств в XML должно быть сведено к абсолютному минимуму, в идеале число их вообще должно быть нулевым.</P>
<LI><P>XML документы должны быть удобны для чтения и достаточно понятны.</P>
<LI><P>Подготовка XML документа должна осуществляться быстро.</P>
<LI><P>Процедура построения XML документа должна быть формальной и точной.</P>
<LI><P>Процедура создания XML документов должна быть проста.</P>
<LI><P>Краткость при разметке XML документа имеет минимальное значение.</P></LI></OL>
<P>Данная спецификация в сочетании с остальными связанными с нею стандартами (Unicode и ISO/IEC 10646 для символов, Internet RFC 1766 для тэгов идентификации языка, ISO 639 для кодов с названием языка и ISO 3166 для кодов с названием страны) дает всю необходимую информацию для понимания языка XML (версия 1.0) и создания компьютерных программ для его обработки.</P>
<P>Данная версия спецификации XML может распространяться свободно при условии, что весь текст и замечания правового характера остаются нетронутыми.</P></DIV>
<DIV class=div2>
<H3><A name=sec-terminology></A>1.2 Терминология</H3>
<P>Терминология, используемая для описания XML документов, также дается в данной спецификации. При построении определений и описании функций XML процессора используются термины из следующего перечня:</P>
<DL>
<DT class=label>может (may)<DD><P>[<A name=dt-may title=May>Определение</A>: Документы и XML процессоры, отвечающие этому условию, могут, но не обязаны действовать именно так, как было описано.]</P>
<DT class=label>должен (must)<DD><P>[<A name=dt-must title=Must>Определение</A>: Документы и XML процессоры обязаны действовать именно так, как было описано. В противном случае имеет место ошибка.]</P>
<DT class=label>ошибка (error)<DD><P>[<A name=dt-error title=Error>Определение</A>: Отступление от правил данной спецификации, результат не определен. Программное обеспечение, отвечающее требованиям спецификации, может обнаруживать такую ошибку, сообщать о ней и обрабатывать ее.]</P>
<DT class=label>фатальная ошибка (fatal error)<DD><P>[<A name=dt-fatal title="Fatal Error">Определение</A>: Ошибка, которую <A href="#dt-xml-proc" title="XML Processor">XML процессор</A>, отвечающий требованиям спецификации, должен зафиксировать и сообщить об этом приложению. После обнаружения фатальной ошибки процессор может продолжить обработку данных с тем, чтобы найти остальные ошибки и, возможно, сообщить о них приложению. Помогая обрабатывать ошибки, процессор может предоставить приложению доступ к необработанным материалам исходного документа (символьным данным и разметке). После обнаружения фатальной ошибки процессор должен приостановить нормальную обработку данных (то есть, он должен прекратить передачу приложению символьных данных и сведений о логической структуре документа обычным образом).]</P>
<DT class=label>по выбору пользователя (at user option)<DD><P>[<A name=dt-atuseroption title="At user option">Определение</A>: Программное обеспечение, отвечающее требованиям спецификации, может или должно (в зависимости от степени долженствования в предложении) поступать так, как было указано в спецификации. Если это сделано, пользователю должна быть предоставлена возможность разрешать или запрещать описанные действия.]</P>
<DT class=label>ограничение действительности (validity constraint, VC) <DD><P>[<A name=dt-vc title="Validity constraint">Определение</A>: Правило, относящееся ко всем <A href="#dt-valid" title=Validity>действительным</A> XML документам. Нарушение ограничения корректности классифицируется как ошибка, о которой (по выбору пользователя) должны сообщать <A href="#dt-validating" title="Validating Processor">проверяющие XML процессоры</A>.]</P>
<DT class=label>ограничение корректности (well-formedness constraint, WFC)<DD><P>[<A name=dt-wfc title="Well-formedness constraint">Определение</A>: Правило, относящееся ко всем <A href="#dt-wellformed" title=Well-Formed>корректным</A> XML документам. Нарушение ограничения корректности классифицируется как <A href="#dt-fatal" title="Fatal Error">фатальная ошибка</A>.]</P>
<DT class=label>соответствие (match)<DD><P>[<A name=dt-match title=match>Определение</A>: (Для строк или имен:) Две сравниваемые строки или имени должны быть идентичны. Символы с несколькими возможными представлениями в ISO/IEC 10646 (например, символы, имеющие обе формы представления precomposed и base+diacritic) считаются совпадающими только тогда, когда в обеих строках они имеют одну и ту же форму представления. Преобразование регистра не производится. (Для строк и правил грамматики:) Строка отвечает сценарию грамматики если она принадлежит языку, генерируемому по этому сценарию. (Для содержимого и моделей содержимого:) Элемент соответствует своей декларации если он отвечает положениям, описанным в соответствующем ограничении <A href="#elementvalid"><B>[VC: Действительный элемент]</B></A>.]</P>
<DT class=label>для совместимости (for compatibility)<DD><P>[<A name=dt-compat title="For Compatibility">Определение</A>: Выделяет фразу, описывающую функцию языка XML, которая была включена в спецификацию исключительно для того, чтобы убедиться в том, что XML сохраняет совместимость с языком SGML.]</P>
<DT class=label>для взаимодействия (for interoperability)<DD><P>[<A name=dt-interop title="For interoperability">Определение</A>: Выделяет фразу, описывающую необязательную рекомендацию, которая была включена в спецификацию для увеличения возможности обработки XML документов с помощью уже установленных SGML процессоров, указанных в Приложении WebSGML Adaptations к ISO 8879.]</P></DD></DL>
<P></P></DIV></DIV>
<DIV class=div1>
<H2><A name=sec-documents></A>2 Документы</H2>
<P>[<A name=dt-xml-doc title="XML Document">Определение</A>: Объект данных становится <B>XML документом</B> если, в соответствии с определениями обсуждаемой спецификации, он является <A href="#dt-wellformed" title=Well-Formed>корректным</A>. Корректный XML документ также может стать <A href="#dt-valid" title=Validity>действительным</A>, если отвечает некоторым дополнительным ограничениям.]</P>
<P>Каждый XML имеет логическую и физическую структуру. Физически документ состоит из элементов, называемых <A href="#dt-entity" title=Entity>сущностями</A>. Любая сущность может <A href="#dt-entref" title="Entity Reference">ссылаться</A> на другие сущности, обеспечивая их включение в данный документ. Документ начинается с "корня" или <A href="#dt-docent" title="Document Entity">сущности документа</A>. С логической точки зрения, документ строится из деклараций, элементов, комментариев, ссылок на символ и инструкций обработки. Все они размечаются в документе явным образом. Логические и физические структуры должны иметь корректную вложенность, как было описано в главе <A href="#wf-entities"><B>4.3.2 Корректные разобранные сущности</B></A>.</P>
<DIV class=div2>
<H3><A name=sec-well-formed></A>2.1 Корректные XML документы</H3>
<P>[<A name=dt-wellformed title=Well-Formed>Определение</A>: Текстовый объект становится <B>корректным</B> (well-formed) XML документом, если:]</P>
<OL>
<LI><P>как единое целое, он соответствует сценарию <A href="#NT-document">document</A>.</P>
<LI><P>отвечает всем ограничениям корректности, представленным в этой спецификации.</P>
<LI><P>Все <A href="#dt-parsedent" title="Text Entity">разобранные сущности</A>, на которые в данном документе прямо или косвенно делается ссылка, являются <A href="#dt-wellformed" title=Well-Formed>корректными</A> (well-formed).</P></LI></OL>
<H5>Документ</H5>
<TABLE class=scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A name=NT-document></A>[1]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>document</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE><A href="#NT-prolog">prolog</A> <A 
      href="#NT-element">element</A> <A 
      href="#NT-Misc">Misc</A>*</CODE></TD></TR></TBODY></TABLE>
<P>Соответствие сценарию <A href="#NT-document">document</A> подразумевает следующее:</P>
<OL>
<LI><P>В данном объекте содержится один или несколько <A href="#dt-element" title=Element>элементов</A>.</P>
<LI><P>[<A name=dt-root title="Root Element">Определение</A>: В объекте имеется в точности один элемент, называемый <B>корневым</B> или элементом документа, ни одна из частей которого не попадает в <A href="#dt-content" title=Content>содержимое</A> какого-либо еще элемента.] Для всех остальных элементов действует правило, что если <A href="#dt-stag" title=Start-Tag>начальный тэг</A> находится в содержимом некого элемента, то и <A href="#dt-etag" title="End Tag">конечный тэг</A> должен находиться среди содержимого того же элемента. Проще говоря, элементы, маркируемые начальными и конечными тэгами, должны быть вложены друг в друга правильным образом.</P></LI></OL>
<P>[<A name=dt-parentchild title=Parent/Child>Определение</A>: Из вышесказанного следует что в документе для любого некорневого элемента <CODE>C</CODE> имеется другой элемент <CODE>P</CODE> из этого же документа, такой что <CODE>C</CODE> находится в содержимом <CODE>P</CODE>, но при этом не попадает в содержимое какого-либо третьего элемента, также находящегося в содержимом элемента <CODE>P</CODE>. В таком случае об элементе <CODE>P</CODE> говорят как о <B>родителе</B> элемента <CODE>C</CODE>, а элемент <CODE>C</CODE> называют <B>непосредственным потомком</B> элемента <CODE>P</CODE>.]</P></DIV>
<DIV class=div2>
<H3><A name=charsets></A>2.2 Символы</H3>
<P>[<A name=dt-text title=Text>Определение</A>: Разобранная сущность (parsed entity) содержит <B>текст</B> - последовательности <A href="#dt-character" title=Character>символов</A>, образующие разметку и символьные данные.] [<A name=dt-character title=Character>Определение</A>: <B>символ</B> - это элементарная единица текста, описанная в ISO/IEC 10646 <A href="#ISO10646">[ISO/IEC 10646]</A> (см. также <A href="#ISO10646-2000">[ISO/IEC 10646-2000]</A>). Допустимы символы табуляции, возврата каретки, конца строки, а также разрешенные символы из наборов Unicode и ISO/IEC 10646. Последние версии указанных стандартов, актуальные на момент подготовки данного документа, перечислены в Приложении <A href="#sec-existing-stds"><B>A.1 Нормативные ссылки</B></A>. Перечисленные стандарты могут быть дополнены новыми символами в ходе обновления или при написании для них новых редакций. Соответственно, XML процессоры должны принимать любой символ из диапазона, указанного для <A href="#NT-Char">Char</A>. Использовать "символы совместимости", описанные в главе 6.8 из <A href="#Unicode">[Unicode]</A> (см. также D21 в главе 3.6 из <A href="#Unicode3">[Unicode3]</A>), нежелательно.]</P>
<H5>Диапазон символов</H5>
<TABLE class=scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A name=NT-Char></A>[2]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>Char</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>#x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | 
      [#x10000-#x10FFFF]</CODE></TD>
    <TD><I>/* любой символ Unicode, исключая суррогатные блоки, FFFE и FFFF. */</I></TD></TR></TBODY></TABLE>
<P>Механизм шифрования символьных кодов использует битовые шаблоны, которые могут меняться от сущности к  сущности. Все XML процессоры должны иметь возможность работать с кодировками UTF-8 и UTF-16 из набора 10646. Механизм для указания используемой кодировки и подключения новых кодировок обсуждается позднее в главе <A href="#charencoding"><B>4.3.3 Кодирование символов в сущностях</B></A>.</P></DIV>
<DIV class=div2>
<H3><A name=sec-common-syn></A>2.3 Общие синтаксические конструкции</H3>
<P>В данной главе определяются некоторые символы, широко используемые в грамматике XML.</P>
<P><A href="#NT-S">S</A> (пробельный символ, white space) состоит из одного или нескольких символов пробела (#x20), возврата каретки, конца строки или табулятора.</P>
<H5>Пробельный символ</H5>
<TABLE class=scrap>
  <TBODY>
  <TR vAlign=baseline>
    <TD><A name=NT-S></A>[3]&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>S</CODE></TD>
    <TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
    <TD><CODE>(#x20 | #x9 | #xD | #xA)+</CODE></TD></TR></TBODY></TABLE>
<P>Для удобства символы делятся на буквы, цифры и остальные символы. Буквы состоят из алфавитных, слоговых и идеографических символов. Полное определение конкретных символов из каждого класса дается в Приложении <A href="#CharClasses"><B>B Классы символов</B></A>.</P>
<P>[<A name=dt-name title=Name>Определение</A>: <B>Имя</B> (name) - это лексема (token), начинающаяся с буквы, либо одного из нескольких символов пунктуации, за которыми следуют буквы, цифры, дефисы, символы подчеркивания, двоеточия или точки (все они называются name character - символами имени).] Имена, начинающиеся с комбинации "<CODE>xml</CODE>" или какой-либо из строк, соответствующих шаблону <CODE>(('X'|'x') ('M'|'m') ('L'|'l'))</CODE>, зарезервированы под стандартизацию в этой спецификации и ее последующих версиях.</P>
<DIV class=note>
<P class=prefix><B>Замечание:</B></P>
<P>Интерпретация имен, содержащих символ двоеточия, задается в документе Namespaces in XML Recommendation <A href="#xml-names">[XML Names]</A>. Поэтому авторам не следует использовать символ двоеточия в именах XML, если это не связано с обращением к пространству имен. Вместе с тем, сами XML процессоры должны воспринимать двоеточие в имени как обычный символ.</P></DIV>
<P><A href="#NT-Nmtoken">Nmtoken</A> (лексема имени) - это произвольное сочетание символов имени.</P>
<H5>Имена и лексемы</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-NameChar></A>[4]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>NameChar</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-Letter">Letter</A> | <A href="#NT-Digit">Digit</A> | '.' | '-' | '_' | ':' | <A href="#NT-CombiningChar">CombiningChar</A> | <A href="#NT-Extender">Extender</A></CODE></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-Name></A>[5]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>Name</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>(<A href="#NT-Letter">Letter</A> | '_' | ':') (<A href="#NT-NameChar">NameChar</A>)*</CODE></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-Names></A>[6]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>Names</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-Name">Name</A> (<A href="#NT-S">S</A> <A href="#NT-Name">Name</A>)*</CODE></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-Nmtoken></A>[7]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>Nmtoken</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>(<A href="#NT-NameChar">NameChar</A>)+</CODE></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-Nmtokens></A>[8]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>Nmtokens</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-Nmtoken">Nmtoken</A> (<A href="#NT-S">S</A> <A href="#NT-Nmtoken">Nmtoken</A>)*</CODE></TD></TR></TBODY></TABLE>
<P>Строковые данные (literal data) - это любая заключенная в кавычки строка, внутри которой нет кавычек, которые можно было бы принять за разделители этой строки. Строковые данные, или литералы (literals), применяются для указания содержимого внутренних сущностей (<A href="#NT-EntityValue">EntityValue</A>), значений атрибутов (<A href="#NT-AttValue">AttValue</A>) и внешних идентификаторов (<A href="#NT-SystemLiteral">SystemLiteral</A>). Заметим, что идентификатор <A href="#NT-SystemLiteral">SystemLiteral</A> может быть обработан без проверки разметки.</P>
<H5>Литералы</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-EntityValue></A>[9]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>EntityValue</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'"' ([^%&amp;"] | <A href="#NT-PEReference">PEReference</A> | <A href="#NT-Reference">Reference</A>)* '"' </CODE></TD></TR>
<TR vAlign=baseline>

<TD></TD>
<TD></TD>
<TD></TD>
<TD><CODE>|&nbsp; "'" ([^%&amp;'] | <A href="#NT-PEReference">PEReference</A> | <A href="#NT-Reference">Reference</A>)* "'"</CODE></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-AttValue></A>[10]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>AttValue</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'"' ([^&lt;&amp;"] | <A href="#NT-Reference">Reference</A>)* '"' </CODE></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><CODE>|&nbsp; "'" ([^&lt;&amp;'] | <A href="#NT-Reference">Reference</A>)* "'"</CODE></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-SystemLiteral></A>[11]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>SystemLiteral</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>('"' [^"]* '"') |&nbsp;("'" [^']* "'") </CODE></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-PubidLiteral></A>[12]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>PubidLiteral</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'"' <A href="#NT-PubidChar">PubidChar</A>* '"' | "'" (<A href="#NT-PubidChar">PubidChar</A> - "'")* "'"</CODE></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-PubidChar></A>[13]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>PubidChar</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>#x20 | #xD | #xA |&nbsp;[a-zA-Z0-9] |&nbsp;[-'()+,./:=?;!*#@$_%]</CODE></TD></TR></TBODY></TABLE>
<DIV class=note>
<P class=prefix><B>Замечание:</B></P>
<P>Хотя сценарий <A href="#NT-EntityValue">EntityValue</A> и позволяет определить сущность, состоящую из одного единственного простого символа <CODE>&lt;</CODE> в строке данных (имеется ввиду <CODE>&lt;!ENTITY mylt "&lt;"&gt;</CODE>), настоятельно рекомендуется избегать подобной практики, поскольку любая ссылка на указанную сущность приведет к появлению ошибки корректности.</P></DIV></DIV>
<DIV class=div2>
<H3><A name=syntax></A>2.4 Символьные данные и разметка</H3>
<P><A href="#dt-text" title=Text>Текст</A> документа образуется сочетанием <A href="#dt-chardata" title="Character Data">символьных данных</A> и разметки. [<A name=dt-markup title=Markup>Определение</A>: <B>Разметка</B> принимает форму <A href="#dt-stag" title=Start-Tag>начальных тэгов</A>, <A href="#dt-etag" title="End Tag">конечных тэгов</A>, <A href="#dt-empty" title=Empty>тэгов пустых элементов</A>, <A href="#dt-entref" title="Entity Reference">ссылок на сущности</A>, <A href="#dt-charref" title="Character Reference">ссылок на символы</A>, <A href="#dt-comment" title=Comment>комментариев</A>, разделителей <A href="#dt-cdsection" title="CDATA Section">секций CDATA</A>, <A href="#dt-doctype" title="Document Type Declaration">объявлений типов документов</A>, <A href="#dt-pi" title="Processing instruction">инструкций обработки</A>, <A href="#NT-XMLDecl">деклараций XML</A>, <A href="#NT-TextDecl">деклараций текста</A> и любых пробельных символов, которые располагаются на верхнем уровне сущности документа (то есть, вне элемента document и за пределами иных элементов разметки).]</P>
<P>[<A name=dt-chardata title="Character Data">Определение</A>: Текст, который не относится к разметке, формирует <B>символьные данные</B> документа (character data).]</P>
<P>Символ амперсанта (&amp;) и левая угловая скобка (&lt;) могут появиться в своем обычном текстовом виде <EM>только</EM> в том случае, если используются в качестве ограничителя разметки, либо находятся в пределах <A href="#dt-comment" title=Comment>комментария</A>, <A href="#dt-pi" title="Processing instruction">инструкции обработки</A> или <A href="#dt-cdsection" title="CDATA Section">секции CDATA</A>. Если же эти символы потребовались в документе где-либо еще, их следует <A href="#dt-escape" title=escape>маскировать</A>, воспользовавшись для этого либо соответствующей <A href="#dt-charref" title="Character Reference">числовой ссылкой на символ</A> (numeric character reference), либо строками "<CODE>&amp;amp;</CODE>" и "<CODE>&amp;lt;</CODE>" соответственно. Правая угловая скобка (&gt;) может быть представлена в виде строки "<CODE>&amp;gt;</CODE>". Кроме того, если правая угловая скобка в содержимом элемента попадает в комбинацию символов "<CODE>]]&gt;</CODE>", которая не соответствует окончанию <A href="#dt-cdsection" title="CDATA Section">секции CDATA</A>, то, <A href="#dt-compat" title="For Compatibility">в целях совместимости</A>, эту скобку необходимо заменить ссылкой на символ либо комбинацией "<CODE>&amp;gt;</CODE>".</P>
<P>Символьные данные в содержимом элемента - это любая строка символов, которая не содержит начальных ограничителей какой-либо разметки. Символьные данные в секции CDATA - это любая строка символов, которая не содержит закрывающего ограничителя секции CDATA (комбинации символов "<CODE>]]&gt;</CODE>").</P>
<P>Если в значение атрибута необходимо поместить символ одинарной или двойной кавычки, то апостроф или символ одинарной кавычки (') следует представить комбинацией "<CODE>&amp;apos;</CODE>", а символ двойной кавычки (") - как "<CODE>&amp;quot;</CODE>".</P>
<H5>Символьные данные</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-CharData></A>[14]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>CharData</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>[^&lt;&amp;]* - ([^&lt;&amp;]* ']]&gt;' [^&lt;&amp;]*)</CODE></TD></TR></TBODY></TABLE></DIV>

<DIV class=div2>
<H3><A name=sec-comments></A>2.5 Комментарии</H3>
<P>[
<A name=dt-comment title=Comment>Определение</A>: 
<B>Комментарий</B> может размещаться в любом месте документа при условии, что он не попадает в границы какого-либо элемента <A href="#dt-markup" title=Markup>разметки</A>. Комментаций может также появляться в тех местах декларации типа документа, где это разрешено грамматикой. Комментарии не относятся к <A href="#dt-chardata" title="Character Data">символьным данным</A> документа, однако XML процессоры могут (но не обязаны) передавать приложению текст полученных комментариев. Для сохранения <A href="#dt-compat" title="For Compatibility">совместимости</A>, в комментарии не следует пользоваться комбинацей символов "<CODE>--</CODE>" (двойной дефис).] Ссылка на сущность параметра в комментариях не распознается.</P>
<H5>Комментарии</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-Comment></A>[15]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>Comment</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&lt;!--' ((<A href="#NT-Char">Char</A> - '-') | ('-' (<A href="#NT-Char">Char</A> - '-')))* '--&gt;'</CODE></TD></TR></TBODY></TABLE>
<P>Пример комментария:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;!-- declarations for &lt;head&gt; &amp; &lt;body&gt; --&gt;</PRE></TD></TR></TBODY></TABLE>
<P>Заметим, что, согласно требованиям обсуждаемой грамматики, комментарий не может завершаться комбинацией символов <CODE>---&gt;</CODE>. Поэтому следующий пример корректным уже <EM>не</EM> будет.</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;!-- B+, B, or B---&gt;</PRE></TD></TR></TBODY></TABLE></DIV>
<DIV class=div2>
<H3><A name=sec-pi></A>2.6 Инструкции обработки</H3>
<P>[<A name=dt-pi title="Processing instruction">Определение</A>: <B>Инструкции обработки</B> (processing instruction, PI) позволяют размещать в документе инструкции для приложений.]</P>
<H5>Инструкции обработки</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-PI></A>[16]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>PI</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&lt;?' <A href="#NT-PITarget">PITarget</A> (<A href="#NT-S">S</A> (<A href="#NT-Char">Char</A>* - (<A href="#NT-Char">Char</A>* '?&gt;' <A href="#NT-Char">Char</A>*)))? '?&gt;'</CODE></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-PITarget></A>[17]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>PITarget</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-Name">Name</A> - (('X' | 'x') ('M' | 'm') ('L' | 'l'))</CODE></TD></TR></TBODY></TABLE>
<P>Хотя PI не относятся к <A href="#dt-chardata" title="Character Data">символьным данным</A> документа, они точно так же должны быть переданы приложению. Инструкция PI начинается с указания адреса (<A href="#NT-PITarget">PITarget</A>), используемого для идентификации приложения, которому предназначается эта инструкция. Адреса с названиями "<CODE>XML</CODE>", "<CODE>xml</CODE>" и аналогичными зарезервированы для стандартизации в текущей и последующих версиях спецификации. Для формального декларирования адресата инструкции PI может использоваться механизм <A href="#dt-notation" title=Notation>нотаций</A> XML. Ссылки на сущность параметра в инструкциях обработки не распознаются.</P></DIV>
<DIV class=div2>
<H3><A name=sec-cdata-sect></A>2.7 Секции CDATA</H3>
<P>[<A name=dt-cdsection title="CDATA Section">Определение</A>: 
<B>Секция CDATA</B> может находиться повсюду, где могут размещаться символьные данные. Использование секции CDATA позволяет избежать обработки блока текста, содержащего символы, которые в других случаях распознавались бы как разметка. Секция CDATA начинается со строки "<CODE>&lt;![CDATA[</CODE>" и заканчивается строкой "<CODE>]]&gt;</CODE>":]</P>
<H5>Секции CDATA</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-CDSect></A>[18]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>CDSect</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-CDStart">CDStart</A> <A href="#NT-CData">CData</A> <A href="#NT-CDEnd">CDEnd</A></CODE></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-CDStart></A>[19]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>CDStart</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&lt;![CDATA['</CODE></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-CData></A>[20]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>CData</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>(<A href="#NT-Char">Char</A>* - (<A href="#NT-Char">Char</A>* ']]&gt;' <A href="#NT-Char">Char</A>*)) </CODE></TD></TR></TBODY>

<TBODY>

<TR vAlign=baseline>
<TD><A name=NT-CDEnd></A>[21]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>CDEnd</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>']]&gt;'</CODE></TD></TR></TBODY></TABLE>
<P>В секции CDATA распознается только один элемент разметки - строка <A href="#NT-CDEnd">CDEnd</A>. Поэтому все символы левой угловой скобки и амперсанта могут предстать здесь в своем обычном текстовом виде. Эти символы не нужно (да и невозможно) маскировать с помощью комбинаций "<CODE>&amp;lt;</CODE>" и "<CODE>&amp;amp;</CODE>". Секции CDATA не могут быть вложенными.</P>
<P>Пример секции CDATA, в которой строки "<CODE>&lt;greeting&gt;</CODE>" и "<CODE>&lt;/greeting&gt;</CODE>" будут распознаваться не как <A href="#dt-markup" title=Markup>разметка</A>, а как обычные <A href="#dt-chardata" title="Character Data">символьные данные</A>:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;![CDATA[&lt;greeting&gt;Hello, world!&lt;/greeting&gt;]]&gt; </PRE></TD></TR></TBODY></TABLE></DIV>
<DIV class=div2>

<H3><A name=sec-prolog-dtd></A>2.8 Пролог и декларация типа документа</H3>
<P>[<A name=dt-xmldecl title="XML Declaration">Определение</A>: Документ XML должен начинаться с <B>декларации XML</B>, указывающей версию используемого языка XML.] Например, в следующем примере представлен полноценный XML документ, <A href="#dt-wellformed" title=Well-Formed>корректный</A>, но <A href="#dt-valid" title=Validity>недействительный</A>:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%"><TBODY><TR>

<TD><PRE>&lt;?xml version="1.0"?&gt; &lt;greeting&gt;Hello, world!&lt;/greeting&gt; </PRE></TD></TR></TBODY></TABLE>
<P>таким образом, имеем:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%"><TBODY><TR>
<TD><PRE>&lt;greeting&gt;Hello, world!&lt;/greeting&gt;</PRE></TD></TR></TBODY></TABLE>
<P>Для обозначения совместимости с данной версией спецификации, необходимо указывать номер версии "<CODE>1.0</CODE>". Если в документе используется значение "<CODE>1.0</CODE>", но он не отвечает требованиям данной версии спецификации, это будет ошибкой. Выбор номера для тех версий спецификации XML, которые последуют за "<CODE>1.0</CODE>", остается за рабочей группой по XML, однако это не подразумевает что она обязуется разработать новые версии языка XML или придерживаться какой-либо конкретной схемы при их нумерации, если таковые будут созданы. Поскольку появление новых версий не исключается, то принятие упомянутой схемы нумерации позволило бы реализовать автоматическое распознавание версии, которое должно стать необходимым. Если получен документ с меткой о версии, которую процессор не в состоянии поддерживать, последний может сигнализировать об ошибке.</P>
<P>Задачей разметки XML документа должно быть описание схемы его размещения и логической структуры, а также связывание пар атрибут-значение с их логической структурой. XML предоставляет механизм для определения логических ограничений для логической структуры и формирования предопределенных единиц размещения - <A href="#dt-doctype" title="Document Type Declaration">декларацию типа документа</A>. [<A name=dt-valid title=Validity>Определение</A>: XML документ является <B>действительным</B>, если с ним связана декларация типа документа и если этот документ отвечает представленным в ней ограничениям.]</P>
<P>Декларация типа должна располагаться в документе до первого <A href="#dt-element" title=Element>элемента</A>.</P>
<H5>Пролог</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-prolog></A>[22]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>prolog</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-XMLDecl">XMLDecl</A>? <A href="#NT-Misc">Misc</A>* (<A href="#NT-doctypedecl">doctypedecl</A> <A href="#NT-Misc">Misc</A>*)?</CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-XMLDecl></A>[23]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>XMLDecl</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&lt;?xml' <A href="#NT-VersionInfo">VersionInfo</A> <A href="#NT-EncodingDecl">EncodingDecl</A>? <A href="#NT-SDDecl">SDDecl</A>? <A href="#NT-S">S</A>? '?&gt;'</CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-VersionInfo></A>[24]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>VersionInfo</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-S">S</A> 'version' <A href="#NT-Eq">Eq</A> ("'" <A href="#NT-VersionNum">VersionNum</A> "'" | '"' <A href="#NT-VersionNum">VersionNum</A> '"')<I>/* */</I></CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-Eq></A>[25]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>Eq</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-S">S</A>? '=' <A href="#NT-S">S</A>?</CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-VersionNum></A>[26]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>VersionNum</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>([a-zA-Z0-9_.:] | '-')+</CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-Misc></A>[27]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>Misc</CODE></TD>

<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-Comment">Comment</A> | <A href="#NT-PI">PI</A> | <A href="#NT-S">S</A></CODE></TD></TR></TBODY></TABLE>
<P>[<A name=dt-doctype title="Document Type Declaration">Определение</A>: В языке XML <B>декларация типа документа</B> либо сама содержит, либо ссылается на <A href="#dt-markupdecl" title="markup declaration">декларации разметки</A>, которые определяют грамматику некого класса документов. Такую грамматику называют декларацией типа документа, или <B>DTD</B> (document type definition). Декларация типа документа может ссылаться на внешний набор, который также содержит декларацию разметки (специальный тип - <A href="#dt-extent" title="External Entity">внешняя сущность</A>), может содержать свой внутренний набор деклараций разметки, а может сочетать оба варианта. DTD документа формируется из обоих этих наборов, обрабатываемых совместно.]</P>
<P>[<A name=dt-markupdecl title="markup declaration">Определение</A>: <B>Декларация разметки</B> - это <A href="#dt-eldecl" title="Element Type declaration">декларация типа документа</A>, <A href="#dt-attdecl" title="Attribute-List Declaration">декларация списка атрибутов</A>, <A href="#dt-entdecl" title="entity declaration">декларация сущности</A> или <A href="#dt-notdecl" title="Notation Declaration">декларация нотации</A>.] Перечисленные декларации могут целиком, либо частично располагаться в <A href="#dt-PE" title="Parameter entity">сущности параметра</A> в соответствии с приводимыми далее ограничениями корректности и действительности. Дальнейшие подробности см. в главе <A href="#sec-physical-struct"><B>4 Физические структуры</B></A>.</P>
<H5>Декларация типа документа</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-doctypedecl></A>[28]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>doctypedecl</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&lt;!DOCTYPE' <A href="#NT-S">S</A> <A href="#NT-Name">Name</A> (<A href="#NT-S">S</A> <A href="#NT-ExternalID">ExternalID</A>)? <A href="#NT-S">S</A>? ('[' (<A href="#NT-markupdecl">markupdecl</A> | <A href="#NT-DeclSep">DeclSep</A>)* ']' <A href="#NT-S">S</A>?)? '&gt;'</CODE></TD>
<TD><A href="#vc-roottype">[VC: Тип корневого элемента]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#ExtSubset">[WFC: Внешний набор]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><I>/* */</I></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-DeclSep></A>[28a]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>DeclSep</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-PEReference">PEReference</A> | <A href="#NT-S">S</A></CODE></TD>
<TD><A href="#PE-between-Decls">[WFC: Сущность параметра между декларациями]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><I>/* */</I></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-markupdecl></A>[29]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>markupdecl</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-elementdecl">elementdecl</A> | <A href="#NT-AttlistDecl">AttlistDecl</A> | <A href="#NT-EntityDecl">EntityDecl</A> | <A href="#NT-NotationDecl">NotationDecl</A> | <A href="#NT-PI">PI</A> | <A href="#NT-Comment">Comment</A> </CODE></TD>
<TD><A href="#vc-PEinMarkupDecl">[VC: Правильная декларация/вложенность сущности параметра]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#wfc-PEinInternalSubset">[WFC: Сущности параметров во внутреннем наборе]</A></TD></TR></TBODY></TABLE>
<P>Отметим, что можно создать корректный документ, который включал бы <A href="#NT-doctypedecl">doctypedecl</A>, не ссылающийся на внешний набор деклараций и не содержащий своего внутреннего набора.</P> 
<P>Декларации разметки могут полностью или частично состоять из <A href="#dt-repltext" title="Replacement Text">текста замены</A> для <A href="#dt-PE" title="Parameter entity">сущностей параметров</A>. Сценарии, приводимые далее в спецификации для конкретных неграничных элементов (<A href="#NT-elementdecl">elementdecl</A>, <A href="#NT-AttlistDecl">AttlistDecl</A> и так далее), описывают декларации уже <EM>после</EM> <A href="#dt-include" title=Include>подстановки</A> всех сущностей параметров.</P>
<P>Ссылка на сущность параметра распознается в любом месте DTD (внутреннем и внешнем наборах, внешних сущностях параметров) за исключением текстовых данных, инструкций обработки, комментариев и содержимого игнорируемых условных секций (см. главу <A href="#sec-condition-sect"><B>3.4 Условные секции</B></A>). Распознается она также и в тексте значения сущности. Использование сущностей параметров во внутреннем наборе деклараций подчиняется следующим ограничениям:</P>
<DIV class=constraint>
<P class=prefix><A name=vc-roottype></A><B>Ограничение действительности: тип корневого элемента</B></P>
<P>Параметр <A href="#NT-Name">Name</A> в декларации типа документа должен соответствовать типу <A href="#dt-root" title="Root Element">корневого элемента</A>.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=vc-PEinMarkupDecl></A><B>Ограничение действительности: Правильная декларация/вложенность сущности параметра</B></P>
<P><A href="#dt-repltext" title="Replacement Text">Текст замены</A> для сущности параметра должен быть правильным образом вложен в декларации разметки. Иначе говоря, если первый или последний символ декларации разметки (см. выше <A href="#NT-markupdecl">markupdecl</A>) находится в тексте замены для <A href="#dt-PERef" title="Parameter-entity reference">ссылки на сущность параметра</A>, то в этом тексте должен находиться и второй из указанных символов.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=wfc-PEinInternalSubset></A><B>Ограничение корректности: Сущности параметров во внутреннем наборе</B></P>
<P>Во внутреннем наборе DTD <A href="#dt-PERef" title="Parameter-entity reference">ссылка на сущность параметра</A> может появляться только в тех местах, где могут расположиться декларации разметки, но не в самой декларации разметки. (Это не относится к ссылкам во внешних сущностях параметров или во внешнем наборе.)</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=ExtSubset></A><B>Ограничение корректности: Внешний набор</B></P>
<P>Внешний набор, если таковой имеется, должен соответствовать сценарию для <A href="#NT-extSubset">extSubset</A>.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=PE-between-Decls></A><B>Ограничение корректности: Сущность параметра между декларациями</B></P>
<P>Текст замены для ссылки на сущность параметра в <A href="#NT-DeclSep">DeclSep</A> должен соответствовать сценарию <A href="#NT-extSubsetDecl">extSubsetDecl</A>.</P></DIV>
<P>Вслед за внутренним набором, внешний набор и любые внешние сущности параметров, на которые делается ссылка в <A href="#NT-DeclSep">DeclSep</A>, должны состоять из полных наборов деклараций разметки для типов, которые разрешены неграничным символом <A href="#NT-markupdecl">markupdecl</A>, в сочетании с пробельными символами и <A href="#dt-PERef" title="Parameter-entity reference">ссылками на сущности параметров</A>. При этом отдельные фрагменты содержимого внешнего набора или сущностей внешних параметров при определенных условиях могут игнорироваться в случае построения <A href="#dt-cond-section" title="conditional section">условных секций</A>. Во внутреннем наборе использовать такие секции не разрешается.</P>
<H5>Внешний набор</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-extSubset></A>[30]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>extSubset</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-TextDecl">TextDecl</A>?
<A href="#NT-extSubsetDecl">extSubsetDecl</A></CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-extSubsetDecl></A>[31]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>extSubsetDecl</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>( <A href="#NT-markupdecl">markupdecl</A> | <A href="#NT-conditionalSect">conditionalSect</A> | <A href="#NT-DeclSep">DeclSep</A>)*</CODE></TD>
<TD><I>/* */</I></TD></TR></TBODY></TABLE>
<P>Внешний набор и внешние сущности параметров отличаются от внутреннего набора также и тем, что для них <A href="#dt-PERef" title="Parameter-entity reference">ссылка на сущность параметра</A> может появляться не только <EM>в интервалах между</EM> декларациями разметки, но и <EM>в границах</EM> самих этих деклараций.</P>
<P>Пример XML документа с декларацией типа документа:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY><TR>
<TD><PRE>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE greeting SYSTEM "hello.dtd"&gt;
&lt;greeting&gt;Hello, world!&lt;/greeting&gt; </PRE></TD>
</TR></TBODY>
</TABLE>
<P><A href="#dt-sysid" title="System Identifier">Системный идентификатор</A> "<CODE>hello.dtd</CODE>" указывает адрес DTD этого документа (ссылку URI).</P>
<P>Декларации также могут быть представлены локально, как это делается в следующем примере:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY><TR>
<TD><PRE>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE greeting [
  &lt;!ELEMENT greeting (#PCDATA)&gt;
]&gt;
&lt;greeting&gt;Hello, world!&lt;/greeting&gt;</PRE></TD>
</TR></TBODY></TABLE>
<P>Если используются и внешний, и внутренний наборы деклараций, то внутренний набор рассматривается прежде внешнего. Как следствие этого, декларации сущностей и списка атрибутов во внутреннем наборе имеют приоритет над аналогичными декларациями во внешнем наборе.</P></DIV>
<DIV class=div2>
<H3><A name=sec-rmd></A>2.9 Декларация одиночного документа</H3>
<P>Декларации разметки, которые <A href="#dt-xml-proc" title="XML Processor">XML процессор</A> передает приложению, могут оказывать влияние на содержимое документа. Примером могут служить атрибуты по умолчанию и декларации сущностей. Декларация одиночного документа, которая может быть представлена в составе XML декларации, указывает, могут ли возникать декларации в сущностях параметров, а также декларации, внешние по отношению к <A href="#dt-docent" title="Document Entity">сущности документа</A>. [<A name=dt-extmkpdecl title="External Markup Declaration">Определение</A>: <B>Внешняя декларация разметки</B> определяется как декларация разметки, встретившаяся во внешнем наборе или в сущности параметра (внешней или внутренней, последний вариант был включен в спецификацию только потому, что непроверяющие процессоры читать их не обязаны).]</P>
<H5>Декларация одиночного документа</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-SDDecl></A>[32]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>SDDecl</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-S">S</A> 'standalone' <A href="#NT-Eq">Eq</A> (("'" ('yes' | 'no') "'") | ('"' ('yes' | 'no') '"')) </CODE></TD>
<TD><A href="#vc-check-rmd">[VC: Декларация одиночного документа]</A></TD></TR></TBODY></TABLE>
<P>Значение "yes" в декларации одиночного документа говорит об отсутствии <A href="#dt-extmkpdecl" title="External Markup Declaration">внешних деклараций разметки</A>, которые оказывали бы влияние на информацию, которую XML процессор передает приложению. Значение "no" указывает на то, что такие внешние декларации разметки имеются, либо могут быть появиться. Заметим, что декларация одиночного документа всего лишь свидетельствует о присутствии внешних <EM>деклараций</EM>. Наличие же в документе ссылок на внешние <EM>сущности</EM>, если последние уже были декларированы в самом документе, статуса одиночного документа не отменяет.</P>
<P>Если внешние декларации разметки отсутствуют, то декларация одиночного документа теряет смысл. Если присутствуют внешние декларации разметки, но отсутствует декларация одиночного документа, подразумевается что она имеет значение "no".</P>
<P>Любой XML документ, для которого было указано <CODE>standalone="no"</CODE>, может быть алгоритмическим путем приведен к одиночному документу, что может потребоваться для некоторых приложений, получающих данные по сети.</P>
<DIV class=constraint>
<P class=prefix><A name=vc-check-rmd></A><B>Ограничение действительности: Декларация одиночного документа</B></P>
<P>Декларация одиночного документа должна иметь значение "no", если какие-либо внешние декларации разметки включают декларацию для:</P>
<UL>
<LI><P>атрибутов со значением <A href="#dt-default" title="Attribute Default">по умолчанию</A>, если элементы, к которым эти атрибуты относятся, были представлены в документе без уточнения значений для указанных атрибутов, </P>
<LI><P>сущностей (кроме <CODE>amp</CODE>, <CODE>lt</CODE>, <CODE>gt</CODE>, <CODE>apos</CODE> и <CODE>quot</CODE>), если в документе встретились <A href="#dt-entref" title="Entity Reference">ссылки</A> на эти сущности, </P>
<LI><P>атрибутов со значением, подлежащим <A href="#AVNormalize"><CITE>нормализации</CITE></A>, если этот атрибут появился в документе со значением, которое в результате этой нормализации будет изменено,</P>
<LI><P>типов элементов с <A href="#dt-elemcontent" title="Element content">содержимым</A>, если в каком-либо экземпляре такого типа был обнаружен пробельный символ.</P></LI></UL></DIV>
<P>Пример декларации XML с декларированием одиночного документа:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;?xml version="1.0" standalone='yes'?&gt;</PRE></TD></TR></TBODY></TABLE></DIV>
<DIV class=div2>
<H3><A name=sec-white-space></A>2.10 Обработка пробельных символов</H3>
<P>В ходе редактирования XML документов часто бывает удобно воспользоваться "пробельными символами" (white space - пробелы, табуляторы и пустые строки) для выделения разметки для лучшей читаемости. Такие пробельные символы обычно не должны попадать в ту версию документа, которая передается в приложение. С другой стороны, часто встречаются "значимые" пробельные символы, которые должны быть оставлены в передаваемом документе, например если это стихи или исходный код программы.</P>
<P><A href="#dt-xml-proc" title="XML Processor">XML процессор</A> должен всегда передавать приложению все символы документа, не относящиеся к разметке. <A href="#dt-validating" title="Validating Processor">Проверяющий XML процессор</A> дополнительно должен проинформировать приложение о том, какие из этих символов соответствуют пробельным символам в <A href="#dt-elemcontent" title="Element content">содержимом элемента</A>.</P>
<P>К элементу может быть приставлен специальный <A href="#dt-attr" title=Attribute>атрибут</A>, называемый <CODE>xml:space</CODE>, для того чтобы показать, что пробельные символы в этом элементе должны быть сохранены. Если этот атрибут используется в действительных документах, то, как и любой другой, он должен быть <A href="#dt-attdecl" title="Attribute-List Declaration">декларирован</A>. Будучи декларирован, он должен быть представлен как <A href="#dt-enumerated" title="Enumerated Attribute Values">перечислимый тип</A>, значениями которого являются одно или оба значения "default" и "preserve". Например:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY><TR>
<TD><PRE>&lt;!ATTLIST poem  xml:space (default|preserve) 'preserve'&gt;
&lt;!-- --&gt;
&lt;!ATTLIST pre xml:space (preserve) #FIXED 'preserve'&gt;</PRE></TD></TR></TBODY></TABLE>
<P>Значение атрибута "default" говорит о том, что для данного элемента используется режим обработки пробельных символов, применяемый в приложениях по умолчанию. Значение "preserve" говорит о том, что приложения должны сохранить все пробельные символы. Декларированное таким образом правило относится ко всем элементам, находящимся среди содержимого того элемента, которому был назначен данный атрибут (при условии что это правило не было затем переопределено другим экземпляром атрибута <CODE>xml:space</CODE>).</P>
<P>Считается что <A href="#dt-root" title="Root Element">корневой элемент</A> любого документа не имеет указаний о том, каким образом приложение будет обрабатывать пробелы, если для этого атрибута не было дано соответствующего значения и этот атрибут не был представлен среди значений по умолчанию.</P></DIV>
<DIV class=div2>
<H3><A name=sec-line-ends></A>2.11 Обработка концов строк</H3>
<P>Часто <A href="#dt-parsedent" title="Text Entity">разобранные сущности</A> XML, помещенные в компьютерные файлы, для удобства редактирования представляются в виде набора строк. В качестве разделителя для таких строк обычно используется некая комбинация символов возврата каретки (#xD) и конца строки (#xA).</P>
<P>Чтобы облегчить работу <A href="#dt-app" title=Application>приложений</A>, текст, который им передает <A href="#dt-xml-proc" title="XML Processor">XML процессор</A>, должен быть таким, как если бы этот процессор при выводе перед обработкой нормализовал все концы строк во внешних разобранных сущностях (а также сущности самого документа). Осуществляться это должно путем замены последовательности из двух символов #xD #xA (а также одиночного #xD, за которым не следует #xA) одним символом #xA.</P></DIV>
<DIV class=div2>
<H3><A name=sec-lang-tag></A>2.12 Идентификация языка</H3>
<P>В ходе обработки документа часто бывает полезным идентифицировать, на каком из естественных или формальных языков он был записан. Для идентификации языка, который использовался при записи содержимого и значений атрибутов любого элемента, в документе может быть указан специальный <A href="#dt-attr" title=Attribute>атрибут</A> с названием <CODE>xml:lang</CODE>. Если этот атрибут используется в действительном документе, то, как и любой другой, он должен быть <A href="#dt-attdecl" title="Attribute-List Declaration">декларирован</A>. Значением этого атрибута являются идентификаторы языков, определенные в документе <A href="#RFC1766">[IETF RFC 1766]</A> (<CITE>Тэги для идентификации языков</CITE>) или наследующих его стандартах IETF.</P>
<DIV class=note>
<P class=prefix><B>Замечание:</B></P>
<P>В <A href="#RFC1766">[IETF RFC 1766]</A> указанные тэги строятся из двухсимвольного кода языка, заданного в <A href="#ISO639">[ISO 639]</A>, двухсимвольного кода страны, определенного в <A href="#ISO3166">[ISO 3166]</A> или же языкового идентификатора, зарегистрированного в Internet Assigned Numbers Authority <A href="#IANA-LANGCODES">[IANA-LANGCODES]</A>. Предполагается, что для идентификации языков, которые в настоящий момент не упомянуты в спецификации <A href="#ISO639">[ISO 639]</A>, стандарты, наследующие <A href="#RFC1766">[IETF RFC 1766]</A>, будут дополнены трехсимвольными кодами.</P></DIV>
<P>(Сценарии грамматики с 33 по 38 изъяты из спецификации.)</P>
<P>Например:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%"><TBODY><TR>
<TD><PRE>&lt;p xml:lang="en"&gt;The quick brown fox jumps over the lazy dog.&lt;/p&gt;
&lt;p xml:lang="en-GB"&gt;What colour is it?&lt;/p&gt;
&lt;p xml:lang="en-US"&gt;What color is it?&lt;/p&gt;
&lt;sp who="Faust" desc='leise' xml:lang="de"&gt;
  &lt;l&gt;Habe nun, ach! Philosophie,&lt;/l&gt;
  &lt;l&gt;Juristerei, und Medizin&lt;/l&gt;
  &lt;l&gt;und leider auch Theologie&lt;/l&gt;
  &lt;l&gt;durchaus studiert mit heiЯem Bemьh'n.&lt;/l&gt;
&lt;/sp&gt;</PRE></TD></TR></TBODY></TABLE>
<P>Предполагается, что информация, представленная в <CODE>xml:lang</CODE>, относится ко всем атрибутам и всему содержимому элемента, где этот атрибут был указан (при условии, что в содержимом этого элемента она не была затем переопределена новым экземпляром атрибута <CODE>xml:lang</CODE> в другом элементе).</P>
<P>Простая декларация атрибута <CODE>xml:lang</CODE> может иметь вид</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%"><TBODY><TR>
<TD><PRE>xml:lang NMTOKEN #IMPLIED</PRE></TD></TR></TBODY></TABLE>
<P>Если это необходимо, для этого атрибута могут быть представлены значения по умолчанию. В сборнике французской поэзии (poem) для английских студентов, содержащем глоссарий (gloss) и пометки на английском языке (note), атрибут <CODE>xml:lang</CODE> может быть декларирован следующим образом:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;!ATTLIST poem   xml:lang NMTOKEN 'fr'&gt;
&lt;!ATTLIST gloss  xml:lang NMTOKEN 'en'&gt;
&lt;!ATTLIST note   xml:lang NMTOKEN 'en'&gt;</PRE></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div1>
<H2><A name=sec-logical-struct></A>3 Логические структуры</H2>
<P>[<A name=dt-element title=Element>Определение</A>: Каждый <A href="#dt-xml-doc" title="XML Document">XML документ</A> содержит один или несколько <B>элементов</B>, границы каждого из которых обозначены либо парой <A href="#dt-stag" title=Start-Tag>начальный тэг</A> - <A href="#dt-etag" title="End Tag">конечный тэг</A>, либо (если это <A href="#dt-empty" title=Empty>пустой</A> элемент) <A href="#dt-eetag" title="empty-element tag">тэгом пустого элемента</A>. Каждый элемент имеет определенный тип, который идентифицируется по имени и иногда называется "общим идентификатором" этого элемента (generic identifier - GI), а также может иметь набор спецификаций к атрибутам.] Каждая спецификация атрибута содержит его <A href="#dt-attrname" title="Attribute Name">имя</A> и <A href="#dt-attrval" title="Attribute Value">значение</A>.</P>
<H5>Элемент</H5>
<TABLE class=scrap><TBODY>
<TR vAlign=baseline>
<TD><A name=NT-element></A>[39]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>element</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-EmptyElemTag">EmptyElemTag</A></CODE></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><CODE>| <A href="#NT-STag">STag</A> <A href="#NT-content">content</A> <A href="#NT-ETag">ETag</A></CODE></TD>
<TD><A href="#GIMatch">[WFC: Соответствие типов элементов]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#elementvalid">[VC: Действительность элемента]</A></TD></TR></TBODY></TABLE>
<P>Данная спецификация не ограничивает семантику, порядок использования (за исключением синтаксиса), выбор имен для атрибутов и типов элементов. Ограничение заключается в том, что имена, чье начало соответствует шаблону <CODE>(('X'|'x')('M'|'m')('L'|'l'))</CODE>, зарезервированы для стандартизации в текущей и последующих версиях данной спецификации.</P>
<DIV class=constraint>
<P class=prefix><A name=GIMatch></A><B>Ограничение корректности: Соответствие типов элементов</B></P>
<P>Параметр <A href="#NT-Name">Name</A> в конечном тэге элемента должен соответствовать типу элемента в начальном тэге.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=elementvalid></A><B>Ограничение действительности: Действительность элемента</B></P>
<P>Элемент считается действительным, если имеется декларация, соответствующая <A href="#NT-elementdecl">elementdecl</A>, в которой параметр <A href="#NT-Name">Name</A> соответствует типу элемента, а также выполняется одно из следующих условий:</P>
<OL>
<LI><P>Декларация соответствует <B>EMPTY</B>, а элемент не имеет <A href="#dt-content" title=Content>содержимого</A>.</P>
<LI><P>Декларация соответствует <A href="#NT-children">непосредственному потомку</A> элемента, а последовательность его непосредственных <A href="#dt-parentchild" title=Parent/Child>элементов - потомков</A>, принадлежит языку, генерируемому регулярным выражением в модели содержимого с необязательным пробельным символом (символами, соответствующими неграничному <A href="#NT-S">S</A>) между начальным тэгом и первым из непосредственных элементов-потомков, между элементами-потомками, между последним элементом-потомком и закрывающим тэгом. Заметим, что в секция CDATA, содержащая лишь пробельный символ, не соответствуют нетерминальному <A href="#NT-S">S</A>, а следовательно в указанных позициях появиться не может.</P>
<LI><P>Декларация соответствует <A href="#NT-Mixed">Mixed</A>, а содержимое состоит из <A href="#dt-chardata" title="Character Data">символьных данных</A> и <A href="#dt-parentchild" title=Parent/Child>элементов-потомков</A>, тип которых соответствует именам в модели содержимого.</P>
<LI><P>Декларация соответствует <B>ANY</B>, и был декларирован тип всех <A href="#dt-parentchild" title=Parent/Child>элементов-потомков</A>.</P></LI></OL></DIV>
<DIV class=div2>
<H3><A name=sec-starttags></A>3.1 Начальные тэги, конечные тэги и тэги пустых элементов</H3>

<P>[<A name=dt-stag title=Start-Tag>Определение</A>: Начало любого непустого XML элемента помечается <B>начальным тэгом</B>.]</P>
<H5>Начальный тэг</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-STag></A>[40]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>STag</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&lt;' <A href="#NT-Name">Name</A> (<A href="#NT-S">S</A> <A href="#NT-Attribute">Attribute</A>)* <A href="#NT-S">S</A>? '&gt;'</CODE></TD>
<TD><A href="#uniqattspec">[WFC: Уникальность спецификации атрибута]</A></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-Attribute></A>[41]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>Attribute</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-Name">Name</A> <A href="#NT-Eq">Eq</A> <A href="#NT-AttValue">AttValue</A></CODE></TD>
<TD><A href="#ValueType">[VC: Тип значения атрибута]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#NoExternalRefs">[WFC: Отсутствие ссылок на внешние сущности]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#CleanAttrVals">[WFC: Отсутствие символов &lt; в значениях атрибута]</A></TD></TR></TBODY></TABLE>
<P>Параметр <A href="#NT-Name">Name</A> в начальном и конечном тэгах определяет <B>тип</B> элемента. [<A name=dt-attr title=Attribute>Определение</A>: Пара <A href="#NT-Name">Name</A> - <A href="#NT-AttValue">AttValue</A> называется <B> спецификацией атрибута</B> для данного элемента], [<A name=dt-attrname title="Attribute Name">Определение</A>: Параметр <A href="#NT-Name">Name</A> в каждой такой паре называется <B>именем атрибута</B>], а [<A name=dt-attrval title="Attribute Value">Определение</A>: содержимое поля <A href="#NT-AttValue">AttValue</A> - текст в одинарных (<CODE>'</CODE>) или двойных (<CODE>"</CODE>) кавычках - называется <B>значением атрибута</B>.] Заметим, что очередность появления спецификаций атрибутов в начальном тэге или тэге пустого элемента значения не имеет.</P>
<DIV class=constraint>
<P class=prefix><A name=uniqattspec></A><B>Ограничение корректности: Уникальность спецификации атрибута</B></P>
<P>В границах одного начального тэга (или тэга пустого элемента) одно и то же имя атрибута не может появляться более одного раза.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=ValueType></A><B>Ограничение действительности: Тип значения атрибута</B></P>
<P>Атрибут должен быть декларирован, его значение должно иметь тот тип, который был декларирован для него. (Описание типов атрибутов см. в главе <A href="#attdecls"><B>3.3 Декларации списков атрибутов</B></A>.)
</P></DIV>

<DIV class=constraint>
<P class=prefix><A name=NoExternalRefs></A><B>Ограничение корректности: Отсутствие ссылок на внешние сущности</B></P>
<P>Значение атрибута не может иметь содержать прямых или косвенных ссылок на внешние сущности.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=CleanAttrVals></A><B>Ограничение корректности: Отсутствие символов <CODE>&lt;</CODE> в значениях атрибута</B></P>
<P>Символ <CODE>&lt;</CODE> не может содержаться в <A href="#dt-repltext" title="Replacement Text">тексте замены</A> для сущностей, на которые в значении атрибута прямо или косвенно дается ссылка.</P></DIV>
<P>Пример начального тэга:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%"><TBODY><TR>
<TD><PRE>&lt;termdef id="dt-dog" term="dog"&gt;</PRE></TD></TR></TBODY></TABLE>
<P>[<A name=dt-etag title="End Tag">Определение</A>: Любой элемент, чье начало отмечено начальным тэгом, должен завершиться <B>конечным тэгом</B>, имя которого повторяет тип элемента, указанный в начальном тэге:]</P>
<H5>Конечный тэг</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-ETag></A>[42]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>ETag</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&lt;/' <A href="#NT-Name">Name</A> <A href="#NT-S">S</A>? '&gt;'</CODE></TD></TR></TBODY></TABLE>
<P>Пример конечного тэга:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
  <TBODY>
  <TR>
    <TD><PRE>&lt;/termdef&gt;</PRE></TD></TR></TBODY></TABLE>
<P>[<A name=dt-content title=Content>Определение</A>: <A href="#dt-text" title=Text>Текст</A>, заключенный между начальным и конечным тэгами, называется <B>содержимым</B> элемента:]</P>
<H5>Содержимое элементов</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-content></A>[43]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>content</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-CharData">CharData</A>? ((<A href="#NT-element">element</A> | <A href="#NT-Reference">Reference</A> | <A href="#NT-CDSect">CDSect</A> | <A href="#NT-PI">PI</A> | <A href="#NT-Comment">Comment</A>) <A href="#NT-CharData">CharData</A>?)*</CODE></TD>
<TD><I>/* */</I></TD></TR></TBODY></TABLE>
<P>[<A name=dt-empty title=Empty>Определение</A>: Элемент без содержимого называется <B>пустым элементом</B>.] Пустой элемент может быть представлен либо в виде начального тэга, за которым сразу же следует конечный тэг, либо как тэг пустого элемента. [<A name=dt-eetag title="empty-element tag">Определение</A>: <B>Тэг пустого элемента</B> имеет специальный формат:]</P>
<H5>Тэги пустых элементов</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-EmptyElemTag></A>[44]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>EmptyElemTag</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&lt;' <A href="#NT-Name">Name</A> (<A href="#NT-S">S</A> <A href="#NT-Attribute">Attribute</A>)* <A href="#NT-S">S</A>? '/&gt;'</CODE></TD>
<TD><A href="#uniqattspec">[WFC: Уникальность спецификации атрибута]</A></TD></TR></TBODY></TABLE>
<P>Тэг пустого элемента может быть использован для любого элемента, не имеющего содержимого, независимо от того, был ли последний декларирован с ключевым словом <B>EMPTY</B>. <A href="#dt-interop" title="For interoperability">В целях совместимости</A>, тэг пустого элемента должен использоваться для элементов, которые были декларированы как EMPTY, и только для них.</P>
<P>Примеры пустых элементов:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR><TD><PRE>&lt;IMG align="left"
 src="http://www.w3.org/Icons/WWW/w3c_home" /&gt;
&lt;br&gt;&lt;/br&gt;
&lt;br/&gt;</PRE></TD></TR></TBODY></TABLE></DIV>
<DIV class=div2>
<H3><A name=elemdecls></A>3.2 Декларации типа элемента</H3>
<P>Для достижения <A href="#dt-valid" title=Validity>действительности</A>, на структуру <A href="#dt-element" title=Element>элементов</A> в <A href="#dt-xml-doc" title="XML Document">XML документе</A> могут быть наложены ограничения в виде деклараций типов используемых элементов и списков атрибутов. Декларирование типа элемента накладывает ограничение на его <A href="#dt-content" title=Content>содержание</A>.</P>
<P>Декларация типа элемента часто конкретизирует тип его <A href="#dt-parentchild" title=Parent/Child>непосредственных потомков</A>. По выбору пользователя, XML процессор может генерировать предупреждение если в декларации был упомянут тип элемента, для которого не было предоставлено соответствующей декларации, однако ошибочной эта ситуация не считается.</P>
<P>[<A name=dt-eldecl title="Element Type declaration">Определение</A>: <B> Декларация типа элемента</B> имеет вид:]</P>
<H5>Декларация типа элемента</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-elementdecl></A>[45]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>elementdecl</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&lt;!ELEMENT' <A href="#NT-S">S</A> <A href="#NT-Name">Name</A> <A href="#NT-S">S</A> <A href="#NT-contentspec">contentspec</A> <A href="#NT-S">S</A>? '&gt;'</CODE></TD>
<TD><A href="#EDUnique">[VC: Уникальность декларации типа элемента]</A></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-contentspec></A>[46]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>contentspec</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'EMPTY' | 'ANY' | <A href="#NT-Mixed">Mixed</A> | <A href="#NT-children">children</A> </CODE></TD></TR></TBODY></TABLE>
<P>где параметр <A href="#NT-Name">Name</A> определяет декларируемый тип элемента.</P>
<DIV class=constraint>
<P class=prefix><A name=EDUnique></A><B>Ограничение действительности: Уникальность декларации типа элемента</B></P>
<P>Ни один тип элемента не может быть декларирован более одного раза.</P></DIV>
<P>Примеры деклараций типа элемента:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;!ELEMENT br EMPTY&gt;
&lt;!ELEMENT p (#PCDATA|emph)* &gt;
&lt;!ELEMENT %name.para; %content.para; &gt;
&lt;!ELEMENT container ANY&gt;</PRE></TD></TR></TBODY></TABLE>
<DIV class=div3>

<H4><A name=sec-element-content></A>3.2.1 Содержимое элемента</H4>
<P>[<A name=dt-elemcontent title="Element content">Определение</A>: <A href="#dt-stag" title=Start-Tag>Тип</A> элемента определяет <B>содержимое элемента</B>, если элементы указанного типа обязаны не иметь символьных данных, а только <A href="#dt-parentchild" title=Parent/Child>непосредственные элементы-потомки</A>, которые могут отделяться друг от друга пробельными символами (символами, соответствующими неграничному <A href="#NT-S">S</A>).] [<A name=dt-content-model title="Content model">Определение</A>: В этом случае накладываемое на элемент ограничение содержит <B>модель содержимого</B> - простую грамматику, управляющую допустимыми типами непосредственных элементов-потомков и порядком, в котором им разрешено появляться.] Указанная грамматика строится из фрагментов содержания (<A href="#NT-cp">cp</A>), которые содержат название, списки выбора и последовательные списки фрагментов содержания:</P>
<H5>Модели содержимого элемента</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-children></A>[47]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>children</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>(<A href="#NT-choice">choice</A> | <A href="#NT-seq">seq</A>) ('?' | '*' | '+')?</CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-cp></A>[48]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>cp</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>(<A href="#NT-Name">Name</A> | <A href="#NT-choice">choice</A> | <A href="#NT-seq">seq</A>) ('?' | '*' | '+')?</CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-choice></A>[49]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>choice</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'(' <A href="#NT-S">S</A>? <A href="#NT-cp">cp</A> ( <A href="#NT-S">S</A>? '|' <A href="#NT-S">S</A>? <A href="#NT-cp">cp</A> )+ <A href="#NT-S">S</A>? ')'</CODE></TD>
<TD><I>/* */</I></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><I>/* */</I></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#vc-PEinGroup">[VC: Правильная вложенность Group/PE]</A></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-seq></A>[50]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>seq</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'(' <A href="#NT-S">S</A>? <A href="#NT-cp">cp</A> ( <A href="#NT-S">S</A>? ',' <A href="#NT-S">S</A>? <A href="#NT-cp">cp</A> )* <A href="#NT-S">S</A>? ')'</CODE></TD>
<TD><I>/* */</I></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#vc-PEinGroup">[VC: Правильная вложенность Group/PE]</A></TD></TR></TBODY></TABLE>
<P>где каждая запись <A href="#NT-Name">Name</A> - это тип элемента, который может выступить в роли <A href="#dt-parentchild" title=Parent/Child> непосредственного потомка</A>. Любой фрагмент содержимого в списке выбора может быть помещен в <A href="#dt-elemcontent" title="Element content">содержимое элемента</A> в то место, где согласно грамматике располагался соответствующий список выбора. Все фрагменты содержимого в последовательном списке должны быть вставлены в <A href="#dt-elemcontent" title="Element content">содержимое элемента</A> и именно в том прядке, как они были представлены в исходном списке. Необязательный символ, следующий за именем (или списком), указывает, должен ли данный элемент (или фрагменты из данного списка) быть повторен один или более раз (<CODE>+</CODE>), нуль или более раз (<CODE>*</CODE>), либо нуль или один раз (<CODE>?</CODE>). Отсутствие такого оператора означает, что данный элемент (или фрагмент) должен появиться ровно один раз. Представленный синтаксис и его значение те же самые, что используются в сценариях самой спецификации.</P>
<P>Содержимое элемента соответствует модели содержания тогда и только тогда, когда можно проследить способ его получения из этой модели в соответствии с операторами последовательности, выбора и повторения, а также такой, что каждый элемент в содержании соответствует типу элемента в модели содержания. Если какой-либо элемент в документе может быть сопоставлен нескольким типам элементов в модели содержания, то для сохранения <A href="#dt-compat" title="For Compatibility">совместимости</A> процессор должен фиксировать ошибку. За дополнительной информацией обращайтесь к Приложению <A href="#determinism"><B>E Детерминистические модели содержания</B></A>.</P>
<DIV class=constraint>
<P class=prefix><A name=vc-PEinGroup></A><B>Ограничение действительности: Правильная вложенность  Group/PE</B></P>
<P><A href="#dt-repltext" title="Replacement Text">Текст замены</A> для сущности параметра должен иметь правильно вложенные группы скобок. Иными словами, если в конструкциях <A href="#NT-choice">choice</A>, <A href="#NT-seq">seq</A> или <A href="#NT-Mixed">Mixed</A> открывающая или закрывающая скобка была включена в текст замены для <A href="#dt-PERef" title="Parameter-entity reference">сущности параметра</A>, то в этот текст должна попадать и вторая парная скобка.</P>
<P>Если в конструкциях <A href="#NT-choice">choice</A>, <A href="#NT-seq">seq</A> или <A href="#NT-Mixed">Mixed</A> обнаружена ссылка на сущность параметра, то, <A href="#dt-interop" title="For interoperability">для совместимости</A>, ее текст замены должен содержать хотя бы один символ, отличный от пробела. И ни первый, ни последний символ в тексте замены, отличный от пробела, не должен быть соединителем (<CODE>|</CODE> или <CODE>,</CODE>).</P></DIV>
<P>Примеры моделей содержимого элемента:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;!ELEMENT spec (front, body, back?)&gt;
&lt;!ELEMENT div1 (head, (p | list | note)*, div2*)&gt;
&lt;!ELEMENT dictionary-body (%div.mix; | %dict.mix;)*&gt;</PRE></TD></TR></TBODY></TABLE></DIV>
<DIV class=div3>
<H4><A name=sec-mixed-content></A>3.2.2 Смешанный контент</H4>
<P>[<A name=dt-mixed title="Mixed Content">Определение</A>: Какой-либо <A href="#dt-stag" title=Start-Tag>тип</A> элемента имеет <B>смешанный контент</B>, если элементы этого типа могут содержать символьные данные, возможно чередуемые с <A href="#dt-parentchild" title=Parent/Child>элементами-потомками</A>.] В таком случае ограничения модели могут касаться лишь типа непосредственных элементов-потомков, но не порядка их следования и количества экземпляров:</P>
<H5>Декларация смешанного контента</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-Mixed></A>[51]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>Mixed</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'(' <A href="#NT-S">S</A>? '#PCDATA' (<A href="#NT-S">S</A>? '|' <A href="#NT-S">S</A>? <A href="#NT-Name">Name</A>)* <A href="#NT-S">S</A>? ')*' </CODE></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><CODE>| '(' <A href="#NT-S">S</A>? '#PCDATA' <A href="#NT-S">S</A>? ')' </CODE></TD>
<TD><A href="#vc-PEinGroup">[VC: Правильная вложенность Group/PE]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#vc-MixedChildrenUnique">[VC: Отсутствие дублирования типов]</A></TD></TR></TBODY></TABLE>
<P>где параметр <A href="#NT-Name">Name</A> определяет тип элементов, которые могут быть использованы в роли непосредственных потомков. Ключевое слово <B>#PCDATA</B> исторически унаследовано от термина "parsed character data".</P>
<DIV class=constraint>
<P class=prefix><A name=vc-MixedChildrenUnique></A><B>Ограничение действительности: Отсутствие дублирования типов</B></P>
<P>Одно и то же имя не может быть представлено в декларации смешанного контента более одного раза.</P></DIV>
<P>Примеры деклараций смешанного контента:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;!ELEMENT p (#PCDATA|a|ul|b|i|em)*&gt;
&lt;!ELEMENT p (#PCDATA | %font; | %phrase; | %special; | %form;)* &gt;
&lt;!ELEMENT b (#PCDATA)&gt;</PRE></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div2>
<H3><A name=attdecls></A>3.3 Декларации списка атрибутов</H3>
<P><A href="#dt-attr" title=Attribute>Атрибут</A> используется для того, чтобы связать с <A href="#dt-element" title=Element>элементом</A> пару имя-значение. Спецификация атрибута может быт дана только в <A href="#dt-stag" title=Start-Tag>начальном тэге</A>, либо <A href="#dt-eetag" title="empty-element tag">тэге пустого элемента</A>. Таким образом, сценарии ее обработки следует искать в главе <A href="#sec-starttags"><B>3.1 Начальные тэги, конечные тэги и тэги пустых элементов</B></A>. Декларация списка атрибутов может быть использована для:</P>
<UL>
<LI><P>формирования перечня атрибутов, относящихся к определенному типу элементов.</P>
<LI><P>ограничения по типу атрибутов.</P>
<LI><P>формирования <A href="#dt-default" title="Attribute Default">значений по умолчанию</A> для атрибутов.</P></LI></UL>
<P>[<A name=dt-attdecl title="Attribute-List Declaration">Определение</A>: для каждого атрибута, относящегося к элементам определенного типа, в соответствующей <B>декларации списка атрибутов</B> определяются имя, тип данных и, возможно, значение по умолчанию:]</P>
<H5>Декларация списка атрибутов</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-AttlistDecl></A>[52]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>AttlistDecl</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&lt;!ATTLIST' <A href="#NT-S">S</A> <A href="#NT-Name">Name</A> <A href="#NT-AttDef">AttDef</A>* <A href="#NT-S">S</A>? '&gt;'</CODE></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-AttDef></A>[53]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>AttDef</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-S">S</A> <A href="#NT-Name">Name</A> <A href="#NT-S">S</A> <A href="#NT-AttType">AttType</A> <A href="#NT-S">S</A> <A href="#NT-DefaultDecl">DefaultDecl</A></CODE></TD></TR></TBODY></TABLE>
<P>В поле <A href="#NT-Name">Name</A> в правиле <A href="#NT-AttlistDecl">AttlistDecl</A> указывается тип элемента. По выбору пользователя, XML процессор может генерировать предупреждение, если атрибуты, декларированные для такого типа элементов, сами декларированы не были, однако ошибкой такая ситуация не считается. Параметр <A href="#NT-Name">Name</A> в правиле <A href="#NT-AttDef">AttDef</A> соответствует имени описываемого атрибута.</P>
<P>Если для какого-либо из типов элементов было дано несколько деклараций <A href="#NT-AttlistDecl">AttlistDecl</A>, то содержимое всех их суммируется. Если для некого типа элементов было дано несколько деклараций одного и того же атрибута, то использоваться должна только первая декларация, а все последующие будут игнорироваться. <A href="#dt-interop" title="For interoperability">Для сохранения совместимости</A>, авторы DTD могут придерживаться правила давать для любого типа элементов не более одной декларации списка атрибутов, не более одной декларации для каждого имени атрибута, представленного в декларации списка атрибутов и, по крайней мере, одну декларацию атрибута в каждой из деклараций списка атрибутов. В целях совместимости, XML процессор по выбору пользователя может генерировать предупреждение, если для какого-либо типа элементов было представлено более одной декларации списка атрибутов, или для какого-либо атрибута было представлено более одной декларации, однако описанные ситуации ошибочными не являются.</P>
<DIV class=div3>
<H4><A name=sec-attribute-types></A>3.3.1 Типы атрибутов</H4>
<P>Все типы XML атрибутов делятся на три класса: строковый тип, набор символьных (tokenized) типов и перечислимые (enumerated) типы. Строковый тип может иметь в качестве значения одну строку. Символьные типы содержат различные лексические и семантические ограничения. Ограничения действительности, обсуждаемые в данной грамматике, начинают действовать после того, как значение атрибута было нормализовано в соответствии с описанием в главе <A href="#attdecls"><B>3.3 Декларации списков атрибутов</B></A>.</P>
<H5>Типы атрибутов</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-AttType></A>[54]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>AttType</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-StringType">StringType</A> | <A href="#NT-TokenizedType">TokenizedType</A> | <A href="#NT-EnumeratedType">EnumeratedType</A> </CODE></TD></TR>
<TR vAlign=baseline>

<TD><A name=NT-StringType></A>[55]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>StringType</CODE></TD>

<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'CDATA'</CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-TokenizedType></A>[56]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>TokenizedType</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'ID'</CODE></TD>
<TD><A href="#id">[VC: ID]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#one-id-per-el">[VC: Один ID для каждого типа элементов]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#id-default">[VC: Значение по умолчанию для атрибута ID]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><CODE>| 'IDREF'</CODE></TD>
<TD><A href="#idref">[VC: IDREF]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><CODE>| 'IDREFS'</CODE></TD>
<TD><A href="#idref">[VC: IDREF]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>

<TD><CODE>| 'ENTITY'</CODE></TD>
<TD><A href="#entname">[VC: Имя сущности]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><CODE>| 'ENTITIES'</CODE></TD>
<TD><A href="#entname">[VC: Имя сущности]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><CODE>| 'NMTOKEN'</CODE></TD>
<TD><A href="#nmtok">[VC: Лексема имени]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><CODE>| 'NMTOKENS'</CODE></TD>
<TD><A href="#nmtok">[VC: Лексема имени]</A></TD></TR></TBODY></TABLE>
<DIV class=constraint>


<P class=prefix><A name=id></A><B>Ограничение действительности: ID</B></P>
<P>Значения типа <B>ID</B> должны соответствовать сценарию для <A href="#NT-Name">Name</A>. Имя, соответствующее значению этого типа, должно появляться в XML документе не более одного раза. Иными словами, значения ID должны уникальным образом идентифицировать элементы, в которых они находятся.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=one-id-per-el></A><B>Ограничение действительности: Один ID для каждого типа элементов</B></P>

<P>Любой тип элемента не может иметь более одного атрибута ID.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=id-default></A><B>Ограничение действительности: Значение по умолчанию для атрибута ID</B></P>
<P>Для атрибута ID должно быть декларировано значение по умолчанию <B>#IMPLIED</B> или <B>#REQUIRED</B>.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=idref></A><B>Ограничение действительности: IDREF</B></P>
<P>Значения типа <B>IDREF</B> должны соответствовать сценарию <A href="#NT-Name">Name</A>, а значения типа <B>IDREFS</B> должны соответствовать <A href="#NT-Names">Names</A>. При этом каждое <A href="#NT-Name">Name</A> должно соответствовать значению атрибута ID в каком-либо элементе XML документа, то есть, значение <B>IDREF</B> должно соответствовать значению какого-либо из атрибутов ID.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=entname></A><B>Ограничение действительности: Имя сущности</B></P>
<P>Значения типа <B>ENTITY</B> должны соответствовать сценарию <A href="#NT-Name">Name</A>, значения типа <B>ENTITIES</B> должны соответствовать <A href="#NT-Names">Names</A>. Каждое <A href="#NT-Name">Name</A> при этом должно соответствовать названию одной из <A href="#dt-unparsed" title="Unparsed Entity">неразобранных сущностей</A>, декларированных в <A href="#dt-doctype" title="Document Type Declaration">DTD</A>.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=nmtok></A><B>Ограничение действительности: Лексема имени</B></P>
<P> Значения типа <B>NMTOKEN</B> должны соответствовать сценарию <A href="#NT-Nmtoken">Nmtoken</A>, значения типа <B>NMTOKENS</B> должны соответствовать <A href="#NT-Nmtokens" title="">Nmtokens</A>.</P></DIV>
<P>[<A name=dt-enumerated title="Enumerated Attribute Values">Определение</A>: <B>Перечислимый атрибут</B> может выбирать одно значение из перечня, предоставленного в декларации]. Существует два вида перечислимых типов:</P>
<H5>Типы перечислимых атрибутов</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>



<TD><A name=NT-EnumeratedType></A>[57]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>EnumeratedType</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-NotationType">NotationType</A> | <A href="#NT-Enumeration">Enumeration</A> </CODE></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-NotationType></A>[58]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>NotationType</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'NOTATION' <A href="#NT-S">S</A> '(' <A href="#NT-S">S</A>? <A href="#NT-Name">Name</A> (<A href="#NT-S">S</A>? '|' <A href="#NT-S">S</A>? <A href="#NT-Name">Name</A>)* <A href="#NT-S">S</A>? ')' </CODE></TD>
<TD><A href="#notatn">[VC: Атрибуты нотации]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#OneNotationPer">[VC: Одна нотация для каждого типа элемента]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#NoNotationEmpty">[VC: Отсутствие нотаций для пустого элемента]</A></TD></TR></TBODY>
<TBODY>

<TR vAlign=baseline>
<TD><A name=NT-Enumeration></A>[59]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>Enumeration</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'(' <A href="#NT-S">S</A>? <A href="#NT-Nmtoken">Nmtoken</A> (<A href="#NT-S">S</A>? '|' <A href="#NT-S">S</A>? <A href="#NT-Nmtoken">Nmtoken</A>)* <A href="#NT-S">S</A>? ')'</CODE></TD>
<TD><A href="#enum">[VC: Перечисление]</A></TD></TR></TBODY></TABLE>
<P>Атрибут <B>NOTATION</B> идентифицирует <A href="#dt-notation" title=Notation>нотацию</A>, которая была декларирована в DTD вместе с ассоциированными с нею системными и/или общими (public) идентификаторами, и которую следует использовать для интерпретации элемента, в котором был указан данный атрибут.</P>
<DIV class=constraint>
<P class=prefix><A name=notatn></A><B>Ограничение действительности: Атрибуты нотации</B></P>
<P>Значения указанного типа должны соответствовать одному из представленных в декларации названий <A href="#Notations"><CITE>нотации</CITE></A>. Все названия нотаций в декларации в свою очередь также должны быть декларированы.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=OneNotationPer></A><B>Ограничение действительности: Одна нотация для каждого типа элемента</B></P>
<P>Для типа элемента не может указываться более одного атрибута <B>NOTATION</B>.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=NoNotationEmpty></A><B>Ограничение действительности: Отсутствие нотаций для пустого элемента</B></P>
<P>Для сохранения <A href="#dt-compat" title="For Compatibility">совместимости</A>, для элемента, объявленного как <B>EMPTY</B>, атрибут типа <B>NOTATION</B> декларироваться не должен.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=enum></A><B>Ограничение действительности: Перечисление</B></P>
<P>Значения этого типа должны соответствовать одной из лексем <A href="#NT-Nmtoken">Nmtoken</A>, указанных в декларации.</P></DIV>
<P>Чтобы обеспечить <A href="#dt-interop" title="For interoperability">взаимодействие</A>, один и тот же <A href="#NT-Nmtoken">Nmtoken</A> должен появляться среди перечислимых типов атрибутов, относящихся к одному типу элементов, не более одного раза.</P></DIV>
<DIV class=div3>
<H4><A name=sec-attr-defaults></A>3.3.2 Значения атрибутов по умолчанию</H4>
<P><A href="#dt-attdecl" title="Attribute-List Declaration">Декларация атрибута</A> предоставляет сведения о том, обязательно ли присутствие в элементе данного атрибута и, если нет, то как XML процессор должен реагировать на отсутствие в документе декларированного атрибута.</P>
<H5>Значение атрибута по умолчанию</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-DefaultDecl></A>[60]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>DefaultDecl</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'#REQUIRED' |&nbsp;'#IMPLIED' </CODE></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><CODE>| (('#FIXED' S)? <A href="#NT-AttValue">AttValue</A>)</CODE></TD>
<TD><A href="#RequiredAttr">[VC: Обязательный атрибут]</A></TD></TR>

<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#defattrvalid">[VC: Допустимость значения по умолчанию для атрибута]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#CleanAttrVals">[WFC: Отсутствие символов &lt; в значениях атрибута]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#FixedAttr">[VC: Фиксированное значение атрибута по умолчанию]</A></TD></TR></TBODY></TABLE>
<P>Запись <B>#REQUIRED</B> в декларации атрибута означает, что этот атрибут должен присутствовать в элементе всегда, <B>#IMPLIED</B> означает, что значения по умолчанию для атрибута не предоставляется. [<A name=dt-default title="Attribute Default">Определение</A>: Если в декларации нет ни <B>#REQUIRED</B>, ни <B>#IMPLIED</B>, то значение <A href="#NT-AttValue">AttValue</A> содержит значение, декларированное <B>по умолчанию</B>. Ключевое слово <B>#FIXED</B> устанавливает, что данный атрибут обязан всегда иметь значение по умолчанию. Если было декларировано значение по умолчанию, то когда XML процессор не обнаруживает этого атрибута, он должен поступать так, словно атрибут присутствует и имеет значение, декларированное по умолчанию.]</P>
<DIV class=constraint>
<P class=prefix><A name=RequiredAttr></A><B>Ограничение действительности: Обязательный атрибут</B></P>
<P>Если для атрибута декларировано по умолчанию ключевое слово <B>#REQUIRED</B>, то в декларации списка атрибутов этот атрибут должен быть указан во всех элементах указанного типа.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=defattrvalid></A><B>Ограничение действительности: Допустимость значения по умолчанию для атрибута</B></P>
<P>Декларированное значение по умолчанию должно отвечать всем лексическим ограничениям для декларируемого типа атрибута.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=FixedAttr></A><B>Ограничение действительности: Фиксированное значение атрибута по умолчанию</B></P>
<P>Если атрибут по умолчанию имеет значение, декларированное с ключевым словом <B>#FIXED</B>, то все экземпляры данного атрибута должны соответствовать этому значению по умолчанию.</P></DIV>
<P>Примеры деклараций списка атрибутов:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;!ATTLIST termdef
          id      ID      #REQUIRED
          name    CDATA   #IMPLIED&gt;
&lt;!ATTLIST list
          type    (bullets|ordered|glossary)  "ordered"&gt;
&lt;!ATTLIST form
          method  CDATA   #FIXED "POST"&gt;</PRE></TD></TR></TBODY></TABLE></DIV>
<DIV class=div3>
<H4><A name=AVNormalize></A>3.3.3 Нормализация значения атрибута</H4>
<P>Перед передачей значения атрибута приложению или проверкой его корректности XML процессор должен выполнить нормализацию полученного значения атрибута по описанному далее алгоритму либо как-нибудь иначе, например передав это значение отдельному приложению, реализующему указанный алгоритм.</P>
<OL>
<LI><P>Все концы строк при выводе должны быть приведены к #xA, как было описано в главе <A href="#sec-line-ends"><B>2.11 Обработка концов строк</B></A>, поэтому остальная часть данного алгоритма оперирует текстом, уже нормализованным подобным образом.</P>
<LI><P>Начинается с нормализованного значения, состоящего из пустой строки.</P>
<LI><P>Для каждого символа, ссылки на сущность и ссылки на символ в ненормализованном значении атрибута, с первого до последнего, должны выполняться следующие действия:</P>
<UL>
<LI><P>Для ссылки на символ к нормализованное значение поместить символ, на который делалась ссылка.</P>
<LI><P>Для ссылки на сущность над текстом замены для указанной сущности рекурсивно выполнять третий шаг обсуждаемого алгоритма.</P>
<LI><P>В случае пробельного символа (#x20, #xD, #xA, #x9) в нормализованное значение помещать символ пробела (#x20).</P>
<LI><P>Остальные символы просто помещать в нормализованное значение.</P></LI></UL></LI></OL>
<P>Если тип атрибута - не CDATA, то следующим шагом XML процессор должен обработать нормализованное значение атрибута, отбросив начальные и заключительные символы пробела (#x20), а также заменив любую встреченную последовательность пробелов (#x20) одним символом пробела (#x20).</P>
<P>Заметим, что если ненормализованное значение атрибута имело ссылку на пробельный символ, иной нежели символ пробела (#x20), то его нормализованное значение будет содержать сам символ, на который делалась ссылка (т.е. #xD, #xA или #x9). Это иной случай, чем когда в ненормализованном значении атрибута обнаружен пробельный символ (а не просто ссылка на него), который в нормализованном значении будет заменен символом пробела (#x20), а также когда в ненормализованном значении имеется ссылка на сущность, чей текст замены содержит пробельный символ, который в ходе рекурсивной обработки тоже будет заменен в нормализованном значении пробелом (#x20).</P>
<P>Все атрибуты, для которых не было представлено декларации, должна обрабатываться непроверяющим процессором так, как если бы были декларированы <B>CDATA</B>.</P>
<P>Далее следуют примеры нормализации атрибутов. Даны следующие декларации:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;!ENTITY d "&amp;#xD;"&gt;
&lt;!ENTITY a "&amp;#xA;"&gt;
&lt;!ENTITY da "&amp;#xD;&amp;#xA;"&gt;</PRE></TD></TR></TBODY></TABLE>
<P>Атрибут, указанный в левой колонке следующей таблицы, в ходе нормализации будет преобразован в последовательность символов, представленную в средней колонке, если атрибут <CODE>a</CODE> был декларирован как <B>NMTOKENS</B>, или же в последовательность символов из правой колонки, если <CODE>a</CODE> декларирован как <B>CDATA</B>.</P>
<TABLE border=1 frame=border>
<THEAD>
<TR>
<TH>Спецификация атрибута</TH>
<TH>a является NMTOKENS</TH>
<TH>a является CDATA</TH></TR></THEAD>
<TBODY>
<TR>
<TD>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>a="

xyz"</PRE></TD></TR></TBODY></TABLE></TD>
<TD><CODE>x y z</CODE></TD>
<TD><CODE>#x20 #x20 x y z</CODE></TD></TR>
<TR>
<TD>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>a="&amp;d;&amp;d;A&amp;a;&amp;a;B&amp;da;"</PRE></TD></TR></TBODY></TABLE></TD>
<TD><CODE>A #x20 B</CODE></TD>
<TD><CODE>#x20 #x20 A #x20 #x20 B #x20 #x20</CODE></TD></TR>
<TR>
<TD>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>a=
"&amp;#xd;&amp;#xd;A&amp;#xa;&amp;#xa;B&amp;#xd;&amp;#xa;"</PRE></TD></TR></TBODY></TABLE></TD>
<TD><CODE>#xD #xD A #xA #xA B #xD #xA</CODE></TD>
<TD><CODE>#xD #xD A #xA #xA B #xD #xD</CODE></TD></TR></TBODY></TABLE>
<P>Заметим, что последний пример недействителен (хотя и корректен), если объявлено, что <CODE>a</CODE> имеет тип <B>NMTOKENS</B>.</P></DIV></DIV>
<DIV class=div2>
<H3><A name=sec-condition-sect></A>3.4 Условные секции</H3>
<P>[<A name=dt-cond-section title="conditional section">Определение</A>: <B>Условная секция</B> является фрагментом внешнего набора для <A href="#dt-doctype" title="Document Type Declaration">декларации типа документа</A>, которая включается или исключается из логической структуры DTD в зависимости от значения управляющего ею ключевого слова.]</P>
<H5>Условная секция</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-conditionalSect></A>[61]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>conditionalSect</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-includeSect">includeSect</A> | <A 
href="#NT-ignoreSect">ignoreSect</A> </CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-includeSect></A>[62]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>includeSect</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&lt;![' S? 'INCLUDE' S? '[' <A href="#NT-extSubsetDecl">extSubsetDecl</A> ']]&gt;' </CODE></TD>
<TD><I>/* */</I></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#condsec-nesting">[VC: Правильная вложенность условной секции/PE]</A></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-ignoreSect></A>[63]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>ignoreSect</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&lt;![' S? 'IGNORE' S? '[' <A href="#NT-ignoreSectContents">ignoreSectContents</A>* ']]&gt;'</CODE></TD>
<TD><I>/* */</I></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>

<TD></TD>
<TD></TD>
<TD><A href="#condsec-nesting">[VC: Правильная вложенность условной секции/PE]</A></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-ignoreSectContents></A>[64]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>ignoreSectContents</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-Ignore">Ignore</A> ('&lt;![' <A href="#NT-ignoreSectContents">ignoreSectContents</A> ']]&gt;' <A href="#NT-Ignore">Ignore</A>)*</CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-Ignore></A>[65]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>Ignore</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-Char">Char</A>* - (<A href="#NT-Char">Char</A>* ('&lt;![' | ']]&gt;') <A href="#NT-Char">Char</A>*) </CODE></TD></TR></TBODY></TABLE>
<DIV class=constraint>
<P class=prefix><A name=condsec-nesting></A><B>Ограничение действительности: Правильная вложенность условной секции/PE</B></P>
<P>Если какая-либо из конструкций условной секции ("<CODE>&lt;![</CODE>", "<CODE>[</CODE>" или "<CODE>]]&gt;</CODE>") находится в тексте замены для ссылки на сущность параметра, то в этом тексте должны находиться и все остальные конструкции.</P></DIV>
<P>Подобно внутреннему и внешнему наборам DTD, условная секция тоже может содержать одну или несколько полных деклараций, комментариев, инструкций обработки или же вложенных условных секций, перемежаемых пробельным символом.</P>
<P>Если ключевым словом условной секции является <B>INCLUDE</B>, то содержимое этой секции становится частью DTD. Если же ключевым словом условной секции является <B>IGNORE</B>, то содержимое секции логической частью DTD не становится. Если условная секция с ключевым словом <B>INCLUDE</B> была представлена в составе более крупной условной секции с ключевым словом <B>IGNORE</B>, то игнорируются обе внутренняя и внешняя секции. Содержимое игнорируемой условной секции обрабатывается путем изъятия всех символов, стоящих после скобки "<CODE>[</CODE>", следующей за ключевым словом, и до того как будет найден конец условной секции (исключение составляет условная секция, начинающияся с "<CODE>&lt;![</CODE>" и заканчивающаяся "<CODE>]]&gt;</CODE>"). При этом ссылки на сущности параметров не распознаются.</P>
<P>Если ключевое слово условной секции является ссылкой на сущность параметра, то данную сущность параметра необходимо заменить его содержимым до того, как процессор будет решать, включать или игнорировать данную условную секцию.</P>
<P>Например:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;!ENTITY % draft 'INCLUDE' &gt;
&lt;!ENTITY % final 'IGNORE' &gt;

&lt;![%draft;[
&lt;!ELEMENT book (comments*, title, body, supplements?)&gt;
]]&gt;
&lt;![%final;[
&lt;!ELEMENT book (title, body, supplements?)&gt;
]]&gt;</PRE></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div1>
<H2><A name=sec-physical-struct></A>4 Физические структуры</H2>
<P>[<A name=dt-entity title=Entity>Определение</A>: XML документ может состоять из одной или нескольких единиц размещения, называемых <B>сущностями</B>. Все сущности имеют <B>содержание</B> (исключение составляют <A href="#dt-docent" title="Document Entity">сущность документа</A> и <A href="#dt-doctype" title="Document Type Declaration">внешний набор DTD</A>) и идентифицируются по <B>имени</B>.] Каждый XML документ имеет ровно одну сущность, называемую <A href="#dt-docent" title="Document Entity">сущностью документа</A>, которая служит стартовой точкой для <A href="#dt-xml-proc" title="XML Processor">XML процессора</A> и может содержать документ целиком.</P>
<P>Сущности могут быть разобранными либо неразобранными. [<A name=dt-parsedent title="Text Entity">Определение</A>: Содержимое <B>разобранной сущности</B> (parsed entity) называется ее <A href="#dt-repltext" title="Replacement Text">текстом замены</A>. Этот <A href="#dt-text" title=Text>текст</A> рассматривается как составная часть документа.]</P>
<P>[<A name=dt-unparsed title="Unparsed Entity">Определение</A>: <B>Неразобранная сущность</B> (unparsed entity) - это ресурс, содержимым которого может быть <A href="#dt-text" title=Text>текст</A>, либо что-нибудь другое. Даже если это текст, это не обязательно должно быть XML. С каждой неразобранной сущностью связана <A href="#dt-notation" title=Notation>нотация</A>, идентифицируемая по имени. Помимо того, что XML процессор должен предоставить приложению идентификаторы сущности и ее нотацию, спецификация XML не предъявляет никаких требований к содержимому неразобранной сущности.]</P>
<P>Разобранные сущности вызываются по имени посредством  ссылки на сущность, а неразобранные сущности - по имени, указанному в значении атрибута <B>ENTITY</B> или <B>ENTITIES</B>.</P>
<P>[<A name=gen-entity title="general entity">Определение</A>: 
<B>Общая сущность</B> (general entity) - это сущность для использования в содержимом документа. В рамках данной спецификации общие сущности часто обозначаются неформальным термином <EM>сущность</EM> (entity), если это не приводит к двусмысленности.] [<A name=dt-PE title="Parameter entity">Определение</A>: <B>Сущность параметра</B> - это разобранная сущность для использования в DTD.] Существует два типа сущностей, использующих различный формат ссылки и распознаваемых в различном контексте. Более того, эти типы занимают разные пространства имен. Сущность параметра и общая сущность с тем же самым именем в действительности являются различными сущностями.</P>
<DIV class=div2>
<H3><A name=sec-references></A>4.1 Ссылки на символ и сущность</H3>
<P>[<A name=dt-charref title="Character Reference">Определение</A>: <B>Ссылка на символ</B> относится к определенному символу из набора ISO/IEC 10646, например, к такому символу, который невозможно получить непосредственно с имеющихся устройств ввода.]</P>
<H5>Ссылка на символ</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-CharRef></A>[66]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>CharRef</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&amp;#' [0-9]+ ';' </CODE></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><CODE>| '&amp;#x' [0-9a-fA-F]+ ';'</CODE></TD>
<TD><A href="#wf-Legalchar">[WFC: Допустимый символ]</A></TD></TR></TBODY></TABLE>
<DIV class=constraint>
<P class=prefix><A name=wf-Legalchar></A><B>Ограничение корректности: Допустимый символ</B></P>
<P>Символ, на который дается ссылка, должен отвечать сценарию <A href="#NT-Char" title="">Char</A>.</P></DIV>
<P>Если ссылка на символ начинается с комбинации "<CODE>&amp;#x</CODE>", то все последующие цифры и буквы вплоть до завершающего символа <CODE>;</CODE> образуют шестнадцатеричное представление для кода этого символа, указанного в ISO/IEC 10646. Если же ссылка начинается с комбинации "<CODE>&amp;#</CODE>", то все последующие цифры вплоть до завершающего <CODE>;</CODE> образуют десятичное представление кода символа.</P>
<P>[<A name=dt-entref title="Entity Reference">Определение</A>: <B>Ссылка на сущность</B> обращается к содержимому именованной сущности.] 
[<A name=dt-GERef title="General Entity Reference">Определение</A>: Ссылка на разобранные общие сущности использует в качестве ограничителей амперсант (<CODE>&amp;</CODE>) и символ точки с запятой (<CODE>;</CODE>).] 
[<A name=dt-PERef title="Parameter-entity reference">Определение</A>: <B>Ссылка на сущность параметра</B> используют в качестве ограничителей символы процента (<CODE>%</CODE>) и точки с запятой (<CODE>;</CODE>).]</P>
<H5>Ссылка на сущность</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-Reference></A>[67]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>Reference</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-EntityRef">EntityRef</A> | <A href="#NT-CharRef">CharRef</A></CODE></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-EntityRef></A>[68]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>EntityRef</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&amp;' <A href="#NT-Name">Name</A> ';'</CODE></TD>
<TD><A href="#wf-entdeclared">[WFC: Декларированная сущность]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#vc-entdeclared">[VC: Декларированная сущность]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#textent">[WFC: Разобранная сущность]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#norecursion">[WFC: Отсутствие рекурсии]</A></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-PEReference></A>[69]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>PEReference</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'%' <A href="#NT-Name">Name</A> ';'</CODE></TD>
<TD><A href="#vc-entdeclared">[VC: Декларированная сущность]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#norecursion">[WFC: Отсутствие рекурсии]</A></TD></TR>
<TR vAlign=baseline>
<TD></TD>
<TD></TD>
<TD></TD>
<TD></TD>
<TD><A href="#indtd">[WFC: В DTD]</A></TD></TR></TBODY></TABLE>
<DIV class=constraint>
<P class=prefix><A name=wf-entdeclared></A><B>Ограничение корректности: Декларированная сущность</B></P>
<P>Для документа без какого-либо DTD, для документа, имеющего лишь внутренний набор DTD, который не содержит ссылок на сущность параметра, а также для документа с декларацией "<CODE>standalone='yes'</CODE>": для каждого <A href="#NT-Name">Name</A> в ссылке на сущность, которая не попадает ни во внешний набор, ни в сущность параметра, должен иметься <A href="#dt-match" title=match>соответствующий</A> Name в одной из <A href="#sec-entity-decl"><CITE>деклараций сущности</CITE></A>, которые также не располагаются ни во внешнем наборе, ни в сущности параметра. Исключение составляют корректные (well-formed) документы, для которых нет нужды декларировать сущности <CODE>amp</CODE>, <CODE>lt</CODE>, <CODE>gt</CODE>, <CODE>apos</CODE> и <CODE>quot</CODE>. Декларация общей сущности должна предшествовать всем ссылкам на нее, которые могут иметься в декларации списка атрибутов в составе значения по умолчанию.</P>
<P>Заметим, что если сущность была декларирована во внешнем наборе или во внешней сущности параметра, то непроверяющий процессор <A href="#include-if-valid"><CITE>не обязан</CITE></A> читать и обрабатывать ее декларацию. Для подобных документов требование декларировать сущности становится условием корректности только если было указано <A href="#sec-rmd"><CITE>standalone='yes'</CITE></A>.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=vc-entdeclared></A><B>Ограничение действительности: Декларированная сущность</B></P>
<P>В документе с внешним набором или внешними сущностями параметра, который имеет декларацию "<CODE>standalone='no'</CODE>", лексема <A href="#NT-Name">Name</A> в ссылке на сущность должна <A href="#dt-match" title=match>соответствовать</A> Name в одной из <A href="#sec-entity-decl"><CITE>деклараций сущности</CITE></A>. Чтобы обеспечить взаимодействие, действительные документы должны декларировать сущности <CODE>amp</CODE>, <CODE>lt</CODE>, <CODE>gt</CODE>, <CODE>apos</CODE>, <CODE>quot</CODE> в том формате, который описан в главе <A href="#sec-predefined-ent"><B>4.6 Предопределенные сущности</B></A>. Декларация сущности параметра должна предшествовать любым ссылкам на нее. Точно так же декларация общей сущности должна предшествовать любым декларациям списка атрибута, содержащим значение по умолчанию с прямой либо косвенной ссылкой на эту общую сущность.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=textent></A><B>Ограничение корректности: Разобранная сущность</B></P>
<P>Ссылка на сущность не должна содержать имени <A href="#dt-unparsed" title="Unparsed Entity">неразобранной сущности</A>. Ссылаться на неразобранные сущности можно только в тех <A href="#dt-attrval" title="Attribute Value">значениях атрибута</A>, которые были декларированы как имеющие тип <B>ENTITY</B> или <B>ENTITIES</B>.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=norecursion></A><B>Ограничение корректности: Отсутствие рекурсии</B></P>
<P>Разобранная сущность не должна иметь рекурсивной ссылки саму на себя, прямой либо косвенной.</P></DIV>
<DIV class=constraint>
<P class=prefix><A name=indtd></A><B>Ограничение корректности: В DTD</B></P>
<P>Ссылка на сущность параметра может присутствовать только в <A href="#dt-doctype" title="Document Type Declaration">DTD</A>.</P></DIV>
<P>Примеры ссылок на символ и сущность:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>Type &lt;key&gt;less-than&lt;/key&gt; (&amp;#x3C;) to save options.
This document was prepared on &amp;docdate; and
is classified &amp;security-level;.</PRE></TD></TR></TBODY></TABLE>
<P>Пример ссылки на сущность параметра:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;!-- declare the parameter entity "ISOLat2"... --&gt;
&lt;!ENTITY % ISOLat2
         SYSTEM "http://www.xml.com/iso/isolat2-xml.entities" &gt;
&lt;!-- ... now reference it. --&gt;
%ISOLat2;</PRE></TD></TR></TBODY></TABLE></DIV>
<DIV class=div2>
<H3><A name=sec-entity-decl></A>4.2 Декларации сущности</H3>
<P>[<A name=dt-entdecl title="entity declaration">Определение</A>: Сущности декларируются следующим образом:]</P>
<H5>Декларация сущности</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-EntityDecl></A>[70]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>EntityDecl</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-GEDecl">GEDecl</A> | <A href="#NT-PEDecl">PEDecl</A></CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-GEDecl></A>[71]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>GEDecl</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&lt;!ENTITY' <A href="#NT-S">S</A> <A href="#NT-Name">Name</A> <A href="#NT-S">S</A> <A href="#NT-EntityDef">EntityDef</A> <A href="#NT-S">S</A>? '&gt;'</CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-PEDecl></A>[72]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>PEDecl</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&lt;!ENTITY' <A href="#NT-S">S</A> '%' <A href="#NT-S">S</A> <A href="#NT-Name">Name</A> <A href="#NT-S">S</A> <A href="#NT-PEDef">PEDef</A> <A href="#NT-S">S</A>? '&gt;'</CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-EntityDef></A>[73]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>EntityDef</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-EntityValue">EntityValue</A> | (<A href="#NT-ExternalID">ExternalID</A> <A href="#NT-NDataDecl">NDataDecl</A>?)</CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-PEDef></A>[74]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>PEDef</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-EntityValue">EntityValue</A> | <A href="#NT-ExternalID">ExternalID</A></CODE></TD></TR></TBODY></TABLE>
<P><A href="#NT-Name">Name</A> используется для идентификации сущности в соответствующей <A href="#dt-entref" title="Entity Reference">ссылке на сущность</A>, а также идентифицирует неразобранную сущность в значении атрибута <B>ENTITY</B> или <B>ENTITIES</B>. Если одна и та же сущность была декларирована несколько раз, то используется лишь первая из найденых деклараций. По выбору пользователя, XML процессор может генерировать предупреждение в случае, если имеет место многократное декларирование сущностей.</P>
<DIV class=div3>

<H4><A name=sec-internal-ent></A>4.2.1 Внутренние сущности</H4>
<P>[<A name=dt-internent title="Internal Entity Replacement Text">Определение</A>: Если сущность декларирована как <A href="#NT-EntityValue">EntityValue</A>, то она называется <B>внутренней сущностью</B>. Для этой сущности отсутствует размещаемый отдельно физический объект, а нее содержание определяется в декларации.] Заметим, что в <A href="#dt-litentval" title="Literal Entity Value">строковом значении сущности</A> для создания приемлемого <A href="#dt-repltext" title="Replacement Text">текста замены</A> может потребоваться некоторая обработка ссылок на сущность и символ: см. главу <A href="#intern-replacement"><B>4.5 Построение текста замены для внутренней сущности</B></A>.</P>
<P>Внутренняя сущность является <A href="#dt-parsedent" title="Text Entity">разобранной сущностью</A>.</P>
<P>Пример декларации внутренней сущности:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>

<TR>
<TD><PRE>&lt;!ENTITY Pub-Status "This is a pre-release of the specification."&gt;</PRE></TD></TR></TBODY></TABLE></DIV>
<DIV class=div3>
<H4><A name=sec-external-ent></A>4.2.2 Внешние сущности</H4>
<P>[<A name=dt-extent title="External Entity">Определение</A>: Если сущность не является внутренней, это <B>внешняя сущность</B>, декларируемая следующим образом:]</P>
<H5>Декларация внешней сущности</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-ExternalID></A>[75]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>ExternalID</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'SYSTEM' <A href="#NT-S">S</A> <A href="#NT-SystemLiteral">SystemLiteral</A></CODE></TD></TR>
<TR vAlign=baseline>

<TD></TD>
<TD></TD>
<TD></TD>
<TD><CODE>| 'PUBLIC' <A href="#NT-S">S</A> <A href="#NT-PubidLiteral">PubidLiteral</A> <A href="#NT-S">S</A> <A href="#NT-SystemLiteral">SystemLiteral</A> </CODE></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-NDataDecl></A>[76]&nbsp;&nbsp;&nbsp;</TD>

<TD><CODE>NDataDecl</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-S">S</A> 'NDATA' <A href="#NT-S">S</A> <A href="#NT-Name">Name</A></CODE></TD>
<TD><A href="#not-declared">[VC: Декларированная нотация]</A></TD></TR></TBODY></TABLE>
<P>Если в декларации присутствует <A href="#NT-NDataDecl">NDataDecl</A>, то это общая <A href="#dt-unparsed" title="Unparsed Entity">неразобранная сущность</A>. В противном случае, сущность является разобранной.</P>
<DIV class=constraint>
<P class=prefix><A name=not-declared></A><B>Ограничение действительности: Декларированная нотация</B></P>
<P><A href="#NT-Name">Name</A> должно соответствовать декларированному имени <A href="#dt-notation" title=Notation>нотации</A>.</P></DIV>
<P>[<A name=dt-sysid title="System Identifier">Определение</A>: Литерал <A href="#NT-SystemLiteral">SystemLiteral</A> называется <B>системным идентификатором</B> сущности. Он представляет собой ссылку URI (чье определение было дано в <A href="#rfc2396">[IETF RFC 2396]</A>, а затем дополнено в <A href="#rfc2732">[IETF RFC 2732]</A>), которую необходимо разобрать, чтобы получить данные на вход XML процессора и сформировать текст замены для указанной сущности.] Если идентификатор фрагмента (начинающийся с символа <CODE>#</CODE>) окажется в составе системного идентификатора, фиксируется ошибка. Для обработки относительных адресов URI в качестве базового берется адрес того источника, в котором была обнаружена декларация данной сущности, если обратное не было указано в ином источнике информации помимо данной спецификация (например, когда специальный тип XML элемента был определен в отдельном DTD или инструкция обработки определена спецификацией конкретного приложения). Таким образом, URI может вычисляться относительно <A href="#dt-docent" title="Document Entity">сущности документа</A>, относительно сущности, содержащей <A href="#dt-doctype" title="Document Type Declaration">внешний набор DTD</A>, или какой-либо другой <A href="#dt-extent" title="External Entity">внешней сущности параметра</A>.</P>
<P>Ссылки URI требуют кодирования и маскирования (escaping) определенных символов. Среди запрещенных символов числятся все не-ASCII символы, а также исключенные символы, перечисленные в главе 2.4 документа <A href="#rfc2396">[IETF RFC 2396]</A>. Исключение составляют символы решетки (<CODE>#</CODE>) и процента (<CODE>%</CODE>), а также символы квадратных скобок, разрешенные документом <A href="#rfc2732">[IETF RFC 2732]</A>. Запрещенные символы необходимо маскировать следующим образом:</P>
<OL>
<LI><P>Каждый из запрещенных символов преобразуется в один или два байта в кодировке UTF-8 <A href="#rfc2279">[IETF RFC 2279]</A>.</P>
<LI><P>Все октеты, относящиеся к запрещенным символам, маскируются с помощью соответствующего механизма URI (то есть преобразуются в формат <CODE>%</CODE><VAR>HH</VAR>, где HH - шестнадцатеричное представление для соответствующего байтового значения).</P>
<LI><P>Исходный символ замещается полученной последовательностью символов.</P></LI></OL>
<P>[<A name=dt-pubid title="Public identifier">Определение</A>: Помимо системного, внешний идентификатор может включать также и <B>публичный идентификатор</B>.] XML процессор, пытающийся извлечь содержимое сущности, может воспользоваться публичным идентификатором с тем, чтобы сгенерировать альтернативную ссылку URI. Если процессор не сможет сделать этого, он должен воспользоваться ссылкой URI, указанной в системном литерале. Перед проверкой все сочетания пробельных символов в публичном идентификаторе должны быть нормализированы, т.е. заменены на одиночные символы пробела (#x20), начальные и завершающие пробельные символы должны быть удалены.</P>
<P>Примеры деклараций внешней сущности:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;!ENTITY open-hatch
         SYSTEM "http://www.textuality.com/boilerplate/OpenHatch.xml"&gt;
&lt;!ENTITY open-hatch
         PUBLIC "-//Textuality//TEXT Standard open-hatch boilerplate//EN"
         "http://www.textuality.com/boilerplate/OpenHatch.xml"&gt;
&lt;!ENTITY hatch-pic
         SYSTEM "../grafix/OpenHatch.gif"
         NDATA gif &gt;</PRE></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div2>
<H3><A name=TextEntities></A>4.3 Разобранные сущности</H3>
<DIV class=div3>
<H4><A name=sec-TextDecl></A>4.3.1 Декларация текста</H4>
<P>Каждая внешняя разобранная сущность должна начинаться с <B>декларации текста</B>.</P>
<H5>Декларация текста</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-TextDecl></A>[77]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>TextDecl</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&lt;?xml' <A href="#NT-VersionInfo">VersionInfo</A>? <A href="#NT-EncodingDecl">EncodingDecl</A> <A href="#NT-S">S</A>? '?&gt;'</CODE></TD></TR></TBODY></TABLE>
<P>Декларация текста должна быть предоставлена строкой, а не ссылкой на разобранную сущность. Декларация текста не может находиться где-либо еще, кроме как в начале внешней разобранной сущности. Декларация текста во внешней разобранной сущности не является частью <A href="#dt-repltext" title="Replacement Text">текста замены</A> последней.</P></DIV>
<DIV class=div3>
<H4><A name=wf-entities></A>4.3.2 Корректные разобранные сущности</H4>
<P>Сущность документа является корректной, если она соответствует сценарию <A href="#NT-document">document</A>. Внешняя общая разобранная сущность является корректной, если она соответствует сценарию <A href="#NT-extParsedEnt">extParsedEnt</A>. Все внешние сущности параметров являются  корректными по определению.</P>
<H5>Корректная внешняя разобранная сущность</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-extParsedEnt></A>[78]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>extParsedEnt</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-TextDecl">TextDecl</A>? <A href="#NT-content">content</A></CODE></TD></TR></TBODY></TABLE>
<P>Внутренняя общая разобранная сущность является корректной если ее текст замены соответствует сценарию <A href="#NT-content">content</A>. Все внутренние сущности параметров являются корректными по определению.</P>
<P>Следствием корректности сущностей является правильная вложенность логических и физических структур в XML документе: <A href="#dt-stag" title=Start-Tag>начальный тэг</A> и <A href="#dt-etag" title="End Tag">конечный тэг</A>, <A href="#dt-empty" title=Empty>тэг пустого элемента</A>, <A href="#dt-element" title=Element>элемент</A>, <A href="#dt-comment" title=Comment>комментарий</A>, <A href="#dt-pi" title="Processing instruction">инструкция обработки</A>, <A href="#dt-charref" title="Character Reference">ссылка на символ</A>, а также <A href="#dt-entref" title="Entity Reference">ссылка на сущность</A> не могут начинаться в одной сущности и заканчиваться в другой.</P></DIV>
<DIV class=div3>
<H4><A name=charencoding></A>4.3.3 Кодирование символов в сущностях</H4>
<P>Каждая из внешних разобранных сущностей в XML документе для своих символов может использовать собственную кодировку. Все XML процессоры должны уметь читать сущности в кодировках UTF-8 и UTF-16. В данной спецификации термины "UTF-8" и "UTF-16" не имеют отношения к кодировкам символов с какими-либо иными названиями, даже если эти кодировки и названия очень похожи на UTF-8 или UTF-16.</P>
<P>Сущности с кодировкой UTF-16 должны начинаться с Byte Order Mark, описанного в Приложении F документа <A href="#ISO10646">[ISO/IEC 10646]</A>, Приложении H документа <A href="#ISO10646-2000">[ISO/IEC 10646-2000]</A>, главе 2.4 документа <A href="#Unicode">[Unicode]</A> и главе 2.7 документа <A href="#Unicode3">[Unicode3]</A> (символ ZERO WIDTH NO-BREAK SPACE, #xFEFF). Причем это сигнатура кодировки, а не фрагмент разметки или символьных данных XML документа. XML процессоры должны уметь с помощью этого символа различать документы в кодировках UTF-8 и UTF-16.</P>
<P>Хотя от XML процессор обязуется читать сущности в кодировках UTF-8 и UTF-16, в мире существует и иные кодировки. Поэтому XML процессору потребуется читать сущности и в других кодировках. В отсутствие внешней информации о кодировке символа (например, в MIME заголовке), разобранные сущности, представленные в иной кодировке, нежели UTF-8 и UTF-16, должны начинаться с декларации текста (см. главу <A href="#sec-TextDecl"><B>4.3.1 Декларация текста</B></A>), содержащей декларацию кодировки:</P>
<H5>Декларация кодировки</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-EncodingDecl></A>[80]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>EncodingDecl</CODE></TD>

<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-S">S</A> 'encoding' <A href="#NT-Eq">Eq</A> ('"' <A href="#NT-EncName">EncName</A> '"' | "'" <A href="#NT-EncName">EncName</A> "'" ) </CODE></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-EncName></A>[81]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>EncName</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>[A-Za-z] ([A-Za-z0-9._] | '-')*</CODE></TD>
<TD><I>/* Названия кодировок содержат только латинские символы */</I></TD></TR></TBODY></TABLE>
<P>В <A href="#dt-docent" title="Document Entity">сущности document</A> декларация кодировки является частью <A href="#dt-xmldecl" title="XML Declaration">декларации XML</A>. <A href="#NT-EncName">EncName</A> здесь - название используемой кодировки.</P>
<P>Значения "<CODE>UTF-8</CODE>", "<CODE>UTF-16</CODE>", "<CODE>ISO-10646-UCS-2</CODE>" и "<CODE>ISO-10646-UCS-4</CODE>" в декларации кодировки должны относиться к различным кодировкам и трансформациям из набора Unicode / ISO/IEC 10646, значения "<CODE>ISO-8859-1</CODE>", "<CODE>ISO-8859-2</CODE>", ... "<CODE>ISO-8859-</CODE><VAR>n</VAR>" (где <VAR>n</VAR> - номер раздела) - к соответствующим разделам кодировки ISO 8859, а значения "<CODE>ISO-2022-JP</CODE>", "<CODE>Shift_JIS</CODE>" и "<CODE>EUC-JP</CODE>" - к различным кодированным формам набора JIS X-0208-1997. Желательно, чтобы обращение к остальным кодировкам символов, зарегистрированным (как <EM>наборы символов</EM>) в Internet Assigned Numbers Authority <A href="#IANA">[IANA-CHARSETS]</A>, осуществлялось через официальное название. Для названий остальных кодировок должны использоваться префиксы "x-". XML процессоры должны игнорировать верхний и нижний регистр в названии кодировки. Процессор должен либо интерпретировать зарегистрированное в IANA название как указание на использование зарегистрированной под этом именем кодировки, либо считать кодировку неизвестной (разумеется, один процессор не обязуется поддерживать все кодировки, которые были зарегистрированы в IANA).</P>
<P>
Если сущность, содержащая декларацию кодировки, предоставлена XML процессору в иной кодировке, чем было заявлено в этой декларации, или сущность, которая не начинается ни с Byte Order Mark, ни с декларации кодировки, была представлена в иной кодировке, нежели UTF-8, а внешний транспортный протокол (например, HTTP или MIME) не предоставил требуемой информации, будет зафиксирована <A href="#dt-error" title=Error>ошибка</A>. Заметим, что поскольку ASCII - является подмножеством UTF-8, то ASCII сущности обычно не нуждаются в декларации кодировки.</P>
<P>Если <A href="#NT-TextDecl">TextDecl</A> обнаружена не в начале внешней сущности, фиксируется фатальная ошибка.</P>
<P>Если XML процессор сталкивается с сущностью, чью кодировку он не может обработать, фиксируется <A href="#dt-fatal" title="Fatal Error">фатальная ошибка</A>. Фатальная ошибка фиксируется также если было указано (значением по умолчанию, декларацией кодировки или протоколом верхнего уровня), что XML сущность использует определенную кодировку, но в то же время содержит последовательности октетов, которые для этой кодировки недопустимы. Ну и наконец, фатальная ошибка фиксируется, если XML сущность не имеет декларации кодировки, а ее содержимое не относится ни к UTF-8, ни к UTF-16.</P>
<P>Примеры деклараций текста, содержащих декларацию кодировки:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;?xml encoding='UTF-8'?&gt;
&lt;?xml encoding='EUC-JP'?&gt;</PRE></TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=div2>
<H3><A name=entproc></A>4.4 Обработка XML процессором сущностей и ссылок</H3>
<P>В представленной далее таблице собраны сведения о контексте, в котором могут появиться ссылки на символы, ссылки на сущность, а также вызовы неразобранных сущностей, и какая в каждом случае потребуется реакция от <A href="#dt-xml-proc" title="XML Processor">XML процессора</A>. Записи в левой колонке описывают распознаваемый контекст:</P>
<DL>
<DT class=label>Ссылка в содержимом
<DD><P>Ссылка в любом месте элемента в интервале между <A href="#dt-stag" title=Start-Tag>начальным</A> и <A href="#dt-etag" title="End Tag">конечным</A> тэгами. Соответствует незавершенному (nonterminal) <A href="#NT-content">контенту</A>.</P>
<DT class=label>Ссылка в значении атрибута
<DD><P>Ссылка либо в значении атрибута <A href="#dt-stag" title=Start-Tag>начального тэга</A>, либо в значении по умолчанию из <A href="#dt-attdecl" title="Attribute-List Declaration">декларации атрибута</A>. Соответствует незавершенному <A href="#NT-AttValue">AttValue</A>.</P>

<DT class=label>Значение атрибута
<DD><P>Это не ссылка, а лексема типа <A href="#NT-Name">Name</A>. Выступает либо как значение атрибута, декларированного с типом <B>ENTITY</B>, либо как одна из лексем, перечисленных через пробел в значении атрибута, декларированного с типом <B>ENTITIES</B>. </P>
<DT class=label>Ссылка в значении сущности
<DD><P>Ссылка из параметра или <A href="#dt-litentval" title="Literal Entity Value">строкового значения</A> внутренней сущности, находящихся в декларации сущности. Соответствует незавершенной <A href="#NT-EntityValue">EntityValue</A>.</P>
<DT class=label>Ссылка в DTD
<DD><P>Ссылка во внутреннем или внешнем наборе <A href="#dt-doctype" title="Document Type Declaration">DTD</A>, не попавшая в конструкции <A href="#NT-EntityValue">EntityValue</A>, <A href="#NT-AttValue">AttValue</A>, <A href="#NT-PI">PI</A>, <A href="#NT-Comment">Comment</A>, <A href="#NT-SystemLiteral">SystemLiteral</A>, <A href="#NT-PubidLiteral">PubidLiteral</A>, а также содержимое игнорируемой условной секции (см. главу <A href="#sec-condition-sect"><B>3.4 Условные секции</B></A>).</P>
</DD></DL>
<P></P>
<TABLE border=1 cellPadding=7 frame=border>
<TBODY align=middle>
<TR>
<TD rowSpan=2></TD>
<TD align=middle colSpan=4 vAlign=bottom>Тип сущности</TD>
<TD align=middle rowSpan=2>Символ</TD></TR>
<TR align=middle vAlign=bottom>
<TD>Параметр</TD>
<TD>Внутренняя общая</TD>
<TD>Внешняя разобранная общая</TD>
<TD>Неразобранная</TD></TR>
<TR align=middle vAlign=center>
<TD align=right>Ссылка в содержимом</TD>
<TD><A href="#not-recognized"><CITE>Не распознается</CITE></A></TD>
<TD><A href="#included"><CITE>Включается</CITE></A></TD>
<TD><A href="#include-if-valid"><CITE>Включается при проверке</CITE></A></TD>
<TD><A 
href="#forbidden"><CITE>Запрещен</CITE></A></TD>
<TD><A 
href="#included"><CITE>Включается</CITE></A></TD></TR>
<TR align=middle vAlign=center>
<TD align=right>Ссылка в значении атрибута</TD>
<TD><A href="#not-recognized"><CITE>Не распознается</CITE></A></TD>
<TD><A href="#inliteral"><CITE>Включен в строку</CITE></A></TD>
<TD><A href="#forbidden"><CITE>Запрещен</CITE></A></TD>
<TD><A href="#forbidden"><CITE>Запрещен</CITE></A></TD>
<TD><A href="#included"><CITE>Включается</CITE></A></TD></TR>
<TR align=middle vAlign=center>
<TD align=right>Значение атрибута</TD>
<TD><A href="#not-recognized"><CITE>Не распознается</CITE></A></TD>
<TD><A href="#forbidden"><CITE>Запрещен</CITE></A></TD>
<TD><A href="#forbidden"><CITE>Запрещен</CITE></A></TD>
<TD><A href="#notify"><CITE>Уведомление</CITE></A></TD>
<TD><A href="#not-recognized"><CITE>Не распознается</CITE></A></TD></TR>
<TR align=middle vAlign=center>
<TD align=right>Ссылка в значении сущности</TD>
<TD><A href="#inliteral"><CITE>Включается как строка</CITE></A></TD>
<TD><A href="#bypass"><CITE>Пропускается</CITE></A></TD>
<TD><A href="#bypass"><CITE>Пропускается</CITE></A></TD>
<TD><A href="#forbidden"><CITE>Запрещен</CITE></A></TD>
<TD><A href="#included"><CITE>Включается</CITE></A></TD></TR>
<TR align=middle vAlign=center>
<TD align=right>Ссылка в DTD</TD>
<TD><A href="#as-PE"><CITE>Включается как сущность параметра</CITE></A></TD>
<TD><A 
href="#forbidden"><CITE>Запрещен</CITE></A></TD>
<TD><A href="#forbidden"><CITE>Запрещен</CITE></A></TD>
<TD><A href="#forbidden"><CITE>Запрещен</CITE></A></TD>
<TD><A href="#forbidden"><CITE>Запрещен</CITE></A></TD></TR></TBODY></TABLE>
<DIV class=div3>
<H4><A name=not-recognized></A>4.4.1 Не распознается</H4>
<P>За пределами DTD символ <CODE>%</CODE> теряет специальное значение, поэтому в DTD могут появляться ссылки на сущность параметра, которые в <A href="#NT-content">содержимом</A> элемента не распознаются как разметка. Аналогично, названия неразобранных сущностей распознается только в значении соответствующим образом декларированного атрибута.</P></DIV>
<DIV class=div3>
<H4><A name=included></A>4.4.2 Включается</H4>
<P>[<A name=dt-include title=Include>Определение</A>: Сущность называется <B>включенной</B>, если вместо первоначальной ссылки был взят соответствующий <A href="#dt-repltext" title="Replacement Text">текст замены</A> и затем обработан так, словно это был фрагмент документа, находящийся в том месте, где располагалась исходная ссылка.] Текст замены может включать и <A href="#dt-chardata" title="Character Data">символьные данные</A>, и (за исключением сущностей параметров) <A href="#dt-markup" title=Markup>разметку</A>, которые должны распознаваться обычным образом. (Например, строка "<CODE>AT&amp;amp;T;</CODE>" преобразуется в "<CODE>AT&amp;T;</CODE>", а оставшийся в ней амперсант рассматривается не как ограничитель ссылки на сущность.) Ссылка на символ считается <B>включенной</B>, если вместо этой ссылки обрабатывается указываемый ею символ.</P></DIV>
<DIV class=div3>
<H4><A name=include-if-valid></A>4.4.3 Включается при проверке</H4>
<P>Если XML процессор обнаруживает ссылку на разобранную сущность, то для проверки <A href="#dt-valid" title=Validity>действительности</A> документа, он должен осуществить <A href="#dt-include" title=Include>подстановку</A> соответствующего текста замены. Если же сущность является внешней, и процессор не предпринимает попыток проверить XML документ, то он хотя и <A href="#dt-may" title=May>может</A>, но уже не обязан включать в документ текст замены для этой сущности. Если непроверяющий процессор не выполнял подстановки текста замены, он должен информировать приложение о том, что данную сущность он обнаружил, но не прочел.</P>
<P>Представленное положение исходит из того, что автоматическая подстановка, предоставляемая механизмом обработки сущностей SGML и XML, первоначально предназначалась для поддержки модульности при авторизации и не должен был использоваться другими приложениями, например для просмотра данного документа. Например, программа просмотра, встречаясь со ссылкой на внешнюю разобранную сущность, может использовать визуальную индикацию имеющейся ссылки, а саму сущность выводить на экран только по требованию пользователя.</P></DIV>
<DIV class=div3>
<H4><A name=forbidden></A>4.4.4 Запрещен</H4>
<P>Следующие ситуации относятся к разряду запрещенных и соответствуют <A href="#dt-fatal" title="Fatal Error">фатальной</A> ошибке:</P>
<UL>
<LI><P>появление ссылки на <A href="#dt-unparsed" title="Unparsed Entity">неразобранную сущность</A>.</P>
<LI><P>появление в DTD символа или ссылки на общую сущность за пределами <A href="#NT-EntityValue">EntityValue</A> и <A href="#NT-AttValue">AttValue</A>.</P>
<LI>
<P>ссылка на внешнюю сущность в значении атрибута.</P></LI></UL></DIV>
<DIV class=div3>
<H4><A name=inliteral></A>4.4.5 Включается как строка</H4>
<P>Если в значении атрибута обнаружена <A href="#dt-entref" title="Entity Reference">ссылка на сущность</A>, или в строчном значении сущности обнаружена ссылка на сущность параметра, то вместо этой ссылки обрабатывается ее <A href="#dt-repltext" title="Replacement Text">текст замены</A>, словно это был фрагмент документа, находившийся в том месте, где была обнаружена исходная ссылка. Исключение составляют символы одинарной или двойной кавычки, которые в тексте замены всегда воспринимаются как обычный символ данных, а не как завершение соответствующей строки. Например, следующий пример является корректным:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;!--  --&gt;
&lt;!ENTITY % YN '"Yes"' &gt;
&lt;!ENTITY WhatHeSaid "He said %YN;" &gt;</PRE></TD></TR></TBODY></TABLE>
<P>а этот - нет:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;!ENTITY EndAttr "27'" &gt;
&lt;element attribute='a-&amp;EndAttr;&gt;</PRE></TD></TR></TBODY></TABLE></DIV>
<DIV class=div3>
<H4><A name=notify></A>4.4.6 Уведомление</H4>
<P>Если название <A href="#dt-unparsed" title="Unparsed Entity">неразобранной сущности</A> было представлено в качестве лексемы в значении атрибута с декларированным типом <B>ENTITY</B> или <B>ENTITIES</B>, то проверяющий процессор должен передать приложению сведения о <A href="#dt-sysid" title="System Identifier">системных</A> и <A href="#dt-pubid" title="Public identifier">публичных</A> (если таковые имеются) идентификаторах данной сущности и связанной с нею <A href="#dt-notation" title=Notation>нотации</A>.</P></DIV>
<DIV class=div3>
<H4><A name=bypass></A>4.4.7 Пропускается</H4>
<P>Если в декларации сущности в поле <A href="#NT-EntityValue">EntityValue</A> обнаружена ссылка на общую сущность, она пропускается и оставляется без изменений.</P></DIV>
<DIV class=div3>
<H4><A name=as-PE></A>4.4.8 Включается как сущность параметра</H4>
<P>Поскольку это внешняя разобранная сущность, то потребность в подстановке сущности параметра должна появляться только <A href="#include-if-valid"><CITE>при проверке</CITE></A>. Если в DTD обнаружена ссылка на сущность параметра и выполняется подстановка ее <A href="#dt-repltext" title="Replacement Text">текста замены</A>, то к последнему в начале и конце должно быть приставлено по одному символу пробела (#x20). Этим гарантируется, что текст замены для сущностей параметров будет содержать полный набор грамматических лексем DTD. Описанное положение не относится к ссылкам на сущность параметра в значении сущности - ситуации, описанной в главе <A href="#inliteral"><B>4.4.5 Включается как строка</B></A>.</P></DIV></DIV>
<DIV class=div2>
<H3><A name=intern-replacement></A>4.5 Построение текста замены для внутренней сущности</H3>
<P>Обсуждая процедуру обработки внутренних сущностей, полезно различать два вида значений сущности. [<A name=dt-litentval title="Literal Entity Value">Определение</A>: <B>Строковое значение сущности</B> - это строка в кавычках, которая реально присутствует в декларации сущности и соответствует незавершенному <A href="#NT-EntityValue">EntityValue</A>.] [<A name=dt-repltext title="Replacement Text">Определение</A>: <B>Текст замены</B> - это содержимое сущности после подстановки всех ссылок на символ и сущность параметра.]</P>
<P>Строковое значение сущности, данное в декларации внутренней сущности (<A href="#NT-EntityValue">EntityValue</A>), может содержать ссылки на символ, на сущность параметра и на общую сущность. Такие ссылки должны целиком содержаться в строковом значении сущности. Реально <A href="#dt-include" title=Include>подставляемый</A> текст замены должен содержать <EM>текст замены</EM> для всех сущностей параметров и все символы, на которые делалась ссылка, причем в тех местах строкового значения сущности, где эти ссылки находились. Вместе с тем, ссылки на общие сущности должны оставаться без изменений. Например, даны следующие декларации:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
  <TBODY>
  <TR>
    <TD><PRE>&lt;!ENTITY % pub    "&amp;#xc9;ditions Gallimard" >
&lt;!ENTITY   rights "All rights reserved" >
&lt;!ENTITY   book   "La Peste: Albert Camus,
&amp;#xA9; 1947 %pub;. &amp;rights;" &gt;</PRE></TD></TR></TBODY></TABLE>
<P>тогда текст замены для сущности "<CODE>book</CODE>":</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
  <TBODY>
  <TR>
    <TD><PRE>La Peste: Albert Camus,
&copy; 1947 &Eacute;ditions Gallimard. &amp;rights;</PRE></TD></TR></TBODY></TABLE>
<P>Ссылка на общую сущность "<CODE>&amp;rights;</CODE>" должна расшифроваться только тогда, когда ссылка "<CODE>&amp;book;</CODE>" попадает в содержимое документа или значение атрибута.</P>

<P>Эти простые правила могут иметь сложные взаимоотношения. Детальное обсуждение сложного примера этого см. в Приложении <A href="#sec-entexpand"><B>D Обработка ссылок на сущность и символ</B></A>.</P></DIV>
<DIV class=div2>
<H3><A name=sec-predefined-ent></A>4.6 Предопределенные сущности</H3>
<P>[<A name=dt-escape title=escape>Определение</A>: Ссылки на сущность и символ могут быть использованы для <B>маскирования</B> левой угловой скобки, амперсанта и других ограничителей. Для этой цели сформирован целый набор общих сущностей (<CODE>amp</CODE>, <CODE>lt</CODE>, <CODE>gt</CODE>, <CODE>apos</CODE>, <CODE>quot</CODE>). Также может использоваться числовая ссылка на символ, которая должна обрабатываться как символьные данные и заменяться соответствующим символом сразу по обнаружении. Таким образом, числовые ссылки "<CODE>&amp;#60;</CODE>" и "<CODE>&amp;#38;</CODE>" могут быть использованы для маскирования символов <CODE>&lt;</CODE> и <CODE>&amp;</CODE>, встречающихся среди символьных данных.]</P>
<P>Независимо от того, были ли указанные сущности декларированы, они должны распознаваться всеми XML процессорами. Чтобы обеспечить <A href="#dt-interop" title="For interoperability">взаимодействие</A>, действительные XML документы перед использованием должны декларировать эти сущности, как и любые другие. Если сущности <CODE>lt</CODE> или <CODE>amp</CODE> были декларированы, то они должны быть объявлены как внутренняя сущность, чей текст замены - это ссылка на соответствующий маскируемый символ (знак меньше или амперсант). Для этих сущностей необходимо двойное маскирование, чтобы ссылка на них давала корректный результат. Если декларируются сущности <CODE>gt</CODE>, <CODE>apos</CODE> или <CODE>quot</CODE>, то они должны быть представлены как внутренняя сущность, текст замены которой - это одиночный маскируемый символ (либо ссылка на этот символ, двойное маскирование здесь хотя и допустимо, но необязательно). Например:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
  <TBODY>
  <TR>
    <TD><PRE>&lt;!ENTITY lt     "&amp;#38;#60;"&gt;
&lt;!ENTITY gt     "&amp;#62;"&gt;
&lt;!ENTITY amp    "&amp;#38;#38;"&gt;
&lt;!ENTITY apos   "&amp;#39;"&gt;
&lt;!ENTITY quot   "&amp;#34;"&gt;</PRE></TD></TR></TBODY></TABLE></DIV>
<DIV class=div2>
<H3><A name=Notations></A>4.7 Декларирование нотаций</H3>
<P>[<A name=dt-notation title=Notation>Определение</A>: <B>Нотация</B> идентифицирует по имени формат <A href="#dt-extent" title="External Entity">неразобранных сущностей</A>, формат элементов, обеспечивающих атрибут нотации, или же приложение, которому адресуется <A href="#dt-pi" title="Processing instruction">инструкция обработки</A>.]</P>
<P>[<A name=dt-notdecl title="Notation Declaration">Определение</A>: <B>Декларация нотации</B> дает  этой нотации название, используемое при декларировании сущности, списка атрибутов или в спецификациях атрибутов, а также внешний идентификатор этой нотации, который может позволить XML процессору или его клиентскому приложению найти вспомогательную программу, способную обработать данные, представленные в этой нотации.]</P>
<H5>Декларации нотации</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-NotationDecl></A>[82]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>NotationDecl</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'&lt;!NOTATION' <A href="#NT-S">S</A> <A href="#NT-Name">Name</A> <A href="#NT-S">S</A> (<A href="#NT-ExternalID">ExternalID</A> | <A href="#NT-PublicID">PublicID</A>) <A href="#NT-S">S</A>? '&gt;'</CODE></TD>
<TD><A href="#UniqueNotationName">[VC: Уникальность имени нотации]</A></TD></TR></TBODY>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-PublicID></A>[83]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>PublicID</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>'PUBLIC' <A href="#NT-S">S</A> <A href="#NT-PubidLiteral">PubidLiteral</A> </CODE></TD></TR></TBODY></TABLE>
<DIV class=constraint>
<P class=prefix><A name=UniqueNotationName></A><B>Ограничение действительности: Уникальность имени нотации</B></P>
<P>Любое <A href="#NT-Name">Name</A> может быть использовано только в одной декларации.</P></DIV>
<P>XML процессор должен передать приложению название и внешний идентификатор(ы) всех нотаций, которые были декларированы и на которые имеется ссылка в значениях атрибутов, определениях атрибутов, либо декларациях сущностей. Кроме того, процессор может преобразовывать внешний идентификатор в <A href="#dt-sysid" title="System Identifier">системный идентификатор</A>, имя файла или иную информацию, необходимую приложению чтобы вызвать процессор для обработки данных в описываемой нотации. (Впрочем, ситуация, когда XML документ декларирует и ссылается на нотацию, для которой не имеется соответствующего процессора обработки в системе, где работают XML процессор или приложение ошибочной не будет.)</P></DIV>
<DIV class=div2>
<H3><A name=sec-doc-entity></A>4.8 Сущность документа</H3>
<P>[<A name=dt-docent title="Document Entity">Определение</A>: <B>Сущность документа</B> выступает в качестве корня дерева сущностей, а также как стартовая точка для <A href="#dt-xml-proc" title="XML Processor">XML процессора</A>.] В данной спецификации не конкретизируется, каким именно образом XML процессор должен находить сущность документа - в отличие от других сущностей, сущность документа не имеет имени и вполне может появиться во входном потоке процессора вообще без какого-либо идентификатора.</P></DIV></DIV>
<DIV class=div1>
<H2><A name=sec-conformance></A>5 Соответствие</H2>
<DIV class=div2>
<H3><A name=proc-types></A>5.1 Проверяющие и непроверяющие процессоры</H3>
<P><A href="#dt-xml-proc" title="XML Processor">XML процессоры</A>, отвечающие требованиям спецификации, делятся на два класса: проверяющие и непроверяющие.</P>
<P>И проверяющие, и непроверяющие процессоры должны докладывать о нарушениях правил корректности данной спецификации, выявленных в содержимом <A href="#dt-docent" title="Document Entity">сущности документа</A> и содержимом других читаемых <A href="#dt-parsedent" title="Text Entity">разобранных сущностей</A>.</P>
<P>[<A name=dt-validating title="Validating Processor">Определение</A>: <B>Проверяющие процессоры</B> должны сообщить (по выбору пользователя) о нарушении ограничений, сформулированных в декларациях <A href="#dt-doctype" title="Document Type Declaration">DTD</A>, а также невозможности соответствовать критериям  действительности, представленным в данной спецификации.] Чтобы выполнить это тренбование, проверяющий XML процессор должен прочесть и обработать весь DTD и все внешние разобранные сущности, на которые в данном документе делается ссылка.</P>
<P>Для проверки корректности от непроверяющего процессора требется проанализировать лишь <A href="#dt-docent" title="Document Entity">сущность документа</A>, включая полный внутренний набор DTD. [<A name=dt-use-mdecl title="Process Declarations">Определение</A>: Хотя непроверяющий процессор и не обязан проверять действительность документа, он должен <B>обработать</B> все декларации, найденные во внутреннем наборе DTD, а также во всех прочитанных им сущностях параметров, но только до первой ссылки на сущность параметра, которую он уже <EM>не</EM> должен читать. Иными словами, он должен использовать сведения из этих деклараций для <A href="#AVNormalize"><CITE>нормализации</CITE></A> значений атрибутов, <A href="#included"><CITE>подстановки</CITE></A> текста замены для внутренних сущностей и предоставления <A href="#sec-attr-defaults"><CITE>значений по умолчанию для атрибутов</CITE></A>.] За исключением случая <CODE>standalone="yes"</CODE>, процессорам запрещается <A href="#dt-use-mdecl" title="Process Declarations">обрабатывать</A> <A href="#dt-entdecl" title="entity declaration">декларации сущностей</A> и <A href="#dt-attdecl" title="Attribute-List Declaration">списков атрибутов</A>, расположенные после ссылки на сущность параметра, последняя не читается, поскольку может содержать переопределяющие декларации.</P></DIV>
<DIV class=div2>
<H3><A name=safe-behavior></A>5.2 Использование XML процессоров</H3>
<P>Поведение проверяющего XML процессора в значительной мере предсказуемо: он должен почесть все части документа и сообщить обо всех нарушениях правил корректности и действительности. Меньшее требуется от непроверяющего процессора: он не должен читать какие-либо части документа кроме сущности документа. Для использования XML процессоров существенное значение могут иметь два эффекта:</P>
<UL>
<LI><P>Непроверяющим процессором могут не распознаваться определенные ошибки корректности, особенно те, которые требуют прочтения внешних сущностей. Примером здесь служит нарушение ограничений <A href="#wf-entdeclared"><CITE>Entity Declared</CITE></A>, <A href="#textent"><CITE>Parsed Entity</CITE></A> и <A href="#norecursion"><CITE>No Recursion</CITE></A>, а также некоторые варианты, описанные в качестве <A href="#forbidden"><CITE>запрещенных</CITE></A> в главе <A href="#entproc"><B>4.4 Обработка XML процессором сущностей и ссылок</B></A>.</P>
<LI><P>Информация, передаваемая процессором приложению, может меняться в зависимости от того, прочел ли этот процессор параметры и внешние сущности. Например, непроверяющий процессор может не выполнить <A href="#AVNormalize"><CITE>нормализации</CITE></A> значений атрибутов, не осуществить <A href="#included"><CITE>подстановки</CITE></A> текста замены для внутренних сущностей или не предоставить <A href="#sec-attr-defaults"><CITE>значений по умолчанию для атрибутов</CITE></A>, если это связано с прочтением деклараций во внешних сущностях и сущностях параметров.</P></LI></UL>
<P>Для достижения максимальной надежности взаимодействия различных XML процессоров, приложения, использующие непроверяющий процессор, не должны обращаться к функциям этих процессоров, не являющимся необязательными. Приложения, которым необходимы такие возможности, как использование атрибутов по умолчанию или внутренние сущности, декларированные во внешней сущности, должны пользоваться проверяющими XML процессорами.</P></DIV></DIV>
<DIV class=div1>
<H2><A name=sec-notation></A>6 Нотация</H2>
<P>Формальная грамматика языка XML строится в данной спецификации с помощью простой нотации Extended Backus-Naur Form (EBNF). Каждое правило в грамматике определяет один символ (symbol) в следующем формате:</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>symbol ::= expression</PRE></TD></TR></TBODY></TABLE>
<P>Каждый символ, являющийся оригинальным в языке нормативов, пишется с заглавной буквы. В остальных случаях, первая буква символа прописная. Строки текста помещаются в кавычки.</P>
<P>В правой части правила представлено выражение, использующее следующие конструкции, сопоставляемые строкам из одного или нескольких символов:</P>
<DL>
<DT class=label><CODE>#xN</CODE> 
<DD><P>где <CODE>N</CODE> - шестнадцатеричное целое число. Данное выражение соответствует символу в кодировке ISO/IEC 10646, каноническое значение кода (UCS-4) которого как беззнаковое целое число, имеет указанное значение. Количество ведущих нулей в формате <CODE>#xN</CODE> значения не имеет. Количество ведущих нулей в соответствующем значении кода определяется используемой кодировкой символов и для XML значения не имеет.</P>
<DT class=label><CODE>[a-zA-Z]</CODE>, <CODE>[#xN-#xN]</CODE> 
<DD><P>соответствует любому <A href="#NT-Char">Char</A>, чье значение попадает в указанный диапазон(ы) (включительно).</P>
<DT class=label><CODE>[abc]</CODE>, <CODE>[#xN#xN#xN]</CODE> 
<DD><P>соответствует любому <A href="#NT-Char">Char</A>, чье значение имеется среди перечисленных символов. В пределах одного набора скобок перечисления и диапазоны могут сочетаться.</P>
<DT class=label><CODE>[^a-z]</CODE>, <CODE>[^#xN-#xN]</CODE> 
<DD><P>соответствует любому <A href="#NT-Char">Char</A>, чье значение <EM>не входит</EM> в указанный диапазон.</P>
<DT class=label><CODE>[^abc]</CODE>, <CODE>[^#xN#xN#xN]</CODE> 


<DD><P>соответствует любому <A href="#NT-Char">Char</A>, чьего значение нет среди указанных символов. В пределах одного набора скобок перечисления и диапазоны запрещенных значений могут сочетаться.</P>

<DT class=label><CODE>"string"</CODE> 
<DD><P>соответствует строке символов, <A href="#dt-match" title=match>совпадающей</A> со строкой, представленной в двойных кавычках.</P>
<DT class=label><CODE>'string'</CODE> 
<DD><P>соответствует строке символов, <A href="#dt-match" title=match>совпадающей</A> со строкой, представленной в одинарных кавычках.</P></DD></DL>
<P>Представленные символы могут комбинироваться в более сложные шаблоны следующим образом (где <CODE>A</CODE> и <CODE>B</CODE> представляют собой простые выражения):</P>
<DL>
<DT class=label>(<CODE>выражение</CODE>) 
<DD><P>данное <CODE>выражение</CODE> обрабатывается как единое целое и может комбинироваться с другими выражениями в соответствии с дальнейшим перечнем.</P>
<DT class=label><CODE>A?</CODE> 
<DD><P>соответствует <CODE>A</CODE> или ничему. Необязательная единица <CODE>A</CODE>.</P>
<DT class=label><CODE>A B</CODE> 
<DD><P>соответствует <CODE>A</CODE>, за которым следует <CODE>B</CODE>. Данный оператор имеет более высокий приоритет, чем оператор альтернативы. Таким образом, <CODE>A B | C D</CODE> эквивалентно <CODE>(A B) | (C D)</CODE>.</P>
<DT class=label><CODE>A | B</CODE> 
<DD><P>соответствует <CODE>A</CODE> или <CODE>B</CODE>, но не обоим сразу.</P>
<DT class=label><CODE>A - B</CODE> 
<DD><P>любая строка, которая соответствует шаблону <CODE>A</CODE>, но не соответствует <CODE>B</CODE>.</P>
<DT class=label><CODE>A+</CODE> 
<DD><P>соответствует одному или нескольким экземплярам <CODE>A</CODE>. Конкатенация имеет более высокий приоритет, чем оператор альтернативы. Таким образом, <CODE>A+ | B+</CODE> эквивалентно <CODE>(A+) | (B+)</CODE>.</P>
<DT class=label><CODE>A*</CODE> 
<DD><P>соответствует нулю, одному или нескольким экземплярам <CODE>A</CODE>. Конкатенация имеет более высокий приоритет, чем оператор альтернативы. Таким образом, <CODE>A* | B*</CODE> эквивалентно <CODE>(A*) | (B*)</CODE>.</P></DD></DL>
<P>Остальные нотации, используемые в сценариях: </P>
<DL>
<DT class=label><CODE>/* ... */</CODE> 
<DD><P>комментарий.</P>
<DT class=label><CODE>[ wfc: ... ]</CODE> 
<DD><P>ограничение корректности. Идентифицирует по имени ограничение для <A href="#dt-wellformed" title=Well-Formed>корректных</A> документов, связанное с неком сценарием.</P>
<DT class=label><CODE>[ vc: ... ]</CODE> 
<DD><P>ограничение действительности. Идентифицирует по имени ограничение для <A href="#dt-valid" title=Validity>действительных</A> документов, связанное с неким сценарием.</P></DD></DL>
<P></P></DIV></DIV>
<DIV class=back>
<DIV class=div1>
<H2><A name=sec-bibliography></A>A Ссылки</H2>
<DIV class=div2>
<H3><A name=sec-existing-stds></A>A.1 Нормативные ссылки</H3>
<DL>
<DT class=label><A name=IANA></A>IANA-CHARSETS 
<DD>(Internet Assigned Numbers Authority) <CITE>Официальные названия для наборов символов</CITE>, редактор Keld Simonsen и другие. См. <A href="ftp://ftp.isi.edu/in-notes/iana/assignments/character-sets">ftp://ftp.isi.edu/in-notes/iana/assignments/character-sets</A>. 
<DT class=label><A name=RFC1766></A>IETF RFC 1766 
<DD>IETF (Internet Engineering Task Force). <CITE>RFC 1766: Тэги для идентификации языков</CITE>, редактор H. Alvestrand. 1995. (см. <A href="http://www.ietf.org/rfc/rfc1766.txt">http://www.ietf.org/rfc/rfc1766.txt</A>.) 
<DT class=label><A name=ISO10646></A>ISO/IEC 10646 
<DD>ISO (International Organization for Standardization). <CITE>ISO/IEC 10646-1993 (E). Information technology - Universal Multiple-Octet Coded Character Set (UCS) - Part 1: Architecture and Basic Multilingual Plane.</CITE> [Geneva]: International Organization for Standardization, 1993 (плюс Приложения с AM 1 по AM 7). 
<DT class=label><A name=ISO10646-2000></A>ISO/IEC 10646-2000 
<DD>ISO (International Organization for Standardization). <CITE>ISO/IEC 
10646-1:2000. Information technology -- Universal Multiple-Octet Coded Character Set (UCS) -- Part 1: Architecture and Basic Multilingual Plane.</CITE> [Geneva]: International Organization for Standardization, 2000. 
<DT class=label><A name=Unicode></A>Unicode 
<DD>The Unicode Consortium. <EM>Стандарт Unicode, версия 2.0.</EM> Reading, Mass.: Addison-Wesley Developers Press, 1996. 
<DT class=label><A name=Unicode3></A>Unicode3 
<DD>The Unicode Consortium. <EM>Стандарт Unicode, версия 3.0.</EM> Reading, Mass.: Addison-Wesley Developers Press, 2000. ISBN 0-201-61633-5. </DD></DL></DIV>
<DIV class=div2>
<H3><A name=null></A>A.2 Остальные ссылки</H3>
<DL>
<DT class=label><A name=Aho></A>Aho/Ullman 
<DD>Aho, Alfred V., Ravi Sethi, and Jeffrey D. Ullman. <CITE>Compilers: Principles, Techniques, and Tools</CITE>. Reading: Addison-Wesley, 1986, откорректированный репринт 1988. 
<DT class=label><A name=Berners-Lee></A>Berners-Lee et al. 
<DD>Berners-Lee, T., R. Fielding, and L. Masinter. <CITE>Uniform Resource Identifiers (URI): Generic Syntax and Semantics</CITE>. 1997. (В разработке, см. обновления к RFC1738.) 
<DT class=label><A name=ABK></A>Br&uuml;ggemann-Klein 
<DD>Br&uuml;ggemann-Klein, Anne. Formal Models in Document Processing. Habilitationsschrift. Faculty of Mathematics at the University of Freiburg, 
1993. (см. <A href="ftp://ftp.informatik.uni-freiburg.de/documents/papers/brueggem/habil.ps">ftp://ftp.informatik.uni-freiburg.de/documents/papers/brueggem/habil.ps</A>.) 
<DT class=label><A name=ABKDW></A>Br&uuml;ggemann-Klein and Wood 
<DD>Br&uuml;ggemann-Klein, Anne, and Derick Wood. <CITE>Deterministic Regular Languages</CITE>. Universit&auml;t Freiburg, Institut f&uuml;r Informatik, Bericht 38, Oktober 1991. Extended abstract in A. Finkel, M. Jantzen, Hrsg., STACS 1992, S. 173-184. Springer-Verlag, Berlin 1992. Lecture Notes in Computer Science 577. Название полной версии: <CITE>One-Unambiguous Regular Languages</CITE> in Information and Computation 140 (2): 229-253, February 1998. 
<DT class=label><A name=Clark></A>Clark 
<DD>James Clark. Сравнение SGML и XML. См. <A href="http://www.w3.org/TR/NOTE-sgml-xml-971215">http://www.w3.org/TR/NOTE-sgml-xml-971215</A>. 
<DT class=label><A name=IANA-LANGCODES></A>IANA-LANGCODES 
<DD>(Internet Assigned Numbers Authority) <CITE>Registry of Language Tags</CITE>, редактор Keld Simonsen и другие (см. <A href="http://www.isi.edu/in-notes/iana/assignments/languages/">http://www.isi.edu/in-notes/iana/assignments/languages/</A>.) 
<DT class=label><A name=RFC2141></A>IETF RFC2141 
<DD>IETF (Internet Engineering Task Force). <EM>RFC 2141: Синтаксис URN</EM>, редактор R. Moats. 1997. (см. <A href="http://www.ietf.org/rfc/rfc2141.txt">http://www.ietf.org/rfc/rfc2141.txt</A>.) 
<DT class=label><A name=rfc2279></A>IETF RFC 2279 
<DD>IETF (Internet Engineering Task Force). <CITE>RFC 2279: UTF-8, a transformation format of ISO 10646</CITE>, редактор F. Yergeau, 1998. (см. <A href="http://www.ietf.org/rfc/rfc2279.txt">http://www.ietf.org/rfc/rfc2279.txt</A>.) 
<DT class=label><A name=rfc2376></A>IETF RFC 2376 
<DD>IETF (Internet Engineering Task Force). <CITE>RFC 2376: XML Media Types</CITE>. редакция E. Whitehead, M. Murata. 1998. (см. <A 
href="http://www.ietf.org/rfc/rfc2376.txt">http://www.ietf.org/rfc/rfc2376.txt</A>.) 
<DT class=label><A name=rfc2396></A>IETF RFC 2396 
<DD>IETF (Internet Engineering Task Force). <CITE>RFC 2396: Uniform Resource Identifiers (URI): Generic Syntax</CITE>. T. Berners-Lee, R. Fielding, L. Masinter. 1998. (см. <A href="http://www.ietf.org/rfc/rfc2396.txt">http://www.ietf.org/rfc/rfc2396.txt</A>.) 
<DT class=label><A name=rfc2732></A>IETF RFC 2732 
<DD>IETF (Internet Engineering Task Force). <CITE>RFC 2732: Format for Literal IPv6 Addresses in URL's</CITE>. R. Hinden, B. Carpenter, L. Masinter. 1999. (см. <A href="http://www.ietf.org/rfc/rfc2732.txt">http://www.ietf.org/rfc/rfc2732.txt</A>.) 
<DT class=label><A name=rfc2781></A>IETF RFC 2781 
<DD>IETF (Internet Engineering Task Force). <EM>RFC 2781: UTF-16, an encoding of ISO 10646</EM>, редакция P. Hoffman, F. Yergeau. 2000. (см. <A 
href="http://www.ietf.org/rfc/rfc2781.txt">http://www.ietf.org/rfc/rfc2781.txt</A>.) 
<DT class=label><A name=ISO639></A>ISO 639 
<DD>(International Organization for Standardization). <CITE>ISO 639:1988 (E). Code for the representation of names of languages.</CITE> [Geneva]: International Organization for Standardization, 1988. 
<DT class=label><A name=ISO3166></A>ISO 3166 
<DD>(International Organization for Standardization). <CITE>ISO 3166-1:1997 (E). Codes for the representation of names of countries and their subdivisions -- Part 1: Country codes</CITE> [Geneva]: International Organization for Standardization, 1997. 
<DT class=label><A name=ISO8879></A>ISO 8879 
<DD>ISO (International Organization for Standardization). <CITE>ISO 8879:1986(E). Information processing -- Text and Office Systems -- Standard Generalized Markup Language (SGML).</CITE> Первая редакция -- 1986-10-15. [Geneva]: International Organization for Standardization, 1986. 
<DT class=label><A name=ISO10744></A>ISO/IEC 10744 
<DD>ISO (International Organization for Standardization). <CITE>ISO/IEC 10744-1992 (E). Information technology -- Hypermedia/Time-based Structuring Language (HyTime). </CITE>[Geneva]: International Organization for Standardization, 1992. <EM>Extended Facilities Annexe.</EM> [Geneva]: International Organization for Standardization, 1996. 
<DT class=label><A name=websgml></A>WEBSGML 
<DD>ISO (International Organization for Standardization). <CITE>ISO 8879:1986 TC2. Information technology -- Document Description and Processing Languages. </CITE>[Geneva]: International Organization for Standardization, 1998. (см. <A href="http://www.sgmlsource.com/8879rev/n0029.htm">http://www.sgmlsource.com/8879rev/n0029.htm</A>.) 
<DT class=label><A name=xml-names></A>XML Names 
<DD>Tim Bray, Dave Hollander, and Andrew Layman, editors. <CITE>Namespaces in XML</CITE>. Textuality, Hewlett-Packard, and Microsoft. World Wide Web 
Consortium, 1999. (см. <A href="http://www.w3.org/TR/REC-xml-names/">http://www.w3.org/TR/REC-xml-names/</A>.)</DD></DL></DIV></DIV>
<DIV class=div1>
<H2><A name=CharClasses></A>B Классы символов</H2>
<P>Приводимые далее определения были представлены в стандарте Unicode. Все символы делятся на базовые символы (BaseChar, наряду с прочим сюда включены буквы латинского алфавита), идеографические символы (Ideographic), комбинированные символы (CombiningChar, в последнюю группу попадает также большинство диакритических символов). Выделяются также цифры (Digit) и расширения (Extender).</P>
<H5>Символы</H5>
<TABLE class=scrap>
<TBODY>
<TR vAlign=baseline>
<TD><A name=NT-Letter></A>[84]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>Letter</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE><A href="#NT-BaseChar">BaseChar</A> 
| <A href="#NT-Ideographic">Ideographic</A></CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-BaseChar></A>[85]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>BaseChar</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>[#x0041-#x005A] |&nbsp;[#x0061-#x007A] |&nbsp;[#x00C0-#x00D6] 
|&nbsp;[#x00D8-#x00F6] |&nbsp;[#x00F8-#x00FF] |&nbsp;[#x0100-#x0131] 
|&nbsp;[#x0134-#x013E] |&nbsp;[#x0141-#x0148] |&nbsp;[#x014A-#x017E] 
|&nbsp;[#x0180-#x01C3] |&nbsp;[#x01CD-#x01F0] |&nbsp;[#x01F4-#x01F5] 

|&nbsp;[#x01FA-#x0217] |&nbsp;[#x0250-#x02A8] |&nbsp;[#x02BB-#x02C1] 
|&nbsp;#x0386 |&nbsp;[#x0388-#x038A] |&nbsp;#x038C |&nbsp;[#x038E-#x03A1] 
|&nbsp;[#x03A3-#x03CE] |&nbsp;[#x03D0-#x03D6] |&nbsp;#x03DA |&nbsp;#x03DC 
|&nbsp;#x03DE |&nbsp;#x03E0 |&nbsp;[#x03E2-#x03F3] |&nbsp;[#x0401-#x040C] 
|&nbsp;[#x040E-#x044F] |&nbsp;[#x0451-#x045C] |&nbsp;[#x045E-#x0481] 
|&nbsp;[#x0490-#x04C4] |&nbsp;[#x04C7-#x04C8] |&nbsp;[#x04CB-#x04CC] 
|&nbsp;[#x04D0-#x04EB] |&nbsp;[#x04EE-#x04F5] |&nbsp;[#x04F8-#x04F9] 
|&nbsp;[#x0531-#x0556] |&nbsp;#x0559 |&nbsp;[#x0561-#x0586] 
|&nbsp;[#x05D0-#x05EA] |&nbsp;[#x05F0-#x05F2] |&nbsp;[#x0621-#x063A] 
|&nbsp;[#x0641-#x064A] |&nbsp;[#x0671-#x06B7] |&nbsp;[#x06BA-#x06BE] 
|&nbsp;[#x06C0-#x06CE] |&nbsp;[#x06D0-#x06D3] |&nbsp;#x06D5 
|&nbsp;[#x06E5-#x06E6] |&nbsp;[#x0905-#x0939] |&nbsp;#x093D 
|&nbsp;[#x0958-#x0961] |&nbsp;[#x0985-#x098C] |&nbsp;[#x098F-#x0990] 
|&nbsp;[#x0993-#x09A8] |&nbsp;[#x09AA-#x09B0] |&nbsp;#x09B2 
|&nbsp;[#x09B6-#x09B9] |&nbsp;[#x09DC-#x09DD] |&nbsp;[#x09DF-#x09E1] 

|&nbsp;[#x09F0-#x09F1] |&nbsp;[#x0A05-#x0A0A] |&nbsp;[#x0A0F-#x0A10] 
|&nbsp;[#x0A13-#x0A28] |&nbsp;[#x0A2A-#x0A30] |&nbsp;[#x0A32-#x0A33] 
|&nbsp;[#x0A35-#x0A36] |&nbsp;[#x0A38-#x0A39] |&nbsp;[#x0A59-#x0A5C] 
|&nbsp;#x0A5E |&nbsp;[#x0A72-#x0A74] |&nbsp;[#x0A85-#x0A8B] |&nbsp;#x0A8D 
|&nbsp;[#x0A8F-#x0A91] |&nbsp;[#x0A93-#x0AA8] |&nbsp;[#x0AAA-#x0AB0] 
|&nbsp;[#x0AB2-#x0AB3] |&nbsp;[#x0AB5-#x0AB9] |&nbsp;#x0ABD |&nbsp;#x0AE0 
|&nbsp;[#x0B05-#x0B0C] |&nbsp;[#x0B0F-#x0B10] |&nbsp;[#x0B13-#x0B28] 
|&nbsp;[#x0B2A-#x0B30] |&nbsp;[#x0B32-#x0B33] |&nbsp;[#x0B36-#x0B39] 
|&nbsp;#x0B3D |&nbsp;[#x0B5C-#x0B5D] |&nbsp;[#x0B5F-#x0B61] 
|&nbsp;[#x0B85-#x0B8A] |&nbsp;[#x0B8E-#x0B90] |&nbsp;[#x0B92-#x0B95] 
|&nbsp;[#x0B99-#x0B9A] |&nbsp;#x0B9C |&nbsp;[#x0B9E-#x0B9F] 
|&nbsp;[#x0BA3-#x0BA4] |&nbsp;[#x0BA8-#x0BAA] |&nbsp;[#x0BAE-#x0BB5] 
|&nbsp;[#x0BB7-#x0BB9] |&nbsp;[#x0C05-#x0C0C] |&nbsp;[#x0C0E-#x0C10] 
|&nbsp;[#x0C12-#x0C28] |&nbsp;[#x0C2A-#x0C33] |&nbsp;[#x0C35-#x0C39] 
|&nbsp;[#x0C60-#x0C61] |&nbsp;[#x0C85-#x0C8C] |&nbsp;[#x0C8E-#x0C90] 
|&nbsp;[#x0C92-#x0CA8] |&nbsp;[#x0CAA-#x0CB3] |&nbsp;[#x0CB5-#x0CB9] 
|&nbsp;#x0CDE |&nbsp;[#x0CE0-#x0CE1] |&nbsp;[#x0D05-#x0D0C] 
|&nbsp;[#x0D0E-#x0D10] |&nbsp;[#x0D12-#x0D28] |&nbsp;[#x0D2A-#x0D39] 
|&nbsp;[#x0D60-#x0D61] |&nbsp;[#x0E01-#x0E2E] |&nbsp;#x0E30 
|&nbsp;[#x0E32-#x0E33] |&nbsp;[#x0E40-#x0E45] |&nbsp;[#x0E81-#x0E82] 
|&nbsp;#x0E84 |&nbsp;[#x0E87-#x0E88] |&nbsp;#x0E8A |&nbsp;#x0E8D 
|&nbsp;[#x0E94-#x0E97] |&nbsp;[#x0E99-#x0E9F] |&nbsp;[#x0EA1-#x0EA3] 
|&nbsp;#x0EA5 |&nbsp;#x0EA7 |&nbsp;[#x0EAA-#x0EAB] |&nbsp;[#x0EAD-#x0EAE] 
|&nbsp;#x0EB0 |&nbsp;[#x0EB2-#x0EB3] |&nbsp;#x0EBD |&nbsp;[#x0EC0-#x0EC4] 
|&nbsp;[#x0F40-#x0F47] |&nbsp;[#x0F49-#x0F69] |&nbsp;[#x10A0-#x10C5] 
|&nbsp;[#x10D0-#x10F6] |&nbsp;#x1100 |&nbsp;[#x1102-#x1103] 
|&nbsp;[#x1105-#x1107] |&nbsp;#x1109 |&nbsp;[#x110B-#x110C] 
|&nbsp;[#x110E-#x1112] |&nbsp;#x113C |&nbsp;#x113E |&nbsp;#x1140 
|&nbsp;#x114C |&nbsp;#x114E |&nbsp;#x1150 |&nbsp;[#x1154-#x1155] 
|&nbsp;#x1159 |&nbsp;[#x115F-#x1161] |&nbsp;#x1163 |&nbsp;#x1165 
|&nbsp;#x1167 |&nbsp;#x1169 |&nbsp;[#x116D-#x116E] |&nbsp;[#x1172-#x1173] 
|&nbsp;#x1175 |&nbsp;#x119E |&nbsp;#x11A8 |&nbsp;#x11AB 
|&nbsp;[#x11AE-#x11AF] |&nbsp;[#x11B7-#x11B8] |&nbsp;#x11BA 
|&nbsp;[#x11BC-#x11C2] |&nbsp;#x11EB |&nbsp;#x11F0 |&nbsp;#x11F9 
|&nbsp;[#x1E00-#x1E9B] |&nbsp;[#x1EA0-#x1EF9] |&nbsp;[#x1F00-#x1F15] 
|&nbsp;[#x1F18-#x1F1D] |&nbsp;[#x1F20-#x1F45] |&nbsp;[#x1F48-#x1F4D] 
|&nbsp;[#x1F50-#x1F57] |&nbsp;#x1F59 |&nbsp;#x1F5B |&nbsp;#x1F5D 
|&nbsp;[#x1F5F-#x1F7D] |&nbsp;[#x1F80-#x1FB4] |&nbsp;[#x1FB6-#x1FBC] 
|&nbsp;#x1FBE |&nbsp;[#x1FC2-#x1FC4] |&nbsp;[#x1FC6-#x1FCC] 
|&nbsp;[#x1FD0-#x1FD3] |&nbsp;[#x1FD6-#x1FDB] |&nbsp;[#x1FE0-#x1FEC] 
|&nbsp;[#x1FF2-#x1FF4] |&nbsp;[#x1FF6-#x1FFC] |&nbsp;#x2126 
|&nbsp;[#x212A-#x212B] |&nbsp;#x212E |&nbsp;[#x2180-#x2182] 
|&nbsp;[#x3041-#x3094] |&nbsp;[#x30A1-#x30FA] |&nbsp;[#x3105-#x312C] 
|&nbsp;[#xAC00-#xD7A3] </CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-Ideographic></A>[86]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>Ideographic</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>[#x4E00-#x9FA5] |&nbsp;#x3007 |&nbsp;[#x3021-#x3029] </CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-CombiningChar></A>[87]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>CombiningChar</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>[#x0300-#x0345] |&nbsp;[#x0360-#x0361] |&nbsp;[#x0483-#x0486] 
|&nbsp;[#x0591-#x05A1] |&nbsp;[#x05A3-#x05B9] |&nbsp;[#x05BB-#x05BD] 
|&nbsp;#x05BF |&nbsp;[#x05C1-#x05C2] |&nbsp;#x05C4 |&nbsp;[#x064B-#x0652] 
|&nbsp;#x0670 |&nbsp;[#x06D6-#x06DC] |&nbsp;[#x06DD-#x06DF] 

|&nbsp;[#x06E0-#x06E4] |&nbsp;[#x06E7-#x06E8] |&nbsp;[#x06EA-#x06ED] 
|&nbsp;[#x0901-#x0903] |&nbsp;#x093C |&nbsp;[#x093E-#x094C] |&nbsp;#x094D 
|&nbsp;[#x0951-#x0954] |&nbsp;[#x0962-#x0963] |&nbsp;[#x0981-#x0983] 
|&nbsp;#x09BC |&nbsp;#x09BE |&nbsp;#x09BF |&nbsp;[#x09C0-#x09C4] 
|&nbsp;[#x09C7-#x09C8] |&nbsp;[#x09CB-#x09CD] |&nbsp;#x09D7 
|&nbsp;[#x09E2-#x09E3] |&nbsp;#x0A02 |&nbsp;#x0A3C |&nbsp;#x0A3E 
|&nbsp;#x0A3F |&nbsp;[#x0A40-#x0A42] |&nbsp;[#x0A47-#x0A48] 
|&nbsp;[#x0A4B-#x0A4D] |&nbsp;[#x0A70-#x0A71] |&nbsp;[#x0A81-#x0A83] 
|&nbsp;#x0ABC |&nbsp;[#x0ABE-#x0AC5] |&nbsp;[#x0AC7-#x0AC9] 
|&nbsp;[#x0ACB-#x0ACD] |&nbsp;[#x0B01-#x0B03] |&nbsp;#x0B3C 
|&nbsp;[#x0B3E-#x0B43] |&nbsp;[#x0B47-#x0B48] |&nbsp;[#x0B4B-#x0B4D] 
|&nbsp;[#x0B56-#x0B57] |&nbsp;[#x0B82-#x0B83] |&nbsp;[#x0BBE-#x0BC2] 
|&nbsp;[#x0BC6-#x0BC8] |&nbsp;[#x0BCA-#x0BCD] |&nbsp;#x0BD7 
|&nbsp;[#x0C01-#x0C03] |&nbsp;[#x0C3E-#x0C44] |&nbsp;[#x0C46-#x0C48] 
|&nbsp;[#x0C4A-#x0C4D] |&nbsp;[#x0C55-#x0C56] |&nbsp;[#x0C82-#x0C83] 
|&nbsp;[#x0CBE-#x0CC4] |&nbsp;[#x0CC6-#x0CC8] |&nbsp;[#x0CCA-#x0CCD] 
|&nbsp;[#x0CD5-#x0CD6] |&nbsp;[#x0D02-#x0D03] |&nbsp;[#x0D3E-#x0D43] 
|&nbsp;[#x0D46-#x0D48] |&nbsp;[#x0D4A-#x0D4D] |&nbsp;#x0D57 |&nbsp;#x0E31 
|&nbsp;[#x0E34-#x0E3A] |&nbsp;[#x0E47-#x0E4E] |&nbsp;#x0EB1 
|&nbsp;[#x0EB4-#x0EB9] |&nbsp;[#x0EBB-#x0EBC] |&nbsp;[#x0EC8-#x0ECD] 
|&nbsp;[#x0F18-#x0F19] |&nbsp;#x0F35 |&nbsp;#x0F37 |&nbsp;#x0F39 
|&nbsp;#x0F3E |&nbsp;#x0F3F |&nbsp;[#x0F71-#x0F84] |&nbsp;[#x0F86-#x0F8B] 
|&nbsp;[#x0F90-#x0F95] |&nbsp;#x0F97 |&nbsp;[#x0F99-#x0FAD] 
|&nbsp;[#x0FB1-#x0FB7] |&nbsp;#x0FB9 |&nbsp;[#x20D0-#x20DC] |&nbsp;#x20E1 
|&nbsp;[#x302A-#x302F] |&nbsp;#x3099 |&nbsp;#x309A </CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-Digit></A>[88]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>Digit</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>[#x0030-#x0039] |&nbsp;[#x0660-#x0669] |&nbsp;[#x06F0-#x06F9] 
|&nbsp;[#x0966-#x096F] |&nbsp;[#x09E6-#x09EF] |&nbsp;[#x0A66-#x0A6F] 
|&nbsp;[#x0AE6-#x0AEF] |&nbsp;[#x0B66-#x0B6F] |&nbsp;[#x0BE7-#x0BEF] 
|&nbsp;[#x0C66-#x0C6F] |&nbsp;[#x0CE6-#x0CEF] |&nbsp;[#x0D66-#x0D6F] 
|&nbsp;[#x0E50-#x0E59] |&nbsp;[#x0ED0-#x0ED9] |&nbsp;[#x0F20-#x0F29] 
</CODE></TD></TR>
<TR vAlign=baseline>
<TD><A name=NT-Extender></A>[89]&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>Extender</CODE></TD>
<TD>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</TD>
<TD><CODE>#x00B7 |&nbsp;#x02D0 |&nbsp;#x02D1 |&nbsp;#x0387 |&nbsp;#x0640 
|&nbsp;#x0E46 |&nbsp;#x0EC6 |&nbsp;#x3005 |&nbsp;[#x3031-#x3035] 
|&nbsp;[#x309D-#x309E] |&nbsp;[#x30FC-#x30FE] </CODE></TD></TR></TBODY></TABLE>
<P>Представленные здесь классы символов могут быть извлечены из базы данных символов Unicode 2.0 следующим образом:</P>
<UL>
<LI><P>Начальные символы Name (Name start) должны иметь одну из следующих категорий: Ll, Lu, Lo, Lt, Nl.</P>
<LI><P>Символы Name, за исключением Name-start, должны иметь одну из следующих категорий: Mc, Me, Mn, Lm, or Nd.</P>
<LI><P>В XML именах нельзя использовать символы из области совместимости (то есть, символы с кодом, большим чем #xF900 и меньшим чем #xFFFE).</P>
<LI><P>Нельзя использовать символы, имеющие шрифт или расклад совместимости (то есть, имеющие "тэг совместимости форматирования" в 5-м поле базы данных - имеющие метку в поле 5, начинающемся с "&lt;").</P>
<LI><P>Символы [#x02BB-#x02C1], #x0559, #x06E5, #x06E6 обрабатываются как name-start символы, а не как символы name, поскольку классификатор определяет их как алфавитные.</P>
<LI><P>Символы #x20DD-#x20E0 исключены (в соответствии с требованиями Unicode 2.0, глава 5.14).</P>
<LI><P>Символ #x00B7 классифицируется как расширение, поскольку именно таким образом он идентифицируется в перечне свойств.</P>
<LI><P>Символ #x0387 добавлен как name символ, поскольку #x00B7 является его каноническим эквивалентом.</P>
<LI><P>Символы ':' и '_' допустимы в качестве name-start символов.</P>
<LI><P>Символы '-' и '.' допустимы в качестве name символов.</P></LI></UL></DIV>
<DIV class=div1>
<H2><A name=sec-xml-and-sgml></A>C XML и SGML (Пояснения к спецификации)</H2>
<P>XML построен как подмножество SGML, поэтому каждый XML документ должен также отвечать требованиям, предъявляемым к SGML документу. Детальное сравнение ограничений, которые языки XML и SGML накладывают на документы, см. в статье <A href="#Clark">[Clark]</A>.</P></DIV>
<DIV class=div1>
<H2><A name=sec-entexpand></A>D Обработка ссылок на сущность и символ (Пояснения к спецификации)</H2>
<P>В данном приложении содержатся некоторые примеры, иллюстрирующие последовательность распознавания и обработки ссылок на сущность и символ, которая была определена в главе <A href="#entproc"><B>4.4 Обработка XML процессором сущностей и ссылок</B></A>.</P>
<P>Если DTD содержит декларацию</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;!ENTITY example "&lt;p&gt;An ampersand (&amp;#38;#38;) may be escaped
numerically (&amp;#38;#38;#38;) or with a general entity
(&amp;amp;amp;).&lt;/p&gt;" &gt;</PRE></TD></TR></TBODY></TABLE>
<P>то в ходе обработки этой декларации сущности XML процессор обнаружит ссылки на символ и обработает их прежде чем следующая строка будет использована в качестве значения сущности "<CODE>example</CODE>":</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>&lt;p&gt;An ampersand (&amp;#38;) may be escaped
numerically (&amp;#38;#38;) or with a general entity
(&amp;amp;amp;).&lt;/p&gt;</PRE></TD></TR></TBODY></TABLE>
<P>Появление в документе ссылки на элемент "<CODE>&amp;example;</CODE>" приведет к тому, что этот текст будет разобран снова. Будут обнаружены начальный и конечный тэги элемента <CODE>p</CODE>, а также будут обнаружены и обработаны все три ссылки. В результате элемент <CODE>p</CODE> будет иметь следующее содержание (все данные, но без ограничителей и разметки):</P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>An ampersand (&amp;) may be escaped
numerically (&amp;#38;) or with a general entity
(&amp;amp;).</PRE></TD></TR></TBODY></TABLE>
<P>Более сложный пример полностью проиллюстрирует эти правила и их эффективность. (Номера строк в следующем примере нужны лишь для комментариев.) </P>
<TABLE bgColor=#99ffff border=1 cellPadding=5 class=eg width="100%">
<TBODY>
<TR>
<TD><PRE>1 &lt;?xml version='1.0'?&gt;
2 &lt;!DOCTYPE test [
3 &lt;!ELEMENT test (#PCDATA) &gt;
4 &lt;!ENTITY % xx '&amp;#37;zz;'&gt;
5 &lt;!ENTITY % zz '&amp;#60;!ENTITY tricky "error-prone" &gt;' &gt;
6 %xx;
7 ]&gt;
8 &lt;test&gt;This sample shows a &amp;tricky; method.&lt;/test&gt;</PRE></TD></TR></TBODY></TABLE>
<P>В результате получается следующий сценарий:</P>

<UL>
<LI><P>в строке 4 ссылка на символ с кодом 37 обрабатывается сразу, и сущность параметра "<CODE>xx</CODE>" помещается в таблицу символов со значением "<CODE>%zz;</CODE>". И поскольку текст замены повторно не просматривается, ссылка на сущность параметра "<CODE>zz</CODE>" обнаружена не будет. (Если же это здесь произойдет, то будет зафиксирована ошибка, поскольку сущность "<CODE>zz</CODE>" еще не была декларирована.)</P>
<LI><P>в строке 5 ссылка на символ "<CODE>&amp;#60;</CODE>" обрабатывается сразу, и сущность параметра "<CODE>zz</CODE>" обзаводится текстом замены "<CODE>&lt;!ENTITY tricky "error-prone" &gt;</CODE>", являющимся корректной декларацией сущности.</P>
<LI><P>в строке 6 обнаруживается ссылка на сущность "<CODE>xx</CODE>" и, соответственно, производится разбор текста замены для этой сущности (а именно, "<CODE>%zz;</CODE>"). При этом обнаруживается ссылка на сущность "<CODE>zz</CODE>" и тоже анализируется ее текст замены ("<CODE>&lt;!ENTITY tricky "error-prone" &gt;</CODE>"). В результате получаем декларацию общей сущности "<CODE>tricky</CODE>" с текстом замены "<CODE>error-prone</CODE>".</P>
<LI><P>в строке 8, обнаруживается и обрабатывается ссылка на общую сущность "<CODE>tricky</CODE>". В итоге получаем полное содержимое элемента <CODE>test</CODE> в виде самодостаточной (и не связанной с какой-либо грамматикой) строки <EM>This sample shows a error-prone method.</EM></P></LI></UL></DIV>
<DIV class=div1>
<H2><A name=determinism></A>E Детерминистические модели содержания (Пояснения к спецификации)</H2>
<P>Как указывалось в главе <A href="#sec-element-content"><B>3.2. Содержимое элемента</B></A>, необходимо чтобы модели содержимого, даваемые в декларациях типов элементов, были детерминистическими. Данное требование необходимо <A href="#dt-compat" title="For Compatibility">для совместимости</A> с языком SGML (в котором детерминистические модели содержания обозначаются термином "unambiguous"). XML процессоры, построенные на базе систем SGML, могут выявлять недетерминистические модели содержания как ошибочные.</P>
<P>К примеру, модель содержимого <CODE>((b, c) | (b, d))</CODE> является недетерминистической, поскольку, получив исходный <CODE>b</CODE>, XML процессор не может знать, какому <CODE>b</CODE> в исходной модели он соответствует, не проследив далее по строке, какой элемент следует за указанным <CODE>b</CODE>. В данном случае обе ссылки на <CODE>b</CODE> можно свести в одну общую ссылку, преобразовав рассматриваемую модель в <CODE>(b, (c | d))</CODE>. Теперь исходный элемент <CODE>b</CODE> соответствует ровно одному имени в модели содержания, и процессору нет нужды заглядывать вперед чтобы увидеть, что за ним следует. Это может быть и <CODE>c</CODE>, и <CODE>d</CODE>.</P>
<P>Или более формально: с помощью стандартных алгоритмов по модели содержания может быть выстроен автомат конечных состояний, например алгоритм 3.5 из главы 3.9 в книге авторов Aho, Sethi и Ullman <A href="#Aho">[Aho/Ullman]</A>. Во многих таких алгоритмах для каждой части в регулярном выражении строится сопроводительный набор команд (то есть, в дереве синтаксиса данного регулярного выражения стоится каждый узел листа). Если какая-либо часть выражения имеет сопроводительный набор, в котором более одной позиции сопоставлено с типом элементов с одним и тем же названием, модель содержимого ошибочна и об этом можно сообщать как об ошибке.</P>
<P>Существуют алгоритмы, которые способны многие (хотя и не все) недетерминистические модели содержания автоматически привести к эквивалентным детерминистическым моделям (см. Br&uuml;ggemann-Klein 1991 <A href="#ABK">[Br&uuml;ggemann-Klein]</A>).</P></DIV>
<DIV class=div1>
<H2><A name=sec-guessing></A>F Автоматическое определение кодировки символов 
(Пояснения к спецификации)</H2>
<P>Декларация кодировки XML для каждой сущности действует как некий внутренний заголовок, указывающий используемую кодировку символов. Очевидно, что прежде чем XML процессор сможет прочесть внутренний заголовок, он должен выяснить используемую кодировку символов, то есть именно то, что пытается показать внутренний заголовок. В общем случае, это безвыходная ситуация. Однако для XML это не совсем так, поскольку XML в общем случае ограничен двумя положениями: предполагается, что каждая реализация поддерживает только ограниченный набор кодировок символов, а декларация кодировки XML занимает определенную позицию и имеет определенное содержание, что позволяет в обычных случаях осуществить автоматическое определение кодировки для каждой сущности. Кроме того, во многих случаях помимо собственно потока данных XML документа доступны и другие источники информации. В зависимости от того, была ли сущность XML представлена процессору с сопроводительной (внешней) информацией или же нет, можно наблюдать две ситуации. Сначала мы рассмотрим первую из них.</P>
<DIV class=div2>
<H3><A name=sec-guessing-no-ext-info></A>F.1 Определение без внешней информации о кодировке</H3>
<P>Поскольку ни одна из сущностей XML не сопровождается внешней информацией о кодировке и не пользуется кодировками UTF-8 или UTF-16, то первой <EM>должна</EM> идти декларация кодировки XML. Первыми ее символами должны быть '<CODE>&lt;?xml</CODE>', которые способен обнаружить любой процессор, отвечающий требованиям спецификации. Для этого ему необходимо получит от двух до четырех октетов, различные комбинации которых рассматриваются ниже. Изучая перечень этих комбинаций, полезно будет знать, что в кодировке UCS-4 код символа '&lt;' - "<CODE>#x0000003C</CODE>", символ '?' соответствует "<CODE>#x0000003F</CODE>", а Byte Order Mark, который обязателен для потоков данных в кодировке UTF-16, имеет код "<CODE>#xFEFF</CODE>". Запись <VAR>##</VAR> обычно используется для обозначения любого байтового значения, за исключением того, что две следующих друг за другом нотации <VAR>##</VAR> не могут обе соответствовать нулевому коду 00.</P>
<P>с Byte Order Mark:</P>
<TABLE border=1 frame=border>
<TBODY>
<TR>
<TD><CODE>00 00 FE FF</CODE></TD>
<TD>UCS-4, big-endian машина (1234 порядок)</TD></TR>
<TR>
<TD><CODE>FF FE 00 00</CODE></TD>
<TD>UCS-4, little-endian машина (4321 порядок)</TD></TR>
<TR>
<TD><CODE>00 00 FF FE</CODE></TD>
<TD>UCS-4, необычный порядок октетов (2143)</TD></TR>
<TR>
<TD><CODE>FE FF 00 00</CODE></TD>
<TD>UCS-4, необычный порядок октетов (3412)</TD></TR>
<TR>
<TD><CODE>FE FF ## ##</CODE></TD>
<TD>UTF-16, big-endian</TD></TR>
<TR>
<TD><CODE>FF FE ## ##</CODE></TD>
<TD>UTF-16, little-endian</TD></TR>
<TR>
<TD><CODE>EF BB BF</CODE></TD>
<TD>UTF-8</TD></TR></TBODY></TABLE>
<P>без Byte Order Mark:</P>
<TABLE border=1 frame=border>
<TBODY>
<TR>
<TD><CODE>00&nbsp;00&nbsp;00&nbsp;3C</CODE></TD>
<TD rowSpan=4>UCS-4 или иная кодировка с 32-битным кодом, а также ASCII символы, кодированные как ASCII значения, с порядком следования байтов big-endian (1234), little-endian (4321) и нетипичными (2143 и 3412) соответственно. Чтобы определить, какая из поддерживаемых UCS-4 и других 32-битных кодировок используется, необходимо прочесть декларацию кодировки.</TD></TR>
<TR>
<TD><CODE>3C 00 00 00</CODE></TD></TR>
<TR>
<TD><CODE>00 00 3C 00</CODE></TD></TR>
<TR>
<TD><CODE>00 3C 00 00</CODE></TD></TR>
<TR>
<TD><CODE>00 3C 00 3F</CODE></TD>
<TD>UTF-16BE, big-endian ISO-10646-UCS-2 либо иная кодировка с 16-битным кодом и порядком следования big-endian, а также ASCII символы, кодированные как ASCII значения 
(для их идентификации необходимо прочесть декларацию кодировки)</TD></TR>
<TR>
<TD><CODE>3C 00 3F 00</CODE></TD>
<TD>UTF-16LE, little-endian ISO-10646-UCS-2, либо иная кодировка с 16-битным кодом и порядком следования little-endian, а также ASCII символы, кодированные как ASCII значения (для их идентификации необходимо прочесть декларацию кодировки)</TD></TR>
<TR>
<TD><CODE>3C 3F 78 6D</CODE></TD>
<TD>UTF-8, ISO 646, ASCII, некоторое подмножество ISO 8859, Shift-JIS, EUC, или же любая другая 7-ми и 8-ми битная кодировка, кодировка переменной длины, которая гарантирует, что ASCII символы будут занимать свои нормальные позиции, иметь обычную ширину и значения. Чтобы определить, которая из этих кодировок находится в работе, необходимо прочесть действительную декларацию кодировки. Поскольку во всех перечисленных кодировках для требуемых ASCII символов используются одни и те же битовые шаблоны, то соответствующую декларацию кодировки можно прочесть всегда.</TD></TR>
<TR>
<TD><CODE>4C 6F A7 94</CODE></TD>
<TD>EBCDIC (С некоторыми особенностями. Чтобы выяснить, которая из кодовых страниц была задействована, необходимо прочесть полную декларацию кодировки.)</TD></TR>
<TR>
<TD>остальное</TD>
<TD>UTF-8 без декларации кодировки, или неверный заголовок потока данных (отсутствие необходимой декларации кодировки), искажение, фрагментарность или результат обработки каким-либо архиватором</TD></TR></TBODY></TABLE>
<DIV class=note>
<P class=prefix><B>Примечание:</B></P>
<P>Среди перечисленных выше вариантов есть такие, когда для определения кодировки нет необходимости читать соответствующую декларацию. Однако, согласно главе 4.3.3, декларация кодировки остается необходимой. Поэтому если эта декларация имеется, то ее необходимо прочесть, а полученное название сверить с действительной кодировкой данной сущности. Кроме того, в будущем могут появиться новые кодировки символов, которые потребуют декларирования даже в тех случаях, где сегодня кодировку можно распознать автоматически.</P></DIV>
<P>Описанный механизм автоматического распознавания кодировки достаточен для того, чтобы прочесть декларацию кодировки XML и получить идентификатор кодировки символов, который по-прежнему необходим для распознавания отдельных членов в каждой группе кодировок (например, чтобы выделить UTF-8 из 8859, отделить друг от друга отдельные части набора 8859, идентифицировать используемую кодовую страницу EBCDIC и так далее).</P>
<P>Поскольку содержимое декларации кодировки ограничено набором ASCII символов (хотя и скрыто под кодировкой), процессор сможет надежно прочесть всю декларацию кодировки, как только разберется, какая была использована группа кодировок. Поскольку практически все широко используемые кодировки символов попадают в одну из перечисленных выше категорий, то декларирование кодировки XML позволяет достаточно надежно обозначать кодировку символов даже в тех случаях, когда внешние источники информации в операционной системе или на уровне транспортного протокола окажутся ненадежны. Однако такие кодировки символов, как UTF-7, переопределяющие байты ASCII-значений, не могут быть идентифицированы надежно.</P>
<P>Как только процессор определил используемую кодировку символов, он волен поступать соответствующим образом, либо используя для каждой кодировки отдельную процедуру ввода, либо вызывая соответствующую процедуру преобразования для каждого введенного символа.</P>
<P>Как и любые другие самораспознаваемые системы, декларация кодировки XML не сможет работать, если какая-нибудь программа поменяла используемый для сущности набор символов или кодировку, не изменив при этом соответствующим образом декларацию кодировки. Программистам, разрабатывающим процедуры кодирования символов, необходимо тщательно проверять достоверность внешней и внутренней информации, используемой для маркировки сущностей.</P></DIV>
<DIV class=div2>
<H3><A name=sec-guessing-with-ext-info></A>F.2 Приоритеты при наличии внешней информации о кодировке</H3>
<P>Вторая из возможных ситуаций возникает когда XML сущность сопровождает информация о кодировке, извлекаемая из некоторых файловых систем и сетевых протоколов. Если имеется несколько источников информации, то их относительный приоритет и предпочтительный способ разрешения конфликтов должны определяться протоколом более высокого уровня, используемым для передачи XML документов. В частности, можно обратиться к <A href="#rfc2376">[IETF RFC 2376]</A> и наследующим его документам, определяющим типы MIME <CODE>text/xml</CODE> и <CODE>application/xml</CODE>, а также содержащим полезное руководство. Однако в целях совместимости желательно руководствоваться следующим правилом:</P>
<UL>
<LI><P>Если сущность XML находится в файле, то для определения кодировки символов, как правило, используются Byte-Order Mark и декларация кодировки (если таковые имеются).</P></LI></UL></DIV></DIV>
<DIV class=div1>
<H2><A name=sec-xml-wg></A>G Рабочая группа W3C XML (Пояснения к спецификации)</H2>
<P>Данная спецификация была подготовлена и принята к публикации рабочей группой W3C XML (W3C XML Working Group, WG). Однако из того, что WG приняла данную спецификацию, не следует, что все члены WG единогласно проголосовали за это решение. Настоящие и бывшие члены XML WG:</P>
<UL>
  <LI>Jon Bosak, Sun (<I>Председатель</I>) 
  <LI>James Clark (<I>Технический руководитель</I>) 
  <LI>Tim Bray, Textuality and Netscape (<I>XML со-редактор</I>) 
  <LI>Jean Paoli, Microsoft (<I>XML со-редактор</I>) 
  <LI>C. M. Sperberg-McQueen, U. of Ill. (<I>XML со-редактор</I>) 
  <LI>Dan Connolly, W3C (<I>представитель W3C</I>) 
  <LI>Paula Angerstein, Texcel 
  <LI>Steve DeRose, INSO 
  <LI>Dave Hollander, HP 
  <LI>Eliot Kimber, ISOGEN 
  <LI>Eve Maler, ArborText 
  <LI>Tom Magliery, NCSA 
  <LI>Murray Maloney, SoftQuad, Grif SA, Muzmo and Veo Systems 

  <LI>MURATA Makoto (FAMILY Given), Fuji Xerox Information Systems 
  <LI>Joel Nava, Adobe 
  <LI>Conleth O'Connell, Vignette 
  <LI>Peter Sharpe, SoftQuad 
  <LI>John Tigue, DataChannel </LI></UL></DIV>
<DIV class=div1>
<H2><A name=sec-core-wg></A>H Основная группа W3C XML (Пояснения к спецификации)</H2>
<P>Вторая редакция данной спецификации была подготовлена основной рабочей группой W3C XML (W3C XML Core Working Group, WG). Членами группы на момент опубликования этой редакции являлись:</P>
<UL>
  <LI>Paula Angerstein, Vignette 
  <LI>Daniel Austin, Ask Jeeves 
  <LI>Tim Boland 
  <LI>Allen Brown, Microsoft 
  <LI>Dan Connolly, W3C (<I>работа с персоналом</I>) 
  <LI>John Cowan, Reuters Limited 
  <LI>John Evdemon, XMLSolutions Corporation 

  <LI>Paul Grosso, Arbortext (<I>со-председатель</I>) 
  <LI>Arnaud Le Hors, IBM (<I>со-председатель</I>) 
  <LI>Eve Maler, Sun Microsystems (<I>Редактор второй редакции</I>) 
  <LI>Jonathan Marsh, Microsoft 
  <LI>MURATA Makoto (FAMILY Given), IBM 
  <LI>Mark Needleman, Data Research Associates 
  <LI>David Orchard, Jamcracker 
  <LI>Lew Shannon, NCR 
  <LI>Richard Tobin, University of Edinburgh 
  <LI>Daniel Veillard, W3C 
  <LI>Dan Vint, Lexica 
  <LI>Norman Walsh, Sun Microsystems 
  <LI>Franзois Yergeau, Alis Technologies (<I>редактор списка ошибок</I>) 
  <LI>Kongyi Zhou, Oracle </LI></UL></DIV>

<DIV class=div1>
<H2><A name=b4d250b6c21></A>I Рабочие заметки (Пояснения к спецификации)</H2>
<P>Вторая редакция спецификации была также преобразована в <A href="http://www.w3.org/XML/1998/06/xmlspec-v21.dtd">XMLspec DTD</A> (для которой имеется соответствующая <A href="http://www.w3.org/XML/1998/06/xmlspec-report-v21.htm">документация</A>). HTML версии спецификации были получены с помощью XSLT стилей <A href="http://www.w3.org/XML/1998/06/xmlspec.xsl">xmlspec.xsl</A>, <A href="http://www.w3.org/XML/1998/06/diffspec.xsl">diffspec.xsl</A> и <A href="http://www.w3.org/XML/1998/06/REC-xml-2e.xsl">REC-xml-2e.xsl</A>. PDF версия документа была получена с помощью инструментария <A href="http://www.tdb.uu.se/~jan/html2ps.html">html2ps</A> и программы выделения.</P></DIV>
</DIV>
<table width="100%" cellpadding="0"><tr><td bgcolor="#E8E8E8">
<DIV class=div1>
<H2 style="BACKGROUND: #E8E8E8;"><A name=dictionary></A>J Словарь (Пояснения к спецификации)</H2>
<P>При подготовке документа для ряда ключевых терминов был выбран следующий вариант перевода:</P>
<P>
<I>character data</I> - символьные данные<BR class=html_compat>
<I>conditional section</I> - условная секция<BR class=html_compat>
<I>constraint</I> - ограничение, правило, условие<BR class=html_compat>
<I>entity</I> - сущность<BR class=html_compat>
<I>enumerated type</I> - перечислимый тип<BR class=html_compat>
<I>escape character</I> - маскирование символа<BR class=html_compat>
<I>literal data, literals</I> - строковые данные, литералы<BR class=html_compat>
<I>non-terminal symbol</I> - неграничный символ<BR class=html_compat>
<I>name character</I> - символ имени<BR class=html_compat>
<I>nonterminal content</I> - незавершенное содержание<BR class=html_compat>
<I>non-validating processor</I> - непроверяющий процессор<BR class=html_compat>
<I>numeric character reference</I> - числовая ссылка на символ<BR class=html_compat>
<I>parsed entities</I> - разобранные сущности<BR class=html_compat>
<I>production</I> - сценарий (грамматики)<BR class=html_compat>
<I>standalone document</I> - одиночный документ<BR class=html_compat>
<I>storage unit</I> - единица размещения<BR class=html_compat>
<I>subset</I> - набор (внутренний, внешний) в DTD<BR class=html_compat>
<I>token</I> - лексема<BR class=html_compat>
<I>tokenized type</I> - символьный тип<BR class=html_compat>
<I>valid document</I> - действительный документ<BR class=html_compat>
<I>validating XML processor</I> - проверяющий XML процессор<BR class=html_compat>
<I>well-formed</I> - корректный
<BR class=html_compat>
<I>white space</I> - пробельный символ<BR class=html_compat>
</td></tr></table>
</P>
<P>Если у вас возникли какое-либо замечания, мы будем рады их получить по адресу <A HREF="mailto:radik_u@mail.ru">radik_u@mail.ru</A>.</P>

<p>&nbsp;

<!-- end -->
</td><td align=right>
<!--adv right start-->

<!--adv right end-->
</td></tr></table>



<p align=center>




<p>
<table cellspacing=0 cellpadding=0 border=0 width=100%>
<tr><td><img src=/pictures/1x1.gif width=1 height=5 border=0 alt=""></td></tr>
<tr><td bgcolor=#008080><img src=/pictures/1x1.gif width=1 height=1 border=0 alt=""></td></tr>
<tr><td bgcolor=#daecd7><img src=/pictures/1x1.gif width=1 height=3 border=0 alt=""></td></tr>
<tr><td bgcolor=#008080>
<table cellspacing=1 cellpadding=1 border=0 width=100%>
<tr>
<td bgcolor=#F4F9F3 align=center width=7%><a class=head  href=/search.shtml>Поиск</a></td>
<td bgcolor=#F4F9F3 align=center width=12%><a class=head  href=/rubricator/>Рубрикатор</a></td>
<td bgcolor=#F4F9F3 align=center width=10%><a class=head  href=http://forum.citforum.ru/>Форумы</a></td>
<td bgcolor=#F4F9F3 align=center width=18%><a class=head href=/news.shtml>Новости сервера</a></td>
<td bgcolor=#F4F9F3 align=center width=17%><a class=head href=http://www.citmgu.ru/>Учебный центр</a></td>
<td bgcolor=#F4F9F3 align=center width=18%><a class=head href=http://www.mistral.ru/>Книжный магазин</a></td>
<td bgcolor=#F4F9F3 align=center width=18%><a class=head href=/advertising/>Реклама на сервере</a></td>
</tr></table>
</td></tr>
</table>

<table cellspacing=0 cellpadding=0 border=0 width=100%><tr><td><img src=/pictures/1x1.gif width=1 height=5 border=0 alt=""></td></tr></table>

<table cellspacing=0 cellpadding=0 border=0 width=100%>
<tr><td><font size=2>&lt;&lt;&lt;&nbsp;<a class=head href=/>В&nbsp;начало</a>&nbsp;|&nbsp;<a class=head href=#top>Наверх</a></font></td>
<td><FORM method=get action=http://www.citforum.ru/cgi-bin/Click.cgi></td><td><INPUT type=hidden name=Banner value="Bottom"><td width=100% align=right><font size=2>Быстрый&nbsp;переход&nbsp;&gt;&gt;&gt;&nbsp;&nbsp;</font></td><td><SELECT name=Target size=1>
<option value=http://www.citforum.ru/internet/index.shtml>Internet-технологии</option>&nbsp;
<option value=http://www.citforum.ru/nets/index.shtml>Сетевые технологии</option>&nbsp;
<option value=http://www.citforum.ru/database/index.shtml>Базы данных</option>&nbsp;
<option value=http://www.citforum.ru/operating_systems/index.shtml>Операционные системы</option>&nbsp;
<option value=http://www.citforum.ru/programming/index.shtml>Программирование</option>&nbsp;
<option value=http://www.citforum.ru/hardware/index.shtml>Аппаратные платформы</option>&nbsp;
<option value=http://www.citforum.ru/seminars/index.shtml>Материалы конференций</option>&nbsp;
<option value=http://www.citforum.ru/pp/index.shtml>Пользователям и преподавателям</option>&nbsp;
<option value=http://www.citforum.ru/cfin/index.shtml>Корпоративные ресурсы</option>&nbsp;
<option value=http://www.citforum.ru/book/index.shtml>Книги, которые мы выбираем</option>&nbsp;
</SELECT>&nbsp;<INPUT type=hidden name=Referer value="Bottom"><INPUT type=submit value=Go!></td><td></FORM></td></tr>
</table>

<table cellspacing=0 cellpadding=0 border=0 width="100%"><tr><td><img src=/pictures/1x1.gif width=1 height=5 border=0 alt=""></td></tr>
<tr><td bgcolor=#008080><img src=/pictures/1x1.gif width=1 height=1 border=0 alt=""></td></tr>
<tr><td bgcolor=#daecd7><img src=/pictures/1x1.gif width=1 height=3 border=0 alt=""></td></tr></table>


<table cellspacing=0 cellpadding=4 border=0 width=100%>
<td><font size=2>Комментарии: <a href="mailto:info@citforum.ru?Subject='From bottom of CIT FORUM'">info@citforum.ru</a></font></td>
<td><a href=http://counter.rambler.ru/top100/><img src="/pictures/logos/banner-88x31-rambler-darkblue2.gif" width=88 height=31 border=0 alt="Rambler's Top100"></a></td><td><!-- SpyLOG v2 f:0211 --><script language="javascript">
u="u266.74.spylog.com";d=document;nv=navigator;na=nv.appName;t="";p=1;
sz=" width=88 height=31 ";
hl=history.length;d.cookie="b=b";c=0;
bv=Math.round(parseFloat(nv.appVersion)*100);
if (d.cookie) c=1;n=(na.substring(0,2)=="Mi")?0:1;
if((n==0)||(bv >= 300)){rn=Math.random();t=(new Date()).getTimezoneOffset();} else {rn=0;}
z="p="+p+"&rn="+rn+"&t="+t+"&c="+c+"&hl="+hl;
if (self != top) { fr=1;} else { fr=0;}
r=escape(d.referrer);r1="";
sl="1.0";h=0;
</script>
<script language="javascript1.1">
pl="";sl="1.1";
if((n==1) && (bv >= 300))
{ for(var i = 0; i < nv.plugins.length; i++)
pl += nv.plugins[i].name+":"; }
j = (navigator.javaEnabled() ? "Y" : "N");
</script>
<script language=javascript1.2>
sl="1.2";s=screen;wh=s.width+'x'+s.height;
px=(n==0)?screen.colorDepth:screen.pixelDepth;z+="&wh="+wh+"&px="+px;
</script>
<script language=javascript1.3>
sl="1.3"
</script>
<script language="javascript">
y="";
y+="<a href='http://"+u+"/cnt?f=3&p="+p+"&rn="+rn+"' target=_blank>";
y+="<img src='http://"+u+"/cnt?";
y+=z+"&j="+j+"&sl="+sl+"&r="+r+"&r1="+r1+"&fr="+fr+"&pg="+escape(window.location.href)+"&pl="+escape(pl);
y+="' border=0 "+sz+" alt='SpyLOG'>";
y+="</a>";
d.write(y);
</script><script language="javascript1.2"><!--
if (n == 0) { d.write("<");d.write("!--"); }
//--></script><noscript><a href="http://u266.74.spylog.com/cnt?f=3&p=1" target=_blank><img src="http://u266.74.spylog.com/cnt?p=1" alt='SpyLOG' border='0' width=88 height=31></a></noscript><script language="javascript1.2"><!--
if (n == 0) { d.write("--");d.write(">"); }
//--></script><!-- SpyLOG --></td>
<td align=right valign=top>Copyright &copy; <a href="http://citforum.ru/cgi-bin/Click.cgi?Banner=cit_key.gif&Target=http://www.citmgu.ru/&Referer=TOP_INLINER"><img src=/pictures/logos/logo_cit.gif width=134 height=38 border=0></a></td></tr>
</table>

<table cellspacing=0 cellpadding=0 border=0 width=100%><tr><td bgcolor=#daecd7><img src=/pictures/1x1.gif width=1 height=3 border=0 alt=""></td></tr><tr><td bgcolor=#008080><img src=/pictures/1x1.gif width=1 height=1 border=0 alt=""></td></tr></table>
<table cellspacing=0 cellpadding=0 border=0 width=100%><tr><td align=center><font size=1 face="Arial, sans-serif"><b>Внимание!</b> Любой из материалов, опубликованных на этом сервере, не может быть  воспроизведен в какой бы то ни было форме и какими бы то ни было средствами без письменного разрешения владельцев авторских прав. </td></tr></table>
</body></html>
