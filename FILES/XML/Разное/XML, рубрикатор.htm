<html xmlns:sys="urn:schemas-design-ru:system"><head><meta http-equiv="Content-Type" content="text/html; charset=WINDOWS-1251"><title>
| PARSER | форум | А сейчас позреют многие ... |
</title><link rel="SHORTCUT ICON" href="/favicon.ico"><link rel="start" href="/"><link rel="help" href="/faq/"><link rel="search" href="/docs/"><link rel="Copyright" href="/download/license/"><link rel="author" href="/authors/"><link rel="bookmark" href="http://parser2.parser.ru/" title="Parser 2.0"><link rel="bookmark" href="http://www.artlebedev.ru/" title="Art Lebedev Studio"><link rel="stylesheet" type="text/css" href="/main.css"><link rel="stylesheet" type="text/css" href="/main-advanced.css" media="all"><link rel="alternate" type="application/rss+xml" title="RSS" href="http://www.parser.ru/_rss.html"><script language="JavaScript" type="text/javascript" src="/popup.js"></script></head><body bgcolor="#FFFFFF" text="#000000" topmargin="5" leftmargin="5" rightmargin="5" bottommargin="5" marginwidth="5" marginheight="5"><table border="0" cellpadding="5" cellspacing="1" width="100%" bgcolor="#CCCCCC"><tr align="center"><td width="33%" bgcolor="#99D228"><br></td><td width="34%" bgcolor="#FFFFFF"><a href="/"><img src="/i/logo.gif" alt="parser" width="200" height="50" border="0"></a></td><td width="33%" bgcolor="#99D228"><br></td></tr></table><br><table border="0" cellpadding="2" cellspacing="1" width="100%" class="mainNav"><tr><td width="16%" class="default"><a href="http://parser2.parser.ru/"><img src="/i/p2.gif" alt="" width="9" height="9" border="0" hspace="5" align="bottom">parser 2.0</a></td><td width="17%" class="default"><a href="/faq/"><img src="/i/p2.gif" alt="" width="9" height="9" border="0" hspace="5" align="bottom">faq</a></td><td width="17%" class="default"><a href="/authors/"><img src="/i/p2.gif" alt="" width="9" height="9" border="0" hspace="5" align="bottom">авторы</a></td><td width="17%" class="default"><a href="/docs/"><img src="/i/p2.gif" alt="" width="9" height="9" border="0" hspace="5" align="bottom">документация</a></td><td width="17%" class="default"><a href="/powered_by_parser/"><img src="/i/p2.gif" alt="" width="9" height="9" border="0" hspace="5" align="bottom">в действии</a></td><td width="16%" class="default"><a href="/feedback/"><img src="/i/p2.gif" alt="" width="9" height="9" border="0" hspace="5" align="bottom">куда говорить</a></td></tr><tr><td width="16%" class="default"><a href="/news/"><img src="/i/p2.gif" alt="" width="9" height="9" border="0" hspace="5" align="bottom">архив новостей</a></td><td width="17%" class="default"><a href="/links/"><img src="/i/p2.gif" alt="" width="9" height="9" border="0" hspace="5" align="bottom">полезные ссылки</a></td><td width="17%" class="default"><a href="/hosters/"><img src="/i/p2.gif" alt="" width="9" height="9" border="0" hspace="5" align="bottom">хостинги</a></td><td width="17%" class="default"><a href="/download/"><img src="/i/p2.gif" alt="" width="9" height="9" border="0" hspace="5" align="bottom">скачать</a></td><td width="17%" class="default"><a href="/examples/"><img src="/i/p2.gif" alt="" width="9" height="9" border="0" hspace="5" align="bottom">примеры</a></td><td width="16%" class="active"><a href="/forum/"><img src="/i/p2.gif" alt="" width="9" height="9" border="0" hspace="5" align="bottom">форум</a></td></tr></table><br><table border="0" cellpadding="5" cellspacing="1" width="100%" bgcolor="#CCCCCC"><tr bgcolor="#EEEEEE"><td width="33%" class="small"><b><a href="/forum/info.html">команды форматирования</a></b></td><td width="67%" class="small"><form style="margin:0;" action="/forum/" method="post"><input type="hidden" name="auth.logon" value="do"><input type="hidden" name="id" value="3412"><table border="0" width="100%" cellspacing="0" cellpadding="0"><tr valign="middle"><td width="100%" class="small"><b><a href="/forum/">форум</a></b></td><td><img src="/i/i-user.gif" width="16" height="16" border="0"></td><td><input type="text" name="auth.name" value="" size="10" class="small"></td><td><img src="/i/i-passwd.gif" width="16" height="16" border="0"></td><td><input type="password" name="auth.passwd" value="" size="10" class="small"></td><td><input type="checkbox" name="auth.persistent" value="1" id="auth.persistent1"></td><td><label for="auth.persistent1" class="small">запомнить </label></td><td><input type="submit" name="logon" value="Войти" class="small"></td><td class="small"> <a href="/forum/register.html">регистрация</a></td></tr></table></form></td></tr><tr valign="top" bgcolor="#FFFFFF"><td class="small"><form><table class="fieldset"><tr><td><div class="small" style="margin-bottom:5px">Написать ответ на текущее сообщение</div><input type="button" name="go" value="Ответить…" title="" class="small" onClick="popupWin('forummessageadd3412', '/forum/message.html?id=3412', 600, 500); return false;"></td></tr></table></form><form method="get" action="/forum/"><table class="fieldset"><tr><td class="small"><i>Ключевое слово:</i><br><input type="text" name="terms" value="" size="10" style="width: 100%"><br><div class="variant"><input type="checkbox" value="1" name="search_in_message" id="search_in_message1" checked><i><label for="search_in_message1">искать в тексте сообщения</label></i></div></td></tr><tr><td class="small"><i>Фильтровать по автору:</i><br><input type="text" name="author" value="" size="10" style="width: 100%"></td></tr><tr><td style="padding-left: 4px; padding-right: 4px"><input type="submit" name="doSearch" value="Найти" class="small"></td></tr></table></form><br></td><td class="bodyForum"><font size="+1"><b>А сейчас позреют многие ...</b></font><br><br><table border="0" width="100%" cellspacing="0" cellpadding="0"><tr valign="bottom"><td><i><a href="/forum/users/?uid=90" title="Профайл пользователя">Nexus</a>
| <a href="mailto:max@prokopov.kiev.ua">max@prokopov.kiev.ua</a></i></td><td class="small" align="right"><i>01.07.2002 17:59</i></td></tr></table><br>Как прозрел и я.<br><br>Преобразование "плоского" XML в древовидный.<br>С помощью этого форум пишется раз-два.<br>И код в примере "пишем форум" сокращается до минимума.<br>Исходный XML : <pre>&lt;?xml version="1.0" encoding="windows-1251"?&gt;
<font color="#0077DD">&lt;collection&gt;</font>
	<font color="#0077DD">&lt;item text="test5" id="5" pid="3"/&gt;</font>
	<font color="#0077DD">&lt;item text="test1" id="1" pid="0"/&gt;</font>
	<font color="#0077DD">&lt;item text="test2" id="2" pid="0"/&gt;</font>
	<font color="#0077DD">&lt;item text="test3" id="3" pid="1"/&gt;</font>
	<font color="#0077DD">&lt;item text="test4" id="4" pid="2"/&gt;</font>
<font color="#0077DD">&lt;/collection&gt;</font></pre>Наш XSL : <pre>&lt;?xml version="1.0" encoding="windows-1251"?&gt;
<font color="#0077DD">&lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;</font>
<font color="#0077DD">&lt;xsl:output method="xml" encoding="windows-1251"/&gt;</font>
	<font color="#0077DD">&lt;xsl:param name="topid" select="0"/&gt;</font>

     <font color="#0077DD">&lt;xsl:template match="collection"&gt;</font>
     <font color="#0077DD">&lt;test&gt;</font>
             <font color="#0077DD">&lt;xsl:value-of select="."/&gt;</font>
             <font color="#0077DD">&lt;xsl:apply-templates select="item<font color="#0000AA">[</font>@pid=<font color="#CC0000">$topid</font><font color="#0000AA">]</font>"&gt;</font>
				<font color="#0077DD">&lt;xsl:with-param name="x" select="1"/&gt;</font>
			 <font color="#0077DD">&lt;/xsl:apply-templates&gt;</font>
	<font color="#0077DD">&lt;/test&gt;</font>
     <font color="#0077DD">&lt;/xsl:template&gt;</font>

     <font color="#0077DD">&lt;xsl:template match="item"&gt;</font>
		<font color="#0077DD">&lt;xsl:param name="x"/&gt;</font>
         <font color="#0077DD">&lt;item id="<font color="#0000AA">{</font>@id<font color="#0000AA">}</font>" name="<font color="#0000AA">{</font>@text<font color="#0000AA">}</font>" pid="<font color="#0000AA">{</font>@pid<font color="#0000AA">}</font>" depth="<font color="#0000AA">{</font><font color="#CC0000">$x<font color="#0000AA">}</font></font>"&gt;</font>
            <font color="#0077DD">&lt;xsl:apply-templates select="//item<font color="#0000AA">[</font>@pid=current<font color="#0000AA">()</font>/@id<font color="#0000AA">]</font>"&gt;</font>
				<font color="#0077DD">&lt;xsl:with-param name="x" select="<font color="#CC0000">$x</font>+1"/&gt;</font>
			<font color="#0077DD">&lt;/xsl:apply-templates&gt;</font>
         <font color="#0077DD">&lt;/item&gt;</font>

     <font color="#0077DD">&lt;/xsl:template&gt;</font>

<font color="#0077DD">&lt;/xsl:stylesheet&gt;</font></pre>Получаем : <pre>  &lt;?xml version="1.0" encoding="windows-1251" ?&gt; 
 <font color="#0077DD">&lt;test&gt;</font>
 <font color="#0077DD">&lt;item id="1" name="test1" pid="0" depth="1"&gt;</font>
        <font color="#0077DD">&lt;item id="3" name="test3" pid="1" depth="2"&gt;</font>
             <font color="#0077DD">&lt;item id="5" name="test5" pid="3" depth="3" /&gt;</font> 
         <font color="#0077DD">&lt;/item&gt;</font>
  <font color="#0077DD">&lt;/item&gt;</font>
  <font color="#0077DD">&lt;item id="2" name="test2" pid="0" depth="1"&gt;</font>
         <font color="#0077DD">&lt;item id="4" name="test4" pid="2" depth="2" /&gt;</font> 
  <font color="#0077DD">&lt;/item&gt;</font>
  <font color="#0077DD">&lt;/test&gt;</font></pre><hr size="1" noshade><br><div class="forums"><ul class="forum"><li><b>А сейчас позреют многие ...</b>, Nexus <span class="gray">[01.07.2002 17:59]</span><ul><li><a href="/forum/?id=3414">то же самое можно делать и с помощью парсера</a>, Serge I. Zolotukhin <span class="gray">[01.07.2002 19:07]</span><ul><li><a href="/forum/?id=3423">да, но по-моему PAF говорил о неплохом кешировании</a>, Nexus <span class="gray">[02.07.2002 01:06]</span><ul><li><a href="/forum/?id=3445">Только зачем лишний трансформ? Не лучше-ли сразу из plain делать html, отображающий дерево?</a> <nobr>(-)</nobr>, Misha v.3 <span class="gray">[02.07.2002 11:53]</span><ul><li><a href="/forum/?id=3461">Э</a> <nobr>(-)</nobr>, Nexus <span class="gray">[02.07.2002 13:47]</span><ul><li><a href="/forum/?id=3462">Это только иллюстративный пример ...</a>, Nexus <span class="gray">[02.07.2002 13:50]</span><ul><li><a href="/forum/?id=3466">Дык, Serge сразу и сказал - хороший иллюстративный пример ;-)</a> <nobr>(-)</nobr>, Luzhnikovskiy <span class="gray">[02.07.2002 13:53]</span></li></ul></li></ul></li></ul></li><li><a href="/forum/?id=3431">для CGI варианта это кэширование вряд ли дает большой выигрыш, а вот для модуля или ISAPI да</a> <nobr>(-)</nobr>, <span class="gray">egr [02.07.2002 08:41]</span><ul><li><a href="/forum/?id=3472">Но ведь на "правильном" хостинге как ISAPI или модуль ? ;)</a> <nobr>(-)</nobr>, Nexus <span class="gray">[02.07.2002 14:05]</span><ul><li><a href="/forum/?id=3474">не слыхал про такие</a>, <span class="gray">egr [02.07.2002 14:09]</span><ul><li><a href="/forum/?id=3475">У себя на хостинге я всегда закомпиливаю все в апач. PHP,Parser,mod_ ...</a> <nobr>(-)</nobr>, Nexus <span class="gray">[02.07.2002 14:11]</span><ul><li><a href="/forum/?id=3476">ну это ты так, а вот другие боятся :)</a> <nobr>(-)</nobr>, <span class="gray">egr [02.07.2002 14:14]</span></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></div></td></tr></table><br clear="all"><table border="0" cellpadding="5" cellspacing="1" width="100%" bgcolor="#CCCCCC"><tr align="center" bgcolor="#99D228"><td width="33%" class="copyright">
E-mail: <a href="mailto:mailbox@parser.ru">mailbox@parser.ru</a></td><td width="34%" class="copyright">Copyright © 1997–2004</td><td width="33%" class="copyright"><a href="http://www.artlebedev.ru/">Студия Артемия Лебедева</a></td></tr></table></body></html>
<!-- =forum/=/forum/=0=/../data/cache/forum/b7b41a6d85ee89d050c4db2ee39f6767_win_ie_ru_HTML= -->
