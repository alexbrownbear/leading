
Быстрый старт Classic Toolkit, начало
============================================

- [Установка Sencha Cmd](#Установка-Sencha-Cmd)
- [Подготовка проекта](#Подготовка-проекта)
- [Создание NPM-пакета](#Создание-NPM-пакета)
- [Инсталяция Sencha ExtJS SDK](#Инсталяция-Sencha-ExtJS-SDK)
- [Создание рабочего пространства ](#Создание-рабочего-пространства)
- [Настройка файла `workspace.json`](#Настройка-файла-workspacejson)
- [Файл игнорирования](#Файл-игнорирования)
- [Тестовое ExtJS-приложение](#Тестовое-ExtJS-приложение)
- [Настройка `package.json`](#Настройка-packagejson)
- [Подготовка приложения](#Подготовка-приложения)
- [Запуск приложения](#Запуск-приложения)
- [Немного о команде `sencha app watch`](#Немного-о-команде-sencha-app-watch)
- [Продолжение](#Продолжение)

Данное руководство поможет быстро создать окружение для ExtJS-разработки 
и запустить тестовое ExtJS-приложение с использованием Classic Toolkit.

Для этого вам необходимо:
- Установить Sencha Cmd
- Настроить рабочее пространство
- Создать NPM-пакет для своего проекта
- Настроить конфигурационные файлы
- И собственно создать приложение






Установка Sencha Cmd
--------------------

Скачайте и установите 
[Sencha Cmd 6.5.x for Windows 64-bit](https://www.sencha.com/products/extjs/cmd-download/).


После установки обязательно пропишите в `PATH` путь к Sencha Cmd: `C:/Users/<username>/bin/Sencha/Cmd`.

> Обычно установка Sencha Cmd проходит без проблем, но в некоторых последних версиях возникали проблемы при некоторых условиях.
> Поэтому можно попробовать установить как это задумано производителем и в случае проблем установить в корень диска.
> Как правильно установить в корень диска читайте в статье [Установка Sencha Cmd](cmd/install.md).



Подготовка проекта
-------------------------------

Проект будет состоять из двух сущностей:
- рабочее пространство,
- NPM-пакет.

Рабочее пространство необходимо для работы сборщика проекта Sencha Cmd. Оно из себя представляет
директорию с файлом `workspace.json`, в котором группируются директории с приложениями и 
пакетами.

NPM-пакет необходим для более удобной работы с рабочим пространством. В частности,
многие зависимости уже подготовлены как NPM-модули и легко устанавливаются
командой `npm init`. Также удобнее пользоваться командой `npm start` вместо более 
длинной `cd myproject && sencha app watch`.

Итого, в подготовку проекта входит:
- создание NPM-пакета,
- инсталяция Sencha ExtJS SDK,
- создание рабочего пространства,
- создание ignore-файла.


Для начала создайте директорию под рабочее пространство, например `c:/@repositories/myproject`.

> В данной статье предполагается, что репозитории ваших проектов находятся
в директории `c:/@repositories`.

Создание NPM-пакета
-------------------

Превратите рабочее пространство в NPM-пакет:

```bash
cd c:/@repositories/myproject
npm init
```

Более подробно как это сделать читайте в статье: [Документация по команде `npm init`](https://docs.npmjs.com/cli/init).


Инсталяция Sencha ExtJS SDK
--------------------------------------------

Установите зависимость с фреймворком Sencha ExtJS SDK:

```bash
cd c:/@repositories/myproject
npm install --save-dev git+ssh://git@bitbucket.org:infogorod/sencha-extjs-6.5.3.57
```

> Внимание, репозитории `git@bitbucket.org:infogorod/sencha-extjs*` являются
> приватными. Для доступа к ним, [сгенерируйте ключ](../git/ssh-keys.md) 
> и отправьте на khusamovsa@it.mos.ru с обоснованием доступа.







Создание рабочего пространства 
------------------------------------

Выполните команду `sencha workspace init`:

```bash
cd c:/@repositories/myproject
sencha workspace init
```





Настройка файла `workspace.json`
--------------------------------

В файле `workspace.json` пропишите ссылку на Sencha ExtJS SDK.
В итоге этот файл должен стать примерно с таким содержанием (можно просто скопировать):

```json
{
  "apps": [],
  "frameworks": {
    "ext": {
      "path": "node_modules/infogorod-sencha-extjs-6.5.3.57",
      "version": "6.5.3.57"
    }
  },
  "build": {
    "dir": "${workspace.dir}/build"
  },
  "packages": {
    "dir": [
      "${workspace.dir}/packages/local"
    ],
    "extract": [
      "${workspace.dir}/packages/remote"
    ]
  }
}
```


Файл игнорирования
------------------

И напоследок, добавьте ignore-файл. 

Примеры ingnore-файлов для Git и Mercurial можете посмотреть по ссылкам: 
[`.gitignore`](gitignore.md) или [`.hgignore`](hgignore.md).








Тестовое ExtJS-приложение
--------------------------------------

Для создания приложения внутри директории рабочего пространства выполните команду:

```bash
cd c:/@repositories/myproject
sencha generate app -ext -classic MyTestApp mytestapp
```

Здесь `MyTestApp` имя пространства классов вашего будущего приложения и должно соответствовать PascalCase-стилю. 
Приложение будет располагаться в директории `mytestapp` (она будет создана командой).

> Внимание, приложением мы сделали Classic Toolkit и по умолчанию именно такой тип приложения следует делать.
> Соответственно документацию читать только для Classic Toolkit.



Настройка `package.json`
------------------------

Добавьте в файле `package.json` в разделе `scripts` строки запуска и сборки приложения:

```json
{
  "scripts": {
    "start": "cd mytestapp && sencha app watch",
    "start:fashion": "cd mytestapp && sencha app watch --fashion",
    "build": "cd mytestapp && sencha app build"
  }
}
```

Здесь: 
- `mytestapp` директория с вашим приложением,
- опция `--fashion` позволяет менять стили без перезагрузки браузера.

Теперь для запуска приложения для разработки достаточно выполнить команду:

```bash
cd c:/@repositories/myproject
npm run start
```

Также у вас будут под рукой команды: 
- `npm run start:fashion` для запуска в режиме `watch --fashion`,
- и `npm run build` для сборки проекта, соответственно.




Подготовка приложения
---------------------

После того, как у вас создано приложение, можно произвести небольшие изменения, которые скорее всего потребуются.
Эти небольшие изменения описаны в статье [Подготовка приложения](cmd/prepare-app.md).



Запуск приложения
-----------------

Болванка приложения готова. Ее можно сразу же запустить.

```bash
cd c:/@repositories/myproject
npm run start
```

> Внимание, здесь командой `npm run start` выполняется команда 
`cd mytestapp && sencha app watch` в соответствии с настройками
в файле `package.json/scripts`.




Результатом выполнения команды будут несколько строк о сборке. Вам следует найти среди них две строки:

```
[INF] Application available at http://localhost:1841
[INF] Waiting for changes...
```

Команда [`sencha app watch`][sencha-app-watch] по сути создает веб-сервер, который показывает 
директорию рабочего пространства. О чем сообщается в сообщениях данной команды. 
Зайдите в браузере по адресу http://localhost:1841 и найдите и кликните по директории 
приложения. Откроется красивое приложение о сотрудниках компании.
Это тестовое приложение, которое по умолчанию автоматически генерируется 
командой `sencha generate app`.






Немного о команде `sencha app watch`
----------------------------------

Команда [`sencha app watch`][sencha-app-watch] позволяет запустить веб-сервер для вашего приложения.
Причем будут отслеживаться изменения в файлах. Достаточно изменить файл, а затем в браузере обновить
приложение и изменения тут же вступят в силу.

Сборка обычно заканчивается сообщением:

```
[INF] Waiting for changes...
```

После которого можно обновить приложение в браузере, чтобы увидеть изменения.

Выполнение команды можно остановить в любой момент нажатием на `Ctrl+C`.


Продолжение
----------

Продолжение читайте в [Быстрый старт, продолжение](quick-start-step2.md).







[sencha-app-watch]: http://docs.sencha.com/cmd/6.5.3/guides/advanced_cmd/cmd_reference.html#advanced_cmd-_-cmd_reference_-_sencha_app_watch