
Быстрый старт Sencha Cmd + ExtJS (classic only)
============================================


- [Быстрый старт Sencha Cmd + ExtJS (classic only)](#Быстрый-старт-Sencha-Cmd-ExtJS-classic-only)
	- [Установка Sencha Cmd](#Установка-Sencha-Cmd)
	- [Структура рабочего пространства](#Структура-рабочего-пространства)
	- [Создание рабочего пространства](#Создание-рабочего-пространства)
	- [Создание NPM-пакета](#Создание-NPM-пакета)
	- [Инсталяция Sencha ExtJS SDK](#Инсталяция-Sencha-ExtJS-SDK)
	- [Настройки файла `workspace.json`](#Настройки-файла-workspacejson)
	- [Тестовое ExtJS-приложение](#Тестовое-ExtJS-приложение)
	- [Запуск приложения](#Запуск-приложения)
	- [Немного о команде `sencha app watch`](#Немного-о-команде-sencha-app-watch)
	- [Настройка `package.json`](#Настройка-packagejson)
	- [Русификация приложения](#Русификация-приложения)
	- [Мелкие неприятности](#Мелкие-неприятности)
		- [Убрать RTL](#Убрать-RTL)
		- [Отключить slicer](#Отключить-slicer)



Данное руководство поможет быстро создать окружение для ExtJS-разработки и запустить тестовое ExtJS-приложение с использованием Classic Toolkit.

Для этого вам необходимо:
- Установить Sencha Cmd
- Настроить рабочее пространство
- Создать NPM-пакет для своего проекта
- Настроить конфигурационные файлы
- И собственно создать приложение






Установка Sencha Cmd
--------------------

Скачайте и установите 
[Sencha Cmd 6.5.x for Windows 64-bit](https://www.sencha.com/products/extjs/cmd-download/).


После установки обязательно пропишите в `PATH` путь к Sencha Cmd: `C:/Users/<username>/bin/Sencha/Cmd`.

> Обычно установка Sencha Cmd проходит без проблем, но в некоторых последних версиях возникали проблемы при некоторых условиях.
> Поэтому можно попробовать установить как это задумано производителем и в случае проблем установить в корень диска.
> Как правильно установить в корень диска читайте в статье [Установка Sencha Cmd](install.md).



Структура рабочего пространства
-------------------------------

Сначала следует создать рабочее пространство (workspace), а затем уже приложение и/или пакет. 
Пакетов и приложений в рабочем пространстве может быть несколько (от 0 и более).
Также для удобной работы требуется оформить свое рабочее пространство в NPM-пакет.

Создание рабочего пространства
------------------------------

В создание рабочего пространства входит:
- создание файла `workspace.json`,
- создание NPM-пакета,
- инсталяция Sencha ExtJS SDK,
- создание ignore-файла.

Создайте директорию под рабочее пространство (например `c:/@repositories/myproject`), 
затем перейдите в нее и выполните команду `sencha workspace init`:

```bash
cd c:/@repositories/myproject
sencha workspace init
```

Добавьте ignore-файл. Примеры ingnore-файлов для
Git и Mercurial можете посмотреть по ссылкам: 
[`.gitignore`](gitignore.md) или [`.hgignore`](hgignore.md).


Создание NPM-пакета
-------------------

Превратите рабочее пространство в NPM-пакет:

```bash
cd c:/@repositories/myproject
npm init
```

[Документация по команде `npm init`](https://docs.npmjs.com/cli/init)


Инсталяция Sencha ExtJS SDK
--------------------------------------------

Установите зависимость с фреймворком Sencha ExtJS SDK:

```bash
cd c:/@repositories/myproject
npm install --save-dev git+ssh://git@bitbucket.org:infogorod/sencha-extjs-6.5.3.57
```

> Внимание, репозитории `git@bitbucket.org:infogorod/sencha-extjs*` являются
> приватными. Для доступа к ним, [сгенерируйте ключ](../git/ssh-keys.md) 
> и отправьте на khusamovsa@it.mos.ru с обоснованием доступа.



Настройки файла `workspace.json`
--------------------------------

В файле `workspace.json` пропишите ссылку на модуль.
В итоге этот файл должен стать примерно с таким содержанием (можно просто скопировать):

```json
{
  "apps": [],
  "frameworks": {
    "ext": {
      "path": "node_modules/infogorod-sencha-extjs-6.5.3.57",
      "version": "6.5.3.57"
    }
  },
  "build": {
    "dir": "${workspace.dir}/build"
  },
  "packages": {
    "dir": [
      "${workspace.dir}/packages/local"
    ],
    "extract": [
      "${workspace.dir}/packages/remote"
    ]
  }
}
```








Тестовое ExtJS-приложение
--------------------------------------

Для создания приложения внутри директории рабочего пространства выполните команду:

```
cd c:/@repositories/myproject
sencha generate app -ext -classic MyAppName myapp/path
```

Здесь `MyAppName` имя пространства классов вашего будущего приложения и должно соответствовать PascalCase-стилю. 
Приложение будет располагаться в директории `myapp/path` (она будет создана командой).

Запуск приложения
-----------------

Болванка приложения готова. Ее можно сразу же запустить.

```
cd c:/@repositories/myproject/myapp/path
sencha app watch
```

В листинге команды найдите адрес (обычно http://localhost:1841) и зайти на него через браузер. 
Откроется красивое приложение о сотрудниках компании.

> Внимание, приложением мы сделали Classic Toolkit и по умолчанию именно такой тип приложения следует делать.
> Соответственно документацию читать только для Classic Toolkit.

Немного о команде `sencha app watch`
----------------------------------

Команда [`sencha app watch`][sencha-app-watch] позволяет запустить веб-сервер для вашего приложения.
Причем будут отслеживаться изменения в файлах. Достаточно изменить файл, а затем в браузере обновить
приложение и изменения тут же вступят в силу.

Настройка `package.json`
------------------------

Добавьте в раздел `scripts` строку запуска и сборки приложения:

```json
{
  "scripts": {
    "start": "cd myapp/path && sencha app watch",
    "start:fashion": "cd myapp/path && sencha app watch --fashion",
    "build": "cd myapp/path && sencha app build"
  }
}
```

Опция `--fashion` позволяет менять стили без перезагрузки браузера.

Теперь для запуска приложения для разработки достаточно выполнить команду:

```bash
cd c:/@repositories/myproject
npm run start
```

Также у вас будут под рукой команды `npm run start:fashion` и `npm run build` для запуска в режиме `watch --fashion` и сборки проекта, соответственно.


Русификация приложения
-------------------------

В файл `app.json` добавьте русификацию:

```json
    "locale": "ru",
    "requires": [
        "font-awesome",
        "ext-locale"
    ],
```




Мелкие неприятности
-------------------

### Убрать RTL

Sencha Cmd начал генерировать такую строку: 
```JSON
"path": "${framework.dir}/build/ext-all-rtl-debug.js"
```
В итоге во многих компонентах `align` по умолчанию выставлен `right`.
С чем это связано не понятно. Так что придется `rtl` убирать пока вручную.

### Отключить slicer

В файле `app.json` занулите slicer:

```json
"slicer": null,
```




[sencha-app-watch]: http://docs.sencha.com/cmd/6.5.3/guides/advanced_cmd/cmd_reference.html#advanced_cmd-_-cmd_reference_-_sencha_app_watch